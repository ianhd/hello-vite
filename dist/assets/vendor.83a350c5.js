function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"),n=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function r(t){if(w(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=r(S(i)?s(i):i);if(o)for(const t in o)e[t]=o[t]}return e}if(k(t))return t}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(S(t))e=t;else if(w(t))for(let n=0;n<t.length;n++){const r=a(t[n]);r&&(e+=r+" ")}else if(k(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const u=t=>null==t?"":k(t)?JSON.stringify(t,c,2):String(t),c=(t,e)=>I(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:T(e)?{[`Set(${e.size})`]:[...e.values()]}:!k(e)||w(e)||R(e)?e:String(e),l={},h=[],f=()=>{},p=()=>!1,d=/^on[^a-z]/,v=t=>d.test(t),g=t=>t.startsWith("onUpdate:"),y=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,_=(t,e)=>b.call(t,e),w=Array.isArray,I=t=>"[object Map]"===P(t),T=t=>"[object Set]"===P(t),E=t=>"function"==typeof t,S=t=>"string"==typeof t,C=t=>"symbol"==typeof t,k=t=>null!==t&&"object"==typeof t,N=t=>k(t)&&E(t.then)&&E(t.catch),A=Object.prototype.toString,P=t=>A.call(t),R=t=>"[object Object]"===P(t),x=t=>S(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,D=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),O=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},M=/-(\w)/g,L=O((t=>t.replace(M,((t,e)=>e?e.toUpperCase():"")))),F=/\B([A-Z])/g,U=O((t=>t.replace(F,"-$1").toLowerCase())),j=O((t=>t.charAt(0).toUpperCase()+t.slice(1))),q=O((t=>t?`on${j(t)}`:"")),V=(t,e)=>t!==e&&(t==t||e==e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},K=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},W=t=>{const e=parseFloat(t);return isNaN(e)?t:e},H=new WeakMap,z=[];let G;const Q=Symbol(""),Y=Symbol("");function $(t,e=l){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return t();if(!z.includes(n)){Z(n);try{return et.push(tt),tt=!0,z.push(n),G=n,t()}finally{z.pop(),rt(),G=z[z.length-1]}}};return n.id=J++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function X(t){t.active&&(Z(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let J=0;function Z(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let tt=!0;const et=[];function nt(){et.push(tt),tt=!1}function rt(){const t=et.pop();tt=void 0===t||t}function it(t,e,n){if(!tt||void 0===G)return;let r=H.get(t);r||H.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(G)||(i.add(G),G.deps.push(i))}function ot(t,e,n,r,i,o){const s=H.get(t);if(!s)return;const a=new Set,u=t=>{t&&t.forEach((t=>{(t!==G||t.allowRecurse)&&a.add(t)}))};if("clear"===e)s.forEach(u);else if("length"===n&&w(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&u(t)}));else switch(void 0!==n&&u(s.get(n)),e){case"add":w(t)?x(n)&&u(s.get("length")):(u(s.get(Q)),I(t)&&u(s.get(Y)));break;case"delete":w(t)||(u(s.get(Q)),I(t)&&u(s.get(Y)));break;case"set":I(t)&&u(s.get(Q))}a.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const st=t("__proto__,__v_isRef,__isVue"),at=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(C)),ut=pt(),ct=pt(!1,!0),lt=pt(!0),ht=ft();function ft(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Jt(this);for(let e=0,i=this.length;e<i;e++)it(n,0,e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(Jt)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){nt();const n=Jt(this)[e].apply(this,t);return rt(),n}})),t}function pt(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?Wt:Kt:e?Bt:Vt).get(n))return n;const o=w(n);if(!t&&o&&_(ht,r))return Reflect.get(ht,r,i);const s=Reflect.get(n,r,i);if(C(r)?at.has(r):st(r))return s;if(t||it(n,0,r),e)return s;if(te(s)){return!o||!x(r)?s.value:s}return k(s)?t?Gt(s):zt(s):s}}function dt(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=Jt(r),o=Jt(o),!w(e)&&te(o)&&!te(r)))return o.value=r,!0;const s=w(e)&&x(n)?Number(n)<e.length:_(e,n),a=Reflect.set(e,n,r,i);return e===Jt(i)&&(s?V(r,o)&&ot(e,"set",n,r):ot(e,"add",n,r)),a}}const vt={get:ut,set:dt(),deleteProperty:function(t,e){const n=_(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&ot(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return C(e)&&at.has(e)||it(t,0,e),n},ownKeys:function(t){return it(t,0,w(t)?"length":Q),Reflect.ownKeys(t)}},gt={get:lt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},yt=y({},vt,{get:ct,set:dt(!0)}),mt=t=>k(t)?zt(t):t,bt=t=>k(t)?Gt(t):t,_t=t=>t,wt=t=>Reflect.getPrototypeOf(t);function It(t,e,n=!1,r=!1){const i=Jt(t=t.__v_raw),o=Jt(e);e!==o&&!n&&it(i,0,e),!n&&it(i,0,o);const{has:s}=wt(i),a=r?_t:n?bt:mt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function Tt(t,e=!1){const n=this.__v_raw,r=Jt(n),i=Jt(t);return t!==i&&!e&&it(r,0,t),!e&&it(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Et(t,e=!1){return t=t.__v_raw,!e&&it(Jt(t),0,Q),Reflect.get(t,"size",t)}function St(t){t=Jt(t);const e=Jt(this);return wt(e).has.call(e,t)||(e.add(t),ot(e,"add",t,t)),this}function Ct(t,e){e=Jt(e);const n=Jt(this),{has:r,get:i}=wt(n);let o=r.call(n,t);o||(t=Jt(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?V(e,s)&&ot(n,"set",t,e):ot(n,"add",t,e),this}function kt(t){const e=Jt(this),{has:n,get:r}=wt(e);let i=n.call(e,t);i||(t=Jt(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&ot(e,"delete",t,void 0),o}function Nt(){const t=Jt(this),e=0!==t.size,n=t.clear();return e&&ot(t,"clear",void 0,void 0),n}function At(t,e){return function(n,r){const i=this,o=i.__v_raw,s=Jt(o),a=e?_t:t?bt:mt;return!t&&it(s,0,Q),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function Pt(t,e,n){return function(...r){const i=this.__v_raw,o=Jt(i),s=I(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),l=n?_t:e?bt:mt;return!e&&it(o,0,u?Y:Q),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function Rt(t){return function(...e){return"delete"!==t&&this}}function xt(){const t={get(t){return It(this,t)},get size(){return Et(this)},has:Tt,add:St,set:Ct,delete:kt,clear:Nt,forEach:At(!1,!1)},e={get(t){return It(this,t,!1,!0)},get size(){return Et(this)},has:Tt,add:St,set:Ct,delete:kt,clear:Nt,forEach:At(!1,!0)},n={get(t){return It(this,t,!0)},get size(){return Et(this,!0)},has(t){return Tt.call(this,t,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:At(!0,!1)},r={get(t){return It(this,t,!0,!0)},get size(){return Et(this,!0)},has(t){return Tt.call(this,t,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:At(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=Pt(i,!1,!1),n[i]=Pt(i,!0,!1),e[i]=Pt(i,!1,!0),r[i]=Pt(i,!0,!0)})),[t,n,e,r]}const[Dt,Ot,Mt,Lt]=xt();function Ft(t,e){const n=e?t?Lt:Mt:t?Ot:Dt;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(_(n,r)&&r in e?n:e,r,i)}const Ut={get:Ft(!1,!1)},jt={get:Ft(!1,!0)},qt={get:Ft(!0,!1)},Vt=new WeakMap,Bt=new WeakMap,Kt=new WeakMap,Wt=new WeakMap;function Ht(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>P(t).slice(8,-1))(t))}function zt(t){return t&&t.__v_isReadonly?t:Qt(t,!1,vt,Ut,Vt)}function Gt(t){return Qt(t,!0,gt,qt,Kt)}function Qt(t,e,n,r,i){if(!k(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=Ht(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function Yt(t){return $t(t)?Yt(t.__v_raw):!(!t||!t.__v_isReactive)}function $t(t){return!(!t||!t.__v_isReadonly)}function Xt(t){return Yt(t)||$t(t)}function Jt(t){return t&&Jt(t.__v_raw)||t}function Zt(t){return K(t,"__v_skip",!0),t}function te(t){return Boolean(t&&!0===t.__v_isRef)}function ee(t){return te(t)?t.value:t}const ne={get:(t,e,n)=>ee(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return te(i)&&!te(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function re(t){return Yt(t)?t:new Proxy(t,ne)}class ie{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=$(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,ot(Jt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){const t=Jt(this);return t._dirty&&(t._value=this.effect(),t._dirty=!1),it(t,0,"value"),t._value}set value(t){this._setter(t)}}function oe(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){ae(o,e,n)}return i}function se(t,e,n,r){if(E(t)){const i=oe(t,e,n,r);return i&&N(i)&&i.catch((t=>{ae(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(se(t[o],e,n,r));return i}function ae(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void oe(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let ue=!1,ce=!1;const le=[];let he=0;const fe=[];let pe=null,de=0;const ve=[];let ge=null,ye=0;const me=Promise.resolve();let be=null,_e=null;function we(t){const e=be||me;return t?e.then(this?t.bind(this):t):e}function Ie(t){if(!(le.length&&le.includes(t,ue&&t.allowRecurse?he+1:he)||t===_e)){const e=function(t){let e=he+1,n=le.length;const r=ke(t);for(;e<n;){const t=e+n>>>1;ke(le[t])<r?e=t+1:n=t}return e}(t);e>-1?le.splice(e,0,t):le.push(t),Te()}}function Te(){ue||ce||(ce=!0,be=me.then(Ne))}function Ee(t,e,n,r){w(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),Te()}function Se(t,e=null){if(fe.length){for(_e=e,pe=[...new Set(fe)],fe.length=0,de=0;de<pe.length;de++)pe[de]();pe=null,de=0,_e=null,Se(t,e)}}function Ce(t){if(ve.length){const t=[...new Set(ve)];if(ve.length=0,ge)return void ge.push(...t);for(ge=t,ge.sort(((t,e)=>ke(t)-ke(e))),ye=0;ye<ge.length;ye++)ge[ye]();ge=null,ye=0}}const ke=t=>null==t.id?1/0:t.id;function Ne(t){ce=!1,ue=!0,Se(t),le.sort(((t,e)=>ke(t)-ke(e)));try{for(he=0;he<le.length;he++){const t=le[he];t&&!1!==t.active&&oe(t,null,14)}}finally{he=0,le.length=0,Ce(),ue=!1,be=null,(le.length||fe.length||ve.length)&&Ne(t)}}function Ae(t,e,...n){const r=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(W))}let a,u=r[a=q(e)]||r[a=q(L(e))];!u&&o&&(u=r[a=q(U(e))]),u&&se(u,t,6,i);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,se(c,t,6,i)}}function Pe(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let s={},a=!1;if(!E(t)){const r=t=>{const n=Pe(t,e,!0);n&&(a=!0,y(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||a?(w(o)?o.forEach((t=>s[t]=null)):y(s,o),r.set(t,s),s):(r.set(t,null),null)}function Re(t,e){return!(!t||!v(e))&&(e=e.slice(2).replace(/Once$/,""),_(t,e[0].toLowerCase()+e.slice(1))||_(t,U(e))||_(t,e))}let xe=null,De=null;function Oe(t){const e=xe;return xe=t,De=t&&t.type.__scopeId||null,e}function Me(t){De=t}function Le(){De=null}function Fe(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:f,setupState:p,ctx:d,inheritAttrs:v}=t;let y;const m=Oe(t);try{let t;if(4&n.shapeFlag){const e=i||r;y=fr(l.call(e,e,h,o,p,f,d)),t=u}else{const n=e;0,y=fr(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:Ue(u)}let m=y;if(t&&!1!==v){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&(1&n||6&n)&&(s&&e.some(g)&&(t=je(t,s)),m=lr(m,t))}0,n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),y=m}catch(b){Jn.length=0,ae(b,t,1),y=cr($n)}return Oe(m),y}const Ue=t=>{let e;for(const n in t)("class"===n||"style"===n||v(n))&&((e||(e={}))[n]=t[n]);return e},je=(t,e)=>{const n={};for(const r in t)g(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function qe(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Re(n,o))return!0}return!1}function Ve(t,e,n=!1){const r=wr||xe;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&E(e)?e.call(r.proxy):e}}const Be={};function Ke(t,e,n){return We(t,e,n)}function We(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=l,a=wr){let u,c,h=!1,p=!1;if(te(t)?(u=()=>t.value,h=!!t._shallow):Yt(t)?(u=()=>t,r=!0):w(t)?(p=!0,h=t.some(Yt),u=()=>t.map((t=>te(t)?t.value:Yt(t)?Ge(t):E(t)?oe(t,a,2):void 0))):u=E(t)?e?()=>oe(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),se(t,a,3,[d])}:f,e&&r){const t=u;u=()=>Ge(t())}let d=t=>{c=b.options.onStop=()=>{oe(t,a,4)}},v=p?[]:Be;const g=()=>{if(b.active)if(e){const t=b();(r||h||(p?t.some(((t,e)=>V(t,v[e]))):V(t,v)))&&(c&&c(),se(e,a,3,[t,v===Be?void 0:v,d]),v=t)}else b()};let y;g.allowRecurse=!!e,y="sync"===i?g:"post"===i?()=>Bn(g,a&&a.suspense):()=>{!a||a.isMounted?function(t){Ee(t,pe,fe,de)}(g):g()};const b=$(u,{lazy:!0,onTrack:o,onTrigger:s,scheduler:y});return Nr(b,a),e?n?g():v=b():"post"===i?Bn(b,a&&a.suspense):b(),()=>{X(b),a&&m(a.effects,b)}}function He(t,e,n){const r=this.proxy,i=S(t)?t.includes(".")?ze(r,t):()=>r[t]:t.bind(r,r);let o;return E(e)?o=e:(o=e.handler,n=e),We(i,o.bind(r),n,this)}function ze(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Ge(t,e=new Set){if(!k(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),te(t))Ge(t.value,e);else if(w(t))for(let n=0;n<t.length;n++)Ge(t[n],e);else if(T(t)||I(t))t.forEach((t=>{Ge(t,e)}));else if(R(t))for(const n in t)Ge(t[n],e);return t}const Qe=t=>!!t.type.__asyncLoader,Ye=t=>t.type.__isKeepAlive;function $e(t,e){Je(t,"a",e)}function Xe(t,e){Je(t,"da",e)}function Je(t,e,n=wr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(tn(e,r,n),n){let t=n.parent;for(;t&&t.parent;)Ye(t.parent.vnode)&&Ze(r,e,n,t),t=t.parent}}function Ze(t,e,n,r){const i=tn(e,t,r,!0);un((()=>{m(r[e],i)}),n)}function tn(t,e,n=wr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;nt(),Ir(n);const i=se(e,n,t,r);return Ir(null),rt(),i});return r?i.unshift(o):i.push(o),o}}const en=t=>(e,n=wr)=>(!Er||"sp"===t)&&tn(t,e,n),nn=en("bm"),rn=en("m"),on=en("bu"),sn=en("u"),an=en("bum"),un=en("um"),cn=en("sp"),ln=en("rtg"),hn=en("rtc");function fn(t,e=wr){tn("ec",t,e)}let pn=!0;function dn(t){const e=yn(t),n=t.proxy,r=t.ctx;pn=!1,e.beforeCreate&&vn(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:c,created:l,beforeMount:h,mounted:p,beforeUpdate:d,updated:v,activated:g,deactivated:y,beforeDestroy:m,beforeUnmount:b,destroyed:_,unmounted:I,render:T,renderTracked:S,renderTriggered:C,errorCaptured:N,serverPrefetch:A,expose:P,inheritAttrs:R,components:x,directives:D,filters:O}=e;if(c&&function(t,e,n=f){w(t)&&(t=wn(t));for(const r in t){const n=t[r];k(n)?e[r]="default"in n?Ve(n.from||r,n.default,!0):Ve(n.from||r):e[r]=Ve(n)}}(c,r,null),s)for(const f in s){const t=s[f];E(t)&&(r[f]=t.bind(n))}if(i){const e=i.call(n,n);k(e)&&(t.data=zt(e))}if(pn=!0,o)for(const w in o){const t=o[w],e=Ar({get:E(t)?t.bind(n,n):E(t.get)?t.get.bind(n,n):f,set:!E(t)&&E(t.set)?t.set.bind(n):f});Object.defineProperty(r,w,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const f in a)gn(a[f],r,n,f);if(u){const t=E(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{!function(t,e){if(wr){let n=wr.provides;const r=wr.parent&&wr.parent.provides;r===n&&(n=wr.provides=Object.create(r)),n[t]=e}}(e,t[e])}))}function M(t,e){w(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(l&&vn(l,t,"c"),M(nn,h),M(rn,p),M(on,d),M(sn,v),M($e,g),M(Xe,y),M(fn,N),M(hn,S),M(ln,C),M(an,b),M(un,I),M(cn,A),w(P))if(P.length){const e=t.exposed||(t.exposed={});P.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});T&&t.render===f&&(t.render=T),null!=R&&(t.inheritAttrs=R),x&&(t.components=x),D&&(t.directives=D)}function vn(t,e,n){se(w(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function gn(t,e,n,r){const i=r.includes(".")?ze(n,r):()=>n[r];if(S(t)){const n=e[t];E(n)&&Ke(i,n)}else if(E(t))Ke(i,t.bind(n));else if(k(t))if(w(t))t.forEach((t=>gn(t,e,n,r)));else{const r=E(t.handler)?t.handler.bind(n):e[t.handler];E(r)&&Ke(i,r,t)}}function yn(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((t=>mn(u,t,s,!0))),mn(u,e,s)):u=e,o.set(e,u),u}function mn(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&mn(t,o,n,!0),i&&i.forEach((e=>mn(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=bn[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const bn={data:_n,props:Tn,emits:Tn,methods:Tn,computed:Tn,beforeCreate:In,created:In,beforeMount:In,mounted:In,beforeUpdate:In,updated:In,beforeDestroy:In,destroyed:In,activated:In,deactivated:In,errorCaptured:In,serverPrefetch:In,components:Tn,directives:Tn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=y(Object.create(null),t);for(const r in e)n[r]=In(t[r],e[r]);return n},provide:_n,inject:function(t,e){return Tn(wn(t),wn(e))}};function _n(t,e){return e?t?function(){return y(E(t)?t.call(this,this):t,E(e)?e.call(this,this):e)}:e:t}function wn(t){if(w(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function In(t,e){return t?[...new Set([].concat(t,e))]:e}function Tn(t,e){return t?y(y(Object.create(null),t),e):e}function En(t,e,n,r=!1){const i={},o={};K(o,sr,1),t.propsDefaults=Object.create(null),Sn(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:Qt(i,!1,yt,jt,Bt):t.type.props?t.props=i:t.props=o,t.attrs=o}function Sn(t,e,n,r){const[i,o]=t.propsOptions;let s,a=!1;if(e)for(let u in e){if(D(u))continue;const c=e[u];let l;i&&_(i,l=L(u))?o&&o.includes(l)?(s||(s={}))[l]=c:n[l]=c:Re(t.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(o){const e=Jt(n),r=s||l;for(let s=0;s<o.length;s++){const a=o[s];n[a]=Cn(i,e,a,r[a],t,!_(r,a))}}return a}function Cn(t,e,n,r,i,o){const s=t[n];if(null!=s){const t=_(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&E(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(Ir(i),r=o[n]=t.call(null,e),Ir(null))}else r=t}s[0]&&(o&&!t?r=!1:!s[1]||""!==r&&r!==U(n)||(r=!0))}return r}function kn(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let u=!1;if(!E(t)){const r=t=>{u=!0;const[n,r]=kn(t,e,!0);y(s,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return r.set(t,h),h;if(w(o))for(let h=0;h<o.length;h++){const t=L(o[h]);Nn(t)&&(s[t]=l)}else if(o)for(const l in o){const t=L(l);if(Nn(t)){const e=o[l],n=s[t]=w(e)||E(e)?{type:e}:e;if(n){const e=Rn(Boolean,n.type),r=Rn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||_(n,"default"))&&a.push(t)}}}const c=[s,a];return r.set(t,c),c}function Nn(t){return"$"!==t[0]}function An(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Pn(t,e){return An(t)===An(e)}function Rn(t,e){return w(e)?e.findIndex((e=>Pn(e,t))):E(e)&&Pn(e,t)?0:-1}const xn=t=>"_"===t[0]||"$stable"===t,Dn=t=>w(t)?t.map(fr):[fr(t)],On=(t,e,n)=>{const r=function(t,e=xe,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&nr(-1);const i=Oe(e),o=t(...n);return Oe(i),r._d&&nr(1),o};return r._n=!0,r._c=!0,r._d=!0,r}((t=>Dn(e(t))),n);return r._c=!1,r},Mn=(t,e,n)=>{const r=t._ctx;for(const i in t){if(xn(i))continue;const n=t[i];if(E(n))e[i]=On(0,n,r);else if(null!=n){const t=Dn(n);e[i]=()=>t}}},Ln=(t,e)=>{const n=Dn(e);t.slots.default=()=>n};function Fn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(nt(),se(u,n,8,[t.el,a,t,e]),rt())}}function Un(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jn=0;function qn(t,e){return function(n,r=null){null==r||k(r)||(r=null);const i=Un(),o=new Set;let s=!1;const a=i.app={_uid:jn++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Pr,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&E(t.install)?(o.add(t),t.install(a,...e)):E(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u,c){if(!s){const l=cr(n,r);return l.appContext=i,u&&e?e(l,o):t(l,o,c),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const Vn={scheduler:Ie,allowRecurse:!0},Bn=function(t,e){e&&e.pendingBranch?w(t)?e.effects.push(...t):e.effects.push(t):Ee(t,ge,ve,ye)},Kn=(t,e,n,r,i=!1)=>{if(w(t))return void t.forEach(((t,o)=>Kn(t,e&&(w(e)?e[o]:e),n,r,i)));if(Qe(r)&&!i)return;const o=4&r.shapeFlag?kr(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=t,c=e&&e.r,h=a.refs===l?a.refs={}:a.refs,f=a.setupState;if(null!=c&&c!==u&&(S(c)?(h[c]=null,_(f,c)&&(f[c]=null)):te(c)&&(c.value=null)),S(u)){const t=()=>{h[u]=s,_(f,u)&&(f[u]=s)};s?(t.id=-1,Bn(t,n)):t()}else if(te(u)){const t=()=>{u.value=s};s?(t.id=-1,Bn(t,n)):t()}else E(u)&&oe(u,a,12,[s,h])};function Wn(t){return function(t,e){const{insert:n,remove:r,patchProp:i,forcePatchProp:o,createElement:s,createText:a,createComment:u,setText:c,setElementText:p,parentNode:d,nextSibling:v,setScopeId:g=f,cloneNode:m,insertStaticContent:b}=t,w=(t,e,n,r=null,i=null,o=null,s=!1,a=null,u=!!e.dynamicChildren)=>{t&&!or(t,e)&&(r=st(t),J(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case Yn:I(t,e,n,r);break;case $n:T(t,e,n,r);break;case Xn:null==t&&E(e,n,r,s);break;case Qn:F(t,e,n,r,i,o,s,a,u);break;default:1&h?k(t,e,n,r,i,o,s,a,u):6&h?j(t,e,n,r,i,o,s,a,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,u,ut)}null!=l&&i&&Kn(l,t&&t.ref,o,e||t,!e)},I=(t,e,r,i)=>{if(null==t)n(e.el=a(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&c(n,e.children)}},T=(t,e,r,i)=>{null==t?n(e.el=u(e.children||""),r,i):e.el=t.el},E=(t,e,n,r)=>{[t.el,t.anchor]=b(t.children,e,n,r)},S=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=v(t),n(t,r,i),t=o;n(e,r,i)},C=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=v(t),r(t),t=n;r(e)},k=(t,e,n,r,i,o,s,a,u)=>{s=s||"svg"===e.type,null==t?A(e,n,r,i,o,s,a,u):x(t,e,i,o,s,a,u)},A=(t,e,r,o,a,u,c,l)=>{let h,f;const{type:d,props:v,shapeFlag:g,transition:y,patchFlag:b,dirs:_}=t;if(t.el&&void 0!==m&&-1===b)h=t.el=m(t.el);else{if(h=t.el=s(t.type,u,v&&v.is,v),8&g?p(h,t.children):16&g&&R(t.children,h,null,o,a,u&&"foreignObject"!==d,c,l),_&&Fn(t,null,o,"created"),v){for(const e in v)D(e)||i(h,e,null,v[e],u,t.children,o,a,it);(f=v.onVnodeBeforeMount)&&Hn(f,o,t)}P(h,t,t.scopeId,c,o)}_&&Fn(t,null,o,"beforeMount");const w=(!a||a&&!a.pendingBranch)&&y&&!y.persisted;w&&y.beforeEnter(h),n(h,e,r),((f=v&&v.onVnodeMounted)||w||_)&&Bn((()=>{f&&Hn(f,o,t),w&&y.enter(h),_&&Fn(t,null,o,"mounted")}),a)},P=(t,e,n,r,i)=>{if(n&&g(t,n),r)for(let o=0;o<r.length;o++)g(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;P(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},R=(t,e,n,r,i,o,s,a,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=a?pr(t[c]):fr(t[c]);w(null,u,e,n,r,i,o,s,a)}},x=(t,e,n,r,s,a,u)=>{const c=e.el=t.el;let{patchFlag:h,dynamicChildren:f,dirs:d}=e;h|=16&t.patchFlag;const v=t.props||l,g=e.props||l;let y;if((y=g.onVnodeBeforeUpdate)&&Hn(y,n,e,t),d&&Fn(e,t,n,"beforeUpdate"),h>0){if(16&h)M(c,e,v,g,n,r,s);else if(2&h&&v.class!==g.class&&i(c,"class",null,g.class,s),4&h&&i(c,"style",v.style,g.style,s),8&h){const a=e.dynamicProps;for(let e=0;e<a.length;e++){const u=a[e],l=v[u],h=g[u];(h!==l||o&&o(c,u))&&i(c,u,l,h,s,t.children,n,r,it)}}1&h&&t.children!==e.children&&p(c,e.children)}else u||null!=f||M(c,e,v,g,n,r,s);const m=s&&"foreignObject"!==e.type;f?O(t.dynamicChildren,f,c,n,r,m,a):u||z(t,e,c,null,n,r,m,a,!1),((y=g.onVnodeUpdated)||d)&&Bn((()=>{y&&Hn(y,n,e,t),d&&Fn(e,t,n,"updated")}),r)},O=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const u=t[a],c=e[a],l=u.el&&(u.type===Qn||!or(u,c)||6&u.shapeFlag||64&u.shapeFlag)?d(u.el):n;w(u,c,l,null,r,i,o,s,!0)}},M=(t,e,n,r,s,a,u)=>{if(n!==r){for(const c in r){if(D(c))continue;const l=r[c],h=n[c];(l!==h||o&&o(t,c))&&i(t,c,h,l,u,e.children,s,a,it)}if(n!==l)for(const o in n)D(o)||o in r||i(t,o,n[o],null,u,e.children,s,a,it)}},F=(t,e,r,i,o,s,u,c,l)=>{const h=e.el=t?t.el:a(""),f=e.anchor=t?t.anchor:a("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:v}=e;d&&(l=!0),v&&(c=c?c.concat(v):v),null==t?(n(h,r,i),n(f,r,i),R(e.children,r,f,o,s,u,c,l)):p>0&&64&p&&d&&t.dynamicChildren?(O(t.dynamicChildren,d,r,o,s,u,c),(null!=e.key||o&&e===o.subTree)&&zn(t,e,!0)):z(t,e,r,f,o,s,u,c,l)},j=(t,e,n,r,i,o,s,a,u)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):q(e,n,r,i,o,s,u):V(t,e,u)},q=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||br,o={uid:_r++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kn(r,i),emitsOptions:Pe(r,i),emit:null,emitted:null,propsDefaults:l,inheritAttrs:r.inheritAttrs,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Ae.bind(null,o),o}(t,r,i);if(Ye(t)&&(a.ctx.renderer=ut),function(t,e=!1){Er=e;const{props:n,children:r}=t.vnode,i=Tr(t);En(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=Jt(e),K(e,"_",n)):Mn(e,t.slots={})}else t.slots={},e&&Ln(t,e);K(t.slots,sr,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Zt(new Proxy(t.ctx,yr));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;wr=t,nt();const i=oe(r,t,0,[t.props,n]);if(rt(),wr=null,N(i)){const n=()=>{wr=null};if(i.then(n,n),e)return i.then((e=>{Sr(t,e)})).catch((e=>{ae(e,t,0)}));t.asyncDep=i}else Sr(t,i)}else Cr(t)}(t,e):void 0;Er=!1}(a),a.asyncDep){if(i&&i.registerDep(a,W),!t.el){const t=a.subTree=cr($n);T(null,t,e,n)}}else W(a,t,e,n,i,o,s)},V=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||qe(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?qe(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Re(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void H(r,e,n);r.next=e,function(t){const e=le.indexOf(t);e>he&&le.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},W=(t,e,n,r,i,o,s)=>{t.update=$((function(){if(t.isMounted){let e,{next:n,bu:r,u:a,parent:u,vnode:c}=t,l=n;n?(n.el=c.el,H(t,n,s)):n=c,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Hn(e,u,n,c);const h=Fe(t),f=t.subTree;t.subTree=h,w(f,h,d(f.el),st(f),t,i,o),n.el=h.el,null===l&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,h.el),a&&Bn(a,i),(e=n.props&&n.props.onVnodeUpdated)&&Bn((()=>Hn(e,u,n,c)),i)}else{let s;const{el:a,props:u}=e,{bm:c,m:l,parent:h}=t;if(c&&B(c),(s=u&&u.onVnodeBeforeMount)&&Hn(s,h,e),a&&lt){const n=()=>{t.subTree=Fe(t),lt(a,t.subTree,t,i,null)};Qe(e)?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=Fe(t);w(null,s,n,r,t,i,o),e.el=s.el}if(l&&Bn(l,i),s=u&&u.onVnodeMounted){const t=e;Bn((()=>Hn(s,h,t)),i)}256&e.shapeFlag&&t.a&&Bn(t.a,i),t.isMounted=!0,e=n=r=null}}),Vn)},H=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=Jt(i),[u]=t.propsOptions;let c=!1;if(!(r||s>0)||16&s){let r;Sn(t,e,i,o)&&(c=!0);for(const o in a)e&&(_(e,o)||(r=U(o))!==o&&_(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=Cn(u,a,o,void 0,t,!0)):delete i[o]);if(o!==a)for(const t in o)e&&_(e,t)||(delete o[t],c=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const l=e[s];if(u)if(_(o,s))l!==o[s]&&(o[s]=l,c=!0);else{const e=L(s);i[e]=Cn(u,a,e,l,t,!1)}else l!==o[s]&&(o[s]=l,c=!0)}}c&&ot(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=l;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(y(i,e),n||1!==t||delete i._):(o=!e.$stable,Mn(e,i)),s=e}else e&&(Ln(t,e),s={default:1});if(o)for(const a in i)xn(a)||a in s||delete i[a]})(t,e.children,n),nt(),Se(void 0,t.update),rt()},z=(t,e,n,r,i,o,s,a,u=!1)=>{const c=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:d}=e;if(f>0){if(128&f)return void Q(c,h,n,r,i,o,s,a,u);if(256&f)return void G(c,h,n,r,i,o,s,a,u)}8&d?(16&l&&it(c,i,o),h!==c&&p(n,h)):16&l?16&d?Q(c,h,n,r,i,o,s,a,u):it(c,i,o,!0):(8&l&&p(n,""),16&d&&R(h,n,r,i,o,s,a,u))},G=(t,e,n,r,i,o,s,a,u)=>{e=e||h;const c=(t=t||h).length,l=e.length,f=Math.min(c,l);let p;for(p=0;p<f;p++){const r=e[p]=u?pr(e[p]):fr(e[p]);w(t[p],r,n,null,i,o,s,a,u)}c>l?it(t,i,o,!0,!1,f):R(e,n,r,i,o,s,a,u,f)},Q=(t,e,n,r,i,o,s,a,u)=>{let c=0;const l=e.length;let f=t.length-1,p=l-1;for(;c<=f&&c<=p;){const r=t[c],l=e[c]=u?pr(e[c]):fr(e[c]);if(!or(r,l))break;w(r,l,n,null,i,o,s,a,u),c++}for(;c<=f&&c<=p;){const r=t[f],c=e[p]=u?pr(e[p]):fr(e[p]);if(!or(r,c))break;w(r,c,n,null,i,o,s,a,u),f--,p--}if(c>f){if(c<=p){const t=p+1,h=t<l?e[t].el:r;for(;c<=p;)w(null,e[c]=u?pr(e[c]):fr(e[c]),n,h,i,o,s,a,u),c++}}else if(c>p)for(;c<=f;)J(t[c],i,o,!0),c++;else{const d=c,v=c,g=new Map;for(c=v;c<=p;c++){const t=e[c]=u?pr(e[c]):fr(e[c]);null!=t.key&&g.set(t.key,c)}let y,m=0;const b=p-v+1;let _=!1,I=0;const T=new Array(b);for(c=0;c<b;c++)T[c]=0;for(c=d;c<=f;c++){const r=t[c];if(m>=b){J(r,i,o,!0);continue}let l;if(null!=r.key)l=g.get(r.key);else for(y=v;y<=p;y++)if(0===T[y-v]&&or(r,e[y])){l=y;break}void 0===l?J(r,i,o,!0):(T[l-v]=c+1,l>=I?I=l:_=!0,w(r,e[l],n,null,i,o,s,a,u),m++)}const E=_?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=(o+s)/2|0,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(T):h;for(y=E.length-1,c=b-1;c>=0;c--){const t=v+c,h=e[t],f=t+1<l?e[t+1].el:r;0===T[c]?w(null,h,n,f,i,o,s,a,u):_&&(y<0||c!==E[y]?Y(h,n,f,2):y--)}}},Y=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void Y(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,ut);if(a===Qn){n(s,e,r);for(let t=0;t<c.length;t++)Y(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===Xn)return void S(t,e,r);if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(s),n(s,e,r),Bn((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},J=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&Kn(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f;let d;if((d=s&&s.onVnodeBeforeUnmount)&&Hn(d,e,t),6&l)et(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Fn(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,ut,r):c&&(o!==Qn||h>0&&64&h)?it(c,e,n,!1,!0):(o===Qn&&(128&h||256&h)||!i&&16&l)&&it(u,e,n),r&&Z(t)}((d=s&&s.onVnodeUnmounted)||p)&&Bn((()=>{d&&Hn(d,e,t),p&&Fn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===Qn)return void tt(n,i);if(e===Xn)return void C(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},tt=(t,e)=>{let n;for(;t!==e;)n=v(t),r(t),t=n;r(e)},et=(t,e,n)=>{const{bum:r,effects:i,update:o,subTree:s,um:a}=t;if(r&&B(r),i)for(let u=0;u<i.length;u++)X(i[u]);o&&(X(o),J(s,t,e,n)),a&&Bn(a,e),Bn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},it=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)J(t[s],e,n,r,i)},st=t=>6&t.shapeFlag?st(t.component.subTree):128&t.shapeFlag?t.suspense.next():v(t.anchor||t.el),at=(t,e,n)=>{null==t?e._vnode&&J(e._vnode,null,null,!0):w(e._vnode||null,t,e,null,null,null,n),Ce(),e._vnode=t},ut={p:w,um:J,m:Y,r:Z,mt:q,mc:R,pc:z,pbc:O,n:st,o:t};let ct,lt;e&&([ct,lt]=e(ut));return{render:at,hydrate:ct,createApp:qn(at,ct)}}(t)}function Hn(t,e,n,r=null){se(t,e,7,[n,r])}function zn(t,e,n=!1){const r=t.children,i=e.children;if(w(r)&&w(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=pr(i[o]),e.el=t.el),n||zn(t,e))}}const Gn=Symbol(),Qn=Symbol(void 0),Yn=Symbol(void 0),$n=Symbol(void 0),Xn=Symbol(void 0),Jn=[];let Zn=null;function tr(t=!1){Jn.push(Zn=t?null:[])}let er=1;function nr(t){er+=t}function rr(t,e,n,r,i){const o=cr(t,e,n,r,i,!0);return o.dynamicChildren=er>0?Zn||h:null,Jn.pop(),Zn=Jn[Jn.length-1]||null,er>0&&Zn&&Zn.push(o),o}function ir(t){return!!t&&!0===t.__v_isVNode}function or(t,e){return t.type===e.type&&t.key===e.key}const sr="__vInternal",ar=({key:t})=>null!=t?t:null,ur=({ref:t})=>null!=t?S(t)||te(t)||E(t)?{i:xe,r:t}:t:null,cr=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==Gn||(t=$n);if(ir(t)){const r=lr(t,e,!0);return n&&dr(r,n),r}u=t,E(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){(Xt(e)||sr in e)&&(e=y({},e));let{class:t,style:n}=e;t&&!S(t)&&(e.class=a(t)),k(n)&&(Xt(n)&&!w(n)&&(n=y({},n)),e.style=r(n))}const c=S(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:k(t)?4:E(t)?2:0,l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ar(e),ref:e&&ur(e),scopeId:De,slotScopeIds:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,shapeFlag:c,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};dr(l,n),128&c&&t.normalize(l);er>0&&!s&&Zn&&(i>0||6&c)&&32!==i&&Zn.push(l);return l};function lr(t,e,n=!1){const{props:i,ref:o,patchFlag:s,children:u}=t,c=e?function(...t){const e=y({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=a([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(v(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ar(c),ref:e&&e.ref?n&&o?w(o)?o.concat(ur(e)):[o,ur(e)]:ur(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Qn?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&lr(t.ssContent),ssFallback:t.ssFallback&&lr(t.ssFallback),el:t.el,anchor:t.anchor}}function hr(t=" ",e=0){return cr(Yn,null,t,e)}function fr(t){return null==t||"boolean"==typeof t?cr($n):w(t)?cr(Qn,null,t.slice()):"object"==typeof t?pr(t):cr(Yn,null,String(t))}function pr(t){return null===t.el?t:lr(t)}function dr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(w(e))n=16;else if("object"==typeof e){if(1&r||64&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),dr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||sr in e?3===r&&xe&&(1===xe.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=xe}}else E(e)?(e={default:e,_ctx:xe},n=32):(e=String(e),64&r?(n=16,e=[hr(e)]):n=8);t.children=e,t.shapeFlag|=n}const vr=t=>t?Tr(t)?kr(t)||t.proxy:vr(t.parent):null,gr=y(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>vr(t.parent),$root:t=>vr(t.root),$emit:t=>t.emit,$options:t=>yn(t),$forceUpdate:t=>()=>Ie(t.update),$nextTick:t=>we.bind(t.proxy),$watch:t=>He.bind(t)}),yr={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;let c;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==l&&_(r,e))return s[e]=0,r[e];if(i!==l&&_(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&_(c,e))return s[e]=2,o[e];if(n!==l&&_(n,e))return s[e]=3,n[e];pn&&(s[e]=4)}}const h=gr[e];let f,p;return h?("$attrs"===e&&it(t,0,e),h(t)):(f=a.__cssModules)&&(f=f[e])?f:n!==l&&_(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,_(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==l&&_(i,e))i[e]=n;else if(r!==l&&_(r,e))r[e]=n;else if(_(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==l&&_(t,s)||e!==l&&_(e,s)||(a=o[0])&&_(a,s)||_(r,s)||_(gr,s)||_(i.config.globalProperties,s)}},mr=y({},yr,{get(t,e){if(e!==Symbol.unscopables)return yr.get(t,e,t)},has:(t,n)=>"_"!==n[0]&&!e(n)}),br=Un();let _r=0;let wr=null;const Ir=t=>{wr=t};function Tr(t){return 4&t.vnode.shapeFlag}let Er=!1;function Sr(t,e,n){E(e)?t.render=e:k(e)&&(t.setupState=re(e)),Cr(t)}function Cr(t,e,n){const r=t.type;t.render||(t.render=r.render||f,t.render._rc&&(t.withProxy=new Proxy(t.ctx,mr))),wr=t,nt(),dn(t),rt(),wr=null}function kr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(re(Zt(t.exposed)),{get:(e,n)=>n in e?e[n]:n in gr?gr[n](t):void 0}))}function Nr(t,e=wr){e&&(e.effects||(e.effects=[])).push(t)}function Ar(t){const e=function(t){let e,n;return E(t)?(e=t,n=f):(e=t.get,n=t.set),new ie(e,n,E(t)||!t.set)}(t);return Nr(e.effect),e}const Pr="3.1.5",Rr="undefined"!=typeof document?document:null,xr=new Map,Dr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Rr.createElementNS("http://www.w3.org/2000/svg",t):Rr.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>Rr.createTextNode(t),createComment:t=>Rr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Rr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const i=n?n.previousSibling:e.lastChild;let o=xr.get(t);if(!o){const e=Rr.createElement("template");if(e.innerHTML=r?`<svg>${t}</svg>`:t,o=e.content,r){const t=o.firstChild;for(;t.firstChild;)o.appendChild(t.firstChild);o.removeChild(t)}xr.set(t,o)}return e.insertBefore(o.cloneNode(!0),n),[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};const Or=/\s*!important$/;function Mr(t,e,n){if(w(n))n.forEach((n=>Mr(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Fr[e];if(n)return n;let r=L(e);if("filter"!==r&&r in t)return Fr[e]=r;r=j(r);for(let i=0;i<Lr.length;i++){const n=Lr[i]+r;if(n in t)return Fr[e]=n}return e}(t,e);Or.test(n)?t.setProperty(U(r),n.replace(Or,""),"important"):t[r]=n}}const Lr=["Webkit","Moz","ms"],Fr={};const Ur="http://www.w3.org/1999/xlink";let jr=Date.now,qr=!1;if("undefined"!=typeof window){jr()>document.createEvent("Event").timeStamp&&(jr=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);qr=!!(t&&Number(t[1])<=53)}let Vr=0;const Br=Promise.resolve(),Kr=()=>{Vr=0};function Wr(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(Hr.test(t)){let n;for(e={};n=t.match(Hr);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[U(t.slice(2)),e]}(e);if(r){!function(t,e,n,r){t.addEventListener(e,n,r)}(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||jr();(qr||r>=n.attached-1)&&se(function(t,e){if(w(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>Vr||(Br.then(Kr),Vr=jr()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const Hr=/(?:Once|Passive|Capture)$/;const zr=/^on[a-z]/;const Gr=["ctrl","shift","alt","meta"],Qr={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>Gr.some((n=>t[`${n}Key`]&&!e.includes(n)))},Yr=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=Qr[e[t]];if(r&&r(n,e))return}return t(n,...r)},$r=y({patchProp:(t,e,r,i,o=!1,s,a,u,c)=>{switch(e){case"class":!function(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}(t,i,o);break;case"style":!function(t,e,n){const r=t.style;if(n)if(S(n)){if(e!==n){const e=r.display;r.cssText=n,"_vod"in t&&(r.display=e)}}else{for(const t in n)Mr(r,t,n[t]);if(e&&!S(e))for(const t in e)null==n[t]&&Mr(r,t,"")}else t.removeAttribute("style")}(t,r,i);break;default:v(e)?g(e)||Wr(t,e,0,i,a):function(t,e,n,r){if(r)return"innerHTML"===e||!!(e in t&&zr.test(e)&&E(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(zr.test(e)&&S(n))return!1;return e in t}(t,e,i,o)?function(t,e,n,r,i,o,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,i,o),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName){t._value=n;const r=null==n?"":n;return t.value!==r&&(t.value=r),void(null==n&&t.removeAttribute(e))}if(""===n||null==n){const r=typeof t[e];if(""===n&&"boolean"===r)return void(t[e]=!0);if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r){try{t[e]=0}catch(a){}return void t.removeAttribute(e)}}try{t[e]=n}catch(jC){}}(t,e,i,s,a,u,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),function(t,e,r,i,o){if(i&&e.startsWith("xlink:"))null==r?t.removeAttributeNS(Ur,e.slice(6,e.length)):t.setAttributeNS(Ur,e,r);else{const i=n(e);null==r||i&&!1===r?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}(t,e,i,o))}},forcePatchProp:(t,e)=>"value"===e},Dr);let Xr;const Jr=(...t)=>{const e=(Xr||(Xr=Wn($r))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(S(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;E(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var Zr=function(t,e){return(Zr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ti(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Zr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ei=function(){return(ei=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ni(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(jC){o(jC)}}function a(t){try{u(r.throw(t))}catch(jC){o(jC)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function ri(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(jC){o=[6,jC],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ii(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oi(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function si(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ai=!1,ui="${JSCORE_VERSION}",ci=function(t,e){if(!t)throw li(e)},li=function(t){return new Error("Firebase Database ("+ui+") INTERNAL ASSERT FAILED: "+t)},hi=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},fi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hi(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},pi=function(t){try{return fi.decodeString(t,!0)}catch(jC){console.error("base64Decode failed: ",jC)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function di(t){return vi(void 0,t)}function vi(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=vi(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gi=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=ei({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fi.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),fi.encodeString(JSON.stringify(o),!1),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bi(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mi())}function _i(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(jC){return!1}}function wi(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Ii(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ti(){return!0===ai}function Ei(){return"indexedDB"in self&&null!=indexedDB}function Si(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function Ci(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ki=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Ni.prototype.create),o}return ti(e,t),e}(Error),Ni=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Ai(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new ki(i,a,r);return u},t}();function Ai(t,e){return t.replace(Pi,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Pi=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){return JSON.parse(t)}function xi(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Di=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Ri(pi(o[0])||""),n=Ri(pi(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(jC){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Oi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mi(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Li(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fi(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ui=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782);i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function ji(t,e){var n=new qi(t,e);return n.subscribe.bind(n)}var qi=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Vi),void 0===r.error&&(r.error=Vi),void 0===r.complete&&(r.complete=Vi);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(jC){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(jC){"undefined"!=typeof console&&console.error&&console.error(jC)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Vi(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Ki(t,e){return t+" failed: "+e+" argument "}function Wi(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Ki(t,e)+"must be a valid function.")}function Hi(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Ki(t,e)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zi=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Gi(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){return t&&t._delegate?t._delegate:t}var Yi=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),$i=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new gi;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(jC){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(jC){if(r)return null;throw jC}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(jC){}try{for(var r=ii(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=oi(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(jC){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return ni(this,void 0,void 0,(function(){var t;return ri(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(si(si([],oi(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),oi(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=ii(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=oi(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=ii(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xi,Ji=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new $i(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Zi(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var to,eo,no=[];(eo=to||(to={}))[eo.DEBUG=0]="DEBUG",eo[eo.VERBOSE=1]="VERBOSE",eo[eo.INFO=2]="INFO",eo[eo.WARN=3]="WARN",eo[eo.ERROR=4]="ERROR",eo[eo.SILENT=5]="SILENT";var ro,io={debug:to.DEBUG,verbose:to.VERBOSE,info:to.INFO,warn:to.WARN,error:to.ERROR,silent:to.SILENT},oo=to.INFO,so=((Xi={})[to.DEBUG]="log",Xi[to.VERBOSE]="log",Xi[to.INFO]="info",Xi[to.WARN]="warn",Xi[to.ERROR]="error",Xi),ao=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=so[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Zi(["["+i+"]  "+t.name+":"],n))}},uo=function(){function t(t){this.name=t,this._logLevel=oo,this._logHandler=ao,this._userLogHandler=null,no.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in to))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?io[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,to.DEBUG],t)),this._logHandler.apply(this,Zi([this,to.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,to.VERBOSE],t)),this._logHandler.apply(this,Zi([this,to.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,to.INFO],t)),this._logHandler.apply(this,Zi([this,to.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,to.WARN],t)),this._logHandler.apply(this,Zi([this,to.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,to.ERROR],t)),this._logHandler.apply(this,Zi([this,to.ERROR],t))},t}();function co(t){no.forEach((function(e){e.setLogLevel(t)}))}var lo,ho=((ro={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ro["bad-app-name"]="Illegal App name: '{$appName}",ro["duplicate-app"]="Firebase App named '{$appName}' already exists",ro["app-deleted"]="Firebase App named '{$appName}' already deleted",ro["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ro["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ro),fo=new Ni("app","Firebase",ho),po=((lo={})["@firebase/app"]="fire-core",lo["@firebase/analytics"]="fire-analytics",lo["@firebase/app-check"]="fire-app-check",lo["@firebase/auth"]="fire-auth",lo["@firebase/database"]="fire-rtdb",lo["@firebase/functions"]="fire-fn",lo["@firebase/installations"]="fire-iid",lo["@firebase/messaging"]="fire-fcm",lo["@firebase/performance"]="fire-perf",lo["@firebase/remote-config"]="fire-rc",lo["@firebase/storage"]="fire-gcs",lo["@firebase/firestore"]="fire-fst",lo["fire-js"]="fire-js",lo["firebase-wrapper"]="fire-js-all",lo),vo=new uo("@firebase/app"),go=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=di(t),this.container=new Ji(e.name),this._addComponent(new Yi("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(jC){vo.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,jC)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw fo.create("app-deleted",{appName:this.name_})},t}();go.prototype.name&&go.prototype.options||go.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function yo(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw fo.create("bad-app-name",{appName:String(s)});if(Oi(e,s))throw fo.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=po[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void vo.warn(u.join(" "))}o(new Yi(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:co,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw fo.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=io[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:to[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=no;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Oi(e,t=t||"[DEFAULT]"))throw fo.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return vo.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw fo.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&vi(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mo=function t(){var e=yo(go);return e.INTERNAL=ei(ei({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){vi(e,t)},createSubscribe:ji,ErrorFactory:Ni,deepExtend:vi}),e}(),bo=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){vo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var _o=self.firebase.SDK_VERSION;_o&&_o.indexOf("LITE")>=0&&vo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var wo=mo.initializeApp;mo.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _i()&&vo.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),wo.apply(void 0,t)};var Io,To,Eo=mo;(Io=Eo).INTERNAL.registerComponent(new Yi("platform-logger",(function(t){return new bo(t)}),"PRIVATE")),Io.registerVersion("@firebase/app","0.6.28",To),Io.registerVersion("fire-js",""),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ra(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==h(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:m).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function w(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=C+t,this.message=e||k[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new T(e.substring(C.length),t.message,t.serverResponse):null}w(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var S,C="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function x(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function D(t,e){throw new x("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function O(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}S=A("__EID__")?"__EID__":void 0,w(R,Error),R.prototype.name="CustomError",w(x,R),x.prototype.name="AssertionError",O.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new O((function(){return new j}),(function(t){t.reset()}));function U(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=q(t,e)}function z(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var $,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var at=s.navigator;if(at){var ut=at.userAgent;if(ut){$=ut;break t}}$=""}function ct(t){return ot($,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ht(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===_t&&e||"",this.b=bt}function yt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.ta=!0,gt.prototype.sa=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var mt,bt={},_t={};function wt(){if(void 0===mt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){s.console&&s.console.error(n.message)}mt=t}else mt=t}return mt}function It(t,e){this.a=e===kt?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n=yt(t);if(!Ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=wt();return new It(t=e?e.createScriptURL(t):t,kt)}(t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?yt(t):encodeURIComponent(String(t))})))}It.prototype.ta=!0,It.prototype.sa=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,Ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={};function Nt(t,e){this.a=e===Mt?t:""}function At(t){return t instanceof Nt&&t.constructor===Nt?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Nt.prototype.ta=!0,Nt.prototype.sa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,xt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Dt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),xt.test(t))t=new Nt(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Pt.test(e[1])?new Nt(t,Mt):null}return t}function Ot(t){return t instanceof Nt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),xt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Mt))}var Mt={},Lt=new Nt("about:invalid#zClosurez",Mt);function Ft(t,e,n){this.a=n===Ut?t:""}Ft.prototype.ta=!0,Ft.prototype.sa=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function jt(t,e,n,r){return t=t instanceof Nt?t:Ot(t),e=e||s,n=n instanceof gt?yt(n):n||"",e.open(At(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}Bt[" "]=l;var Kt,Wt,Ht=ct("Opera"),zt=ct("Trident")||ct("MSIE"),Gt=ct("Edge"),Qt=Gt||zt,Yt=ct("Gecko")&&!(ot($.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),$t=ot($.toLowerCase(),"webkit")&&!ct("Edge");function Xt(){var t=s.document;return t?t.documentMode:void 0}t:{var Jt="",Zt=(Wt=$,Yt?/rv:([^\);]+)(\)|;)/.exec(Wt):Gt?/Edge\/([\d\.]+)/.exec(Wt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):$t?/WebKit\/(\S+)/.exec(Wt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(Zt&&(Jt=Zt?Zt[1]:""),zt){var te=Xt();if(null!=te&&te>parseFloat(Jt)){Kt=String(te);break t}}Kt=Jt}var ee,ne={};function re(t){return function(t,e){var n=ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=X(String(Kt)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=st(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||st(0==s[2].length,0==a[2].length)||st(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&zt){var ie=Xt();ee=ie||(parseInt(Kt,10)||void 0)}else ee=void 0;var oe=ee;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var se=!zt||9<=Number(oe);function ae(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ce,le,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}V(s?Y(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function de(t){s.setTimeout((function(){throw t}),0)}function ve(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(me)}}else le=function(){var t=me;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ct("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ce||(ce=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),ce(t)):s.setImmediate(t)}}(),ge||(le(),ge=!0),ye.add(t,e)}var ge=!1,ye=new L;function me(){for(var t;t=U();){try{t.a.call(t.b)}catch(e){de(e)}M(F,t)}ge=!1}function be(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){De(n,we,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(jC){}De(n,Ie,t)}))}catch(r){De(this,Ie,r)}}var _e=0,we=2,Ie=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new O((function(){return new Te}),(function(t){t.reset()}));function Se(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof be)return t;var e=new be(l);return De(e,we,t),e}function ke(t){return new be((function(e,n){n(t)}))}function Ne(t,e,n){Oe(t,e,n,null)||ve(_(e,t))}function Ae(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ne(t[o],_(i,o,!0),_(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==_e&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),Fe(n,i,Ie,e)))}t.c=null}else De(t,Ie,e)}function Re(t,e){t.b||t.a!=we&&t.a!=Ie||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function xe(t,e,n,r){var i=Se(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,Re(t,i),i.a}function De(t,e,n){t.a==_e&&(t===n&&(e=Ie,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Oe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Ie||n instanceof qe||function(t,e){t.g=!0,ve((function(){t.g&&je.call(null,e)}))}(t,n)))}function Oe(t,e,n,r){if(t instanceof be)return Re(t,Se(e||l,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Me(t){t.h||(t.h=!0,ve(t.gc,t))}function Le(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ie&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(jC){je.call(null,jC)}M(Ee,e)}function Ue(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return xe(this,p(t)?t:null,p(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Se(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return xe(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new qe(t);ve((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=_e,De(this,we,t)},t.ad=function(t){this.a=_e,De(this,Ie,t)},t.gc=function(){for(var t;t=Le(this);)Fe(this,t,this.a,this.i);this.h=!1};var je=de;function qe(t){R.call(this,t)}function Ve(){this.ya=this.ya,this.pa=this.pa}w(qe,R),qe.prototype.name="cancel";var Be={};function Ke(t){if(!t.ya&&(t.ya=!0,t.Da(),0)){var e=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)}(t);delete Be[e]}}Ve.prototype.ya=!1,Ve.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},He=!zt||9<=Number(oe),ze=zt&&!re("9"),Ge=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{Bt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:$e[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Ye,Qe);var $e=We({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ye.prototype.g=function(){return this.a};var Xe="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Je,this.wa=this.Qa=!1}function tn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function en(t){this.src=t,this.a={},this.b=0}function nn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(tn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function rn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}en.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=rn(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new Ze(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var on="closure_lm_"+(1e6*Math.random()|0),sn={};function an(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);else n=mn(n),t&&t[Xe]?_n(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!1,r,i)}function un(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=gn(t);if(a||(t[on]=a=new en(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ge||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=mn(n),t&&t[Xe]?wn(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=mn(n),t&&t[Xe]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=rn(o=t.a[e],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=rn(e,n,r,i)),(n=-1<t?e[t]:null)&&hn(n))}function hn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Xe])nn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(nn(n,t),0==n.b&&(n.src=null,e[on]=null)):tn(t)}}}function fn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=dn(o,r),i=i&&!1!==o)}return i}function dn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&hn(t),n.call(r,e)}function vn(t,e){if(t.wa)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return dn(t,new Ye(e,this))}function gn(t){return(t=t[on])instanceof en?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(t){return p(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function bn(){Ve.call(this),this.v=new en(this),this.bc=this,this.hb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function wn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&nn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function En(t){var e=null;return new be((function(n,r){-1==(e=Tn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Sn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Nn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];An(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)An(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function An(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(bn,Ve),bn.prototype[Xe]=!0,bn.prototype.addEventListener=function(t,e,n,r){an(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;dt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=In(s,r,!0,t)&&i}if(i=In(s=t.b=n,r,!0,t)&&i,i=In(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tn(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=kn.prototype).X=function(){Nn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Nn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return An(this.b,t)?this.b[t]:e},t.set=function(t,e){An(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,xn(this,t.c),this.l=t.l,this.a=t.a,Dn(this,t.g),this.f=t.f,On(this,Zn(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,xn(this,n[1]||"",!0),this.l=jn(n[2]||""),this.a=jn(n[3]||"",!0),Dn(this,n[4]),this.f=jn(n[5]||"",!0),On(this,n[6]||"",!0),this.h=jn(n[7]||"")):(this.i=!!e,this.b=new Gn(null,this.i))}function xn(t,e,n){t.c=n?jn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function On(t,e,n){e instanceof Gn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($n(this,e),Jn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Hn)),t.b=new Gn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Ln(t,e){return t.b.get(e)}function Fn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Un(t,e,n,r){var i=new Rn(null,void 0);return t&&xn(i,t),e&&(i.a=e),n&&Dn(i,n),r&&(i.f=r),i}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Vn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Vn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Wn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,zn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?xn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Dn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?On(e,Zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,Kn=/[#\?:]/g,Wn=/[#\?]/g,Hn=/[#\?@]/g,zn=/#/g;function Gn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=Cn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Gn(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function $n(t,e){Qn(t),e=tr(t,e),An(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,An((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Nn(t)))}function Xn(t,e){return Qn(t),e=tr(t,e),An(t.a.b,e)}function Jn(t,e,n){$n(t,e),0<n.length&&(t.c=null,t.a.set(tr(t,e),Y(n)),t.b+=n.length)}function Zn(t){var e=new Gn;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function er(t){var e=[];return rr(new nr,t,e),e.join("")}function nr(){}function rr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),rr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),rr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Gn.prototype).add=function(t,e){Qn(this),this.c=null,t=tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){V(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Qn(this);var e=[];if("string"==typeof t)Xn(this,t)&&(e=Q(e,this.a.get(tr(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Xn(this,t=tr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function ar(){var t=kr();return zt&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function ur(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||s.window;var n="about:blank";t&&(n=At(Dt(t)||Lt)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function hr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function fr(t){t=t||s.window;try{t.close()}catch(e){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),Er(kr())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Dt(void 0!==n.href?n.href:String(n))||Lt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Ot(e),s.href=At(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=jt("",r,n,s),t=At(e),s&&(Qt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">',t=new Ft(t=(r=wt())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(s=jt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function gr(){var t=null;return new be((function(e){"complete"==s.document.readyState?e():(t=function(){e()},cn(window,"load",t))})).o((function(e){throw ln(window,"load",t),e}))}function yr(t){return t=t||kr(),!("file:"!==xr()&&"ionic:"!==xr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function mr(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function br(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function _r(){return Eo.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Eo.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function wr(){var t=_r();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Tr="Chrome";function Er(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?Ir:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Sr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Cr(t,e){e=e||[];var n,r=[],i={};for(n in Sr)i[Sr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=Er(i=kr()):"Worker"===r&&(r=Er(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return s.navigator&&s.navigator.userAgent||""}function Nr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ar(){try{var t=s.localStorage,e=Fr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ar()||!!s.indexedDB}catch(n){return br()&&!!s.indexedDB}return!1}function Pr(){return(Rr()||"chrome-extension:"===xr()||yr())&&!wr()&&Ar()&&!br()}function Rr(){return"http:"===xr()||"https:"===xr()}function xr(){return s.location&&s.location.protocol||null}function Dr(t){return!hr(t=t||kr())&&Er(t)!=Ir}function Or(t){return void 0===t?null:er(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Lr(t){if(null!==t)return JSON.parse(t)}function Fr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Er(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function jr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=_r(),this.b=hr(t)||"ReactNative"===e}function Vr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Kr(){return!(!Nr("fireauth.oauthhelper",s)&&!Nr("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==xr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Hr={};function zr(t){Hr[t]||(Hr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Gr={};Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Gr.abcd}catch(Wt){Wr=!1}function Qr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function $r(t){var e={};return Yr(e,t),e}function Xr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Xr(t[n]));return e}function Jr(t){var e=t&&(t[ri]?"phone":null);if(!(e&&t&&t[ni]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ni]),Qr(this,"displayName",t[ti]||null);var n=null;t[ei]&&(n=new Date(t[ei]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function Zr(t){try{var e=new ii(t)}catch(n){e=null}return e}Jr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ti="displayName",ei="enrolledAt",ni="mfaEnrollmentId",ri="phoneInfo";function ii(t){Jr.call(this,t),Qr(this,"phoneNumber",t[ri])}function oi(t){var e={},n=t[ci],r=t[hi],i=t[fi];if(t=Zr(t[li]),!i||i!=ai&&i!=ui&&!n||i==ui&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ui?(e[di]=n||null,e[gi]=n||null,e[pi]=r):(e[di]=r||null,e[gi]=r||null,e[pi]=n||null),e[vi]=t||null,Qr(this,mi,i),Qr(this,yi,Xr(e))}w(ii,Jr),ii.prototype.w=function(){var t=ii.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ai="EMAIL_SIGNIN",ui="VERIFY_AND_CHANGE_EMAIL",ci="email",li="mfaInfo",hi="newEmail",fi="requestType",pi="email",di="fromEmail",vi="multiFactorInfo",gi="previousEmail",yi="data",mi="operation";function bi(t){var e=Ln(t=Fn(t),_i)||null,n=Ln(t,wi)||null,r=Ln(t,Ei)||null;if(r=r&&Ci[r]||null,!e||!n||!r)throw new T("argument-error",_i+", "+wi+"and "+Ei+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Ln(t,Ii)||null,languageCode:Ln(t,Ti)||null,tenantId:Ln(t,Si)||null})}var _i="apiKey",wi="oobCode",Ii="continueUrl",Ti="languageCode",Ei="mode",Si="tenantId",Ci={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ai,verifyAndChangeEmail:ui,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new bi(t)}catch(e){return null}}function Ni(t){var e=t[Di];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ai];if(n&&"object"==typeof n){e=n[Li];var r=n[Oi];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Oi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Li+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Ai+" property must be a non null object when specified.");if(this.f=null,(e=t[xi])&&"object"==typeof e){if("string"==typeof(e=e[Fi])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",xi+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new T("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var Ai="android",Pi="dynamicLinkDomain",Ri="handleCodeInApp",xi="iOS",Di="url",Oi="installApp",Mi="minimumVersion",Li="packageName",Fi="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ji=null;function qi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=ji[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!ji){ji={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ji[o]&&(ji[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function Vi(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Bi(t){try{return new Vi(t)}catch(e){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=qi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Vi.prototype.T=function(){return this.f},Vi.prototype.l=function(){return this.c},Vi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],zi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Hi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Hi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Hi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Wi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Gi(t){for(var e in zi)if(zi[e].fa==t)return zi[e];return null}function Qi(t){var e={};e["facebook.com"]=Zi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[$i];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[Yi])return new Xi(t)}catch(r){}return null}var Yi="idToken",$i="providerId";function Xi(t){var e=t[$i];if(!e&&t[Yi]){var n=Bi(t[Yi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Ji(t){Xi.call(this,t),Qr(this,"profile",Xr((t=Lr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function ro(t){var e=Fn(t),n=Ln(e,"link"),r=Ln(Fn(n),"link");return e=Ln(e,"deep_link_id"),Ln(Fn(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:so}w(Ji,Xi),w(Zi,Ji),w(to,Ji),w(eo,Ji),w(no,Ji);var oo="enroll",so="signin";function ao(){}function uo(t,e){return t.then((function(t){if(t[Js]){var n=Bi(t[Js]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==C+"user-not-found"?new T("user-mismatch"):t}))}function co(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ho(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(e){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function go(t,e){this.Qc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Gi(t)||{}).Ja||null,this.pb=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function mo(t){go.call(this,t,Hi),this.a=[]}function bo(){mo.call(this,"facebook.com")}function _o(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function wo(){mo.call(this,"github.com")}function Io(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function To(){mo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function Co(){go.call(this,"twitter.com",Wi)}function ko(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Po(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function Ro(t,e){if(!(e=xo(e)))throw new T("argument-error","Invalid email link!");return new No(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=ki(t=ro(t)))&&t.operation===ai?t:null}function Do(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new T("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Oo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Do(e)}return null}function Mo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Lo(t){try{this.a=t||Eo.auth()}catch(e){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Do({fb:t,eb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Do({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return _o(n);case"github.com":return Io(n);case"twitter.com":return ko(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new co(e,s):new fo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new mo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function jo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function qo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return this.a?Ce(this.a):Ce(this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ka=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.w=function(){},co.prototype.ka=function(t){return _a(t,lo(this))},co.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,wa(t,n)},co.prototype.c=function(t,e){return uo(Ia(t,lo(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(t){return _a(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,wa(t,n)},fo.prototype.c=function(t,e){return uo(Ia(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Jb=ft(t),this},w(yo,go),w(mo,go),mo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},mo.prototype.Rb=function(){return Y(this.a)},mo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},w(bo,mo),Qr(bo,"PROVIDER_ID","facebook.com"),Qr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(wo,mo),Qr(wo,"PROVIDER_ID","github.com"),Qr(wo,"GITHUB_SIGN_IN_METHOD","github.com"),w(To,mo),Qr(To,"PROVIDER_ID","google.com"),Qr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),w(Co,go),Qr(Co,"PROVIDER_ID","twitter.com"),Qr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Pa,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ra,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Wa,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return uo(this.ka(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Po,{PROVIDER_ID:"password"}),Yr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.ka=function(t){return t.gb(Mo(this))},Do.prototype.b=function(t,e){var n=Mo(this);return n.idToken=e,ru(t,tu,n)},Do.prototype.c=function(t,e){var n=Mo(this);return n.operation="REAUTH",uo(t=ru(t,eu,n),e)},Do.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Lo.prototype.gb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==oo?i.Ha().then((function(t){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return ru(t,Ga,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yr(Lo,{PROVIDER_ID:"phone"}),Yr(Lo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},qo.prototype.T=function(){return this.h},qo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,Wo=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function zo(t,e,n){T.call(this,t,n),(t=e||{}).Kb&&Qr(this,"email",t.Kb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.$b&&Qr(this,"tenantId",t.$b)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:Uo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new zo(e,n,t.message)}return null}function Qo(){}function Yo(t){return t.c||(t.c=t.b())}function $o(){}function Xo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(jC){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}w(Ho,T),w(zo,T),zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},zo.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,w($o,Qo),$o.prototype.a=function(){var t=Xo(this);return t?new ActiveXObject(t):new XMLHttpRequest},$o.prototype.b=function(){var t={};return Xo(this)&&(t[0]=!0,t[1]=!0),t},Ko=new $o,w(Jo,Qo),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(D("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(p(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},ls=null;function hs(t){var e;if(ls||(ls=new ns(""),cs[""]=ls,ls.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=hs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function fs(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=hs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(ps,Qo),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),w(ds,bn);var vs=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ys(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ms(t)}function ms(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function bs(t){bn.call(this),this.headers=new kn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=_s,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ms(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ys(this)),this.readyState=vs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ms(this)),this.a&&(this.readyState=3,ms(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ys(this):ms(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ys(this))},t.sc=function(t){this.a&&(this.response=t,ys(this))},t.Va=function(t){var e=this.i;e&&e.log(os,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ys(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(bs,bn);var _s="";bs.prototype.b=hs("goog.net.XhrIo");var ws=/^https?$/i,Is=["POST","PUT"];function Ts(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ko.a(),t.C=t.D?Yo(t.D):Yo(Ko),t.a.onreadystatechange=b(t.Wb,t);try{fs(t.b,xs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return fs(t.b,xs(t,"Error opening Xhr: "+a.message)),void Ss(t,a)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)V(t,e,void 0);else for(var n=Cn(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Es,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!H(Is,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{As(t),0<t.g&&(t.u=function(t){return zt&&re(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fs(t.b,xs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=Tn(t.Ma,t.g,t)),fs(t.b,xs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){fs(t.b,xs(t,"Send error: "+a.message)),Ss(t,a)}}function Es(t){return"content-type"==t.toLowerCase()}function Ss(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Cs(t),Ns(t)}function Cs(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ks(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ps(t)&&2==Rs(t))fs(t.b,xs(t,"Local request error detected and ignored"));else if(t.i&&4==Ps(t))Tn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ps(t)){fs(t.b,xs(t,"Request complete")),t.c=!1;try{var e,n=Rs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Pn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!ws.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ps(t)?t.a.statusText:""}catch(l){fs(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Rs(t)+"]",Cs(t)}}finally{Ns(t)}}}function Ns(t,e){if(t.a){As(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(jC){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+jC.message,void 0)}}}function As(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ps(t){return t.a?t.a.readyState:0}function Rs(t){try{return 2<Ps(t)?t.a.status:-1}catch(e){return-1}}function xs(t,e){return e+" ["+t.P+" "+t.l+" "+Rs(t)+"]"}function Ds(t){var e=Ws;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Os(t,e,n){t.a=!0,t.c=n,t.f=!e,Us(t)}function Ms(t){if(t.a){if(!t.v)throw new js(t);t.v=!1}}function Ls(t,e,n,r){t.g.push([e,n,r]),t.a&&Us(t)}function Fs(t){return W(t.g,(function(t){return p(t[1])}))}function Us(t){if(t.h&&t.a&&Fs(t)){var e=t.h,n=Bs[e];n&&(s.clearTimeout(n.a),delete Bs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Fs(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Ds?(Ls(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Vs(e),Bs[e.a]=e,t.h=e.a)}function js(){R.call(this)}function qs(){R.call(this)}function Vs(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=bs.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fs(this.b,xs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fs(this.b,xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ns(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ns(this,!0)),bs.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ks(this):this.Jc())},t.Jc=function(){ks(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _s:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return fs(this.b,"Can not get response: "+e.message),null}},Ds.prototype.cancel=function(t){if(this.a)this.c instanceof Ds&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new qs(this),Ms(this),Os(this,!1,t))}},Ds.prototype.m=function(t,e){this.i=!1,Os(this,t,e)},Ds.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return Ls(this,r,(function(t){t instanceof qs?o.cancel():i(t)})),o.then(t,e,n)},Ds.prototype.$goog_Thenable=!0,w(js,R),js.prototype.message="Deferred has already fired",js.prototype.name="AlreadyCalledError",w(qs,R),qs.prototype.message="Deferred was canceled",qs.prototype.name="CanceledError",Vs.prototype.c=function(){throw delete Bs[this.a],this.b};var Bs={};function Ks(t){var e,n=document,r=Tt(t).toString(),i=pe(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Ds(o);return e=window.setTimeout((function(){Hs(i,!0);var t=new Qs(Gs,"Timeout reached for loading script "+r);Ms(a),Os(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,!1,e),Ms(a),Os(a,!0,null))},i.onerror=function(){Hs(i,!0,e);var t=new Qs(zs,"Error while loading script "+r);Ms(a),Os(a,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ws(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var zs=0,Gs=1;function Qs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Ys(t){this.f=t}function $s(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Zs,this.g=ft(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ea,this.a=ft(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=s.XMLHttpRequest||n&&Eo.INTERNAL.node&&Eo.INTERNAL.node.XMLHttpRequest)&&!br())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,br()?this.f=new ps(self):wr()?this.f=new Ys(n):this.f=new Jo,this.b=null}w(Qs,R),w(Ys,Qo),Ys.prototype.a=function(){return new this.f},Ys.prototype.b=function(){return{}};var Xs,Js="idToken",Zs=new qr(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new qr(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=Fn(t),e=Fn(e.url),t.f=t.a+t.f,xn(t,e.c),t.a=e.a,Dn(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,a){(function(){var t=kr();return!((t=Er(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||zt&&oe&&!(9<oe))})()||br()?t=b(t.u,t):(Xs||(Xs=new be((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ls(t,null,e,void 0)}(Ks(Et(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,a)}$s.prototype.T=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(br()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new bs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}_n(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),wn(a,"ready",(function(){u&&clearTimeout(u),Ke(this)})),wn(a,"timeout",(function(){u&&clearTimeout(u),Ke(this),e&&e(null)})),Ts(a,t,n,r,i)};var ua=new gt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function la(t,e,n,r,i,o,s){var a=Fn(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new be((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:er(Mr(i)),t.a,t.v.get())}))}function ha(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new T("invalid-email")}function fa(t){"email"in t&&ha(t)}function pa(t){if(!t[Js]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,ft(t));throw new T("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}$s.prototype.s=function(t,e,n,r,i){var o=this;Xs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},$s.prototype.Ab=function(){return ru(this,Ha,{})},$s.prototype.Cb=function(t,e){return ru(this,Ka,{idToken:t,email:e})},$s.prototype.Db=function(t,e){return ru(this,Wa,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ya(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ma(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Xn(t=new Gn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function _a(t,e){return e.returnIdpCredential=!0,ru(t,Qa,e)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,$a,e)}function Ia(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ya,e)}function Ta(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=$s.prototype).Eb=function(t,e){var n={idToken:t},r=[];return lt(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ka,n)},t.wb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Ua,t)},t.xb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ma,t)},t.vb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,La,t)},t.Fb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fa,t)},t.gb=function(t){return ru(this,Za,t)},t.ob=function(t,e){return ru(this,Va,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,Sa,{oobCode:t})},t.kb=function(t){return ru(this,Ea,{oobCode:t})};var Ea={endpoint:"setAccountInfo",A:Ta,Z:"email",B:!0},Sa={endpoint:"resetPassword",A:Ta,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},Ca={endpoint:"signupNewUser",A:function(t){if(ha(t),!t.password)throw new T("weak-password")},G:pa,V:!0,B:!0},ka={endpoint:"createAuthUri",B:!0},Na={endpoint:"deleteAccount",O:["idToken"]},Aa={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Pa={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ha,G:pa,V:!0,B:!0},Ra={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ha,G:pa,V:!0},xa={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},Da={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},Oa={endpoint:"getAccountInfo"},Ma={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");ha(t)},Z:"email",B:!0},La={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Ua={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");ha(t)},Z:"email",B:!0},ja={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},qa={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},Va={endpoint:"resetPassword",A:Ta,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ka={endpoint:"setAccountInfo",O:["idToken"],A:fa,V:!0},Wa={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fa(t),!t.password)throw new T("weak-password")},G:pa,V:!0},Ha={endpoint:"signupNewUser",G:pa,V:!0,B:!0},za={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Ga={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Qa={endpoint:"verifyAssertion",A:ya,Za:ma,G:ba,V:!0,B:!0},Ya={endpoint:"verifyAssertion",A:ya,Za:ma,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},V:!0,B:!0},$a={endpoint:"verifyAssertion",A:function(t){if(ya(t),!t.idToken)throw new T("internal-error")},Za:ma,G:ba,V:!0},Xa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:pa,V:!0,B:!0},Ja={endpoint:"verifyPassword",A:function(t){if(ha(t),!t.password)throw new T("wrong-password")},G:pa,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);pa(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Js]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return ke(new T("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ce(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),la(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Or(t)),new T("internal-error",e)}function su(t){this.b=t,this.a=null,this.sb=function(t){return(lu||(lu=new be((function(t,e){function n(){jr(),Nr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){jr(),e(Error("Network Error"))},timeout:uu.get()})}if(Nr("gapi.iframes.Iframe"))t();else if(Nr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Nr("gapi.load")?n():e(Error("Network Error"))},Ce(Ks(r=Et(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw lu=null,t})))).then((function(){return new be((function(e,n){Nr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new gt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new qr(3e4,6e4),cu=new qr(5e3,15e3),lu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Un((t=Fn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Eo.app(t).auth().Ga()}catch(e){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=ur();return function(t){return ru(t,ja,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Fn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:dr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ho(ur())}))}function gu(t){return t.m||(t.m=gr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Y(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.m}function yu(t){return t.l||(t.C=t.c?Cr(t.c,pu(t.b)):null,t.l=new $s(t.g,A(t.i),t.C),t.f&&ia(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new fu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=ft(u||null),t.f=c,t.zb(l).toString()}function bu(t){if(this.a=t||Eo.INTERNAL.reactNative&&Eo.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=b(this.c,this)}hu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):$n(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):$n(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):$n(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Fn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Eo.app(this.c).auth().la()}catch(a){n=null}for(var r in e.pb=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),ht(e)||Mn(t,"customParameters",Or(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):$n(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):$n(t.b,"eventId"),this.i?Mn(t,"v",this.i):$n(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Ln(t,s)&&Mn(t,s,this.b[s]);return this.h?Mn(t,"tid",this.h):$n(t.b,"tid"),this.f?Mn(t,"eid",this.f):$n(t.b,"eid"),(s=pu(this.c)).length&&Mn(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.sb.then((function(){return new be((function(n){t.a.send(e.type,e,n,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&fr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new be((function(e){return function n(){En(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return En(n).then((function(){e(r)}))}))},t.Yb=function(){var t=kr();return!Dr(t)&&!Ur(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new T("popup-blocked"));if(s&&!Dr())return this.ma().o((function(e){fr(t),i(e)})),r(),Ce();this.a||(this.a=vu(yu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw fr(t),i(e),e}));return r(),e})).then((function(){(jo(n),s)||cr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=vu(yu(this)));var i=this;return this.a.then((function(){jo(e),cr(mu(i.s,i.g,i.b,t,e,ur(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){G(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Lr(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,Or(e)))},t.U=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Tu(t,e,n){ht(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,(function(t){return t==e}))}}function Nu(){if(!xu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;br()&&self?(this.v=function(){var t=br()?self:null;if(V(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&V(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Tu(this.v,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Eu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Au(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Au(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Pu(t){return t.i||(t.i=Au(t)),t.i}function Ru(t,e){var n=0;return new be((function r(i,o){Pu(t).then(e).then(i).o((function(e){if(!(3<++n))return Pu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function xu(){try{return!!s.indexedDB}catch(Wt){return!1}}function Du(t){return t.objectStore("firebaseLocalStorage")}function Ou(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Mu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Lu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function Fu(t){return Pu(t).then((function(t){var e=Du(Ou(t,!1));return e.getAll?Mu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(xu()){var t=Fr(),r="__sak"+t;return wu||(wu=new Nu),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){V(e.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Vu(){if(!function(){var t="Node"==_r();if(!(t=Bu()||t&&Eo.INTERNAL.node&&Eo.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==_r())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||Eo.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=s.localStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Ku(){this.type="nullStorage"}function Wu(){if(!function(){var t="Node"==_r();if(!(t=Hu()||t&&Eo.INTERNAL.node&&Eo.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==_r())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Hu()||Eo.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=s.sessionStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zu(){var t={};t.Browser=Yu,t.Node=$u,t.ReactNative=Xu,t.Worker=Ju,this.a=t[_r()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];V(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),Ae(i).then((function(r){var i=[];V(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),V(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return Ru(this,(function(e){return Mu((e=Du(Ou(e,!0))).get(t))})).then((function(i){return Ru(n,(function(o){if(o=Du(Ou(o,!0)),i)return i.value=e,Mu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Mu(o.add(s))}))})).then((function(){return n.c[t]=e,Lu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ru(this,(function(e){return Mu(Du(Ou(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ru(this,(function(r){return n=!0,e.b++,Mu(Du(Ou(r,!0)).delete(t))})).then((function(){return delete e.c[t],Lu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&V(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uu(t),e()}(this),this.a.push(t)},t.ia=function(t){G(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){G(this.a,(function(e){return e==t}))},(t=qu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.U=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return Ce().then((function(){return Lr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Or(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&an(s.window,"storage",t)},t.ia=function(t){s.window&&ln(s.window,"storage",t)},(t=Ku.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.U=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=Wu.prototype).get=function(t){var e=this;return Ce().then((function(){return Lr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Or(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Gu,Qu,Yu={F:Vu,cb:Wu},$u={F:Vu,cb:Wu},Xu={F:bu,cb:Ku},Ju={F:Vu,cb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Ur(kr())||!mr()),e=Dr(),n=Ar();this.m=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new zu),t=Gu;try{this.g=!ar()&&Kr()||!s.indexedDB?new t.a.F:new ju(br()?new qu:new t.a.F)}catch(r){this.g=new qu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new qu}this.v=new qu,this.f=b(this.Zb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),ht(this.a)&&(nc(this,"local").ca(this.f),this.h||(ar()||!Kr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(G(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ht(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},zt&&oe&&10==oe&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&V(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function lc(t,e){this.b=hc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(mc):mc),this.reset()}w(lc,(function(){this.b=-1}));for(var hc=64,fc=hc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=Q(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|ac[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function yc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}lc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Y(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){lc.call(this,8,_c)}w(bc,lc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new T("invalid-cordova-configuration",t)}function Tc(t){var e=new bc;yc(e,t),t=[];var n=8*e.g;56>e.c?yc(e,vc,56-e.c):yc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Lr(Ln(o=Fn(i),"firebaseError")||null))?E(o):null)?new qo(r.c,r.b,null,null,o,null,r.T()):new qo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new qo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=En(500).then((function(){return Cc(t).then((function(){r||Ec(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Nr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Wo||(Wo=new Bo),function(t){var e=Wo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Nr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Vo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function kc(t){this.a=t,this.b=ec()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?gr().then((function(){return new be((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Nr("universalLinks.subscribe",s))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Nr("BuildInfo.packageName",s))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Nr("cordova.plugins.browsertab.openUrl",s))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Nr("cordova.InAppBrowser.open",s))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Pb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Ce()},t.Nb=function(){return ke(new T("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return ke(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Ce().then((function(){return jo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new qo(e,r,null,o,new T("no-auth-event"),null,i),u=Nr("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Nr("BuildInfo.displayName",s),l={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!kr().toLowerCase().match(/android/))return ke(new T("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=Tc(o),l.sessionId=o;var h=mu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Nr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Nr("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Nr("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");e=kr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){u=function(){var e=Nr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=En(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},l=function(){Vr()&&c()},o.addEventListener("resume",c,!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ta=function(t){G(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",F:"session"};function Ac(t){return ic(t.b,Nc,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new $c,this.g=new kc(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Rc(this.D,this.v,this.m,S,this.J)}function Rc(t,e,n,r,i){var o=Eo.SDK_VERSION||null;return yr()?new wc(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function xc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Dc(t){t.a.Yb()&&xc(t).o((function(e){var n=new qo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Ub()||zc(t.b)}function Oc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Ac(t.g).then((function(){xc(t).o((function(e){var n=new qo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Dc(t)})).o((function(){Dc(t)}))}function Mc(t,e){G(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Rc(this.D,this.v,this.m,null,this.J),this.i={}},Pc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return zc(this.b),e};var Lc=new qr(2e3,1e4),Fc=new qr(3e4,6e4);function Uc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function qc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(jc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Ac(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new be((function(){})):Ac(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Vc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Lc.get())}Pc.prototype.ra=function(){return this.b.ra()};var Bc={};function Kc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Wc(t,e,n,r){var i=Kc(e,n,r);return Bc[i]||(Bc[i]=new Pc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,Yc(t,!1,null,null))}function Gc(t){t.g&&!t.i&&Yc(t,!1,null,null)}function Qc(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Yc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Qc(t,n):Qc(t,{user:null}),t.f=[],t.c=[]}function $c(){}function Xc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Jc(t,e){this.a=e,Qr(this,"verificationId",t)}function Zc(t,e,n,r){return new Lo(t).gb(e,n).then((function(t){return new Jc(t,r)}))}function tl(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Br(1e3*e.exp),authTime:Br(1e3*e.auth_time),issuedAtTime:Br(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function el(t,e,n){var r=e&&e[rl];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;V(e[nl]||[],(function(t){(t=Zr(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Yc(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Yc(t,a,e,null)})).o((function(e){Yc(t,a,null,e)}))}(this,t,e):ke(new T("invalid-auth-event")):(Yc(this,!1,null,null),Ce())}else ke(new T("invalid-auth-event"))},Hc.prototype.ra=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=En(Fc.get()).then((function(){t.b||(t.g=!0,Yc(t,!0,null,e))}))}(t))}))},$c.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):ke(new T("invalid-auth-event"))}else ke(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nl="mfaInfo",rl="mfaPendingCredential";function il(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new el(t,e,n),Qr(this,"resolver",this.b)}function ol(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new il(e,t.serverResponse,n,t.message)}catch(r){}return null}function sl(){}function al(t){Qr(this,"factorId",t.fa),this.a=t}function ul(t){if(al.call(this,t),this.a.fa!=Lo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function cl(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function ll(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),an(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ni]=t.uid),t.displayName&&(r[ti]=t.displayName),t.enrollmentTime&&(r[ei]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ri]=t.phoneNumber);try{e=new ii(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),hl(this,n)}function hl(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function pl(t,e){t.stop(),t.b=En(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Vr()||!t?Ce():new be((function(n){e=function(){Vr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){pl(t,!0)})).o((function(e){t.i(e)&&pl(t,!1)}))}function dl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vl(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function gl(t,e){t.b=Bi(e[Js]||""),t.a=e.refreshToken,vl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function yl(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=Bi(e.access_token),t.a=e.refresh_token,vl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function ml(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Br(e||null),creationTime:Br(t||null)})}function bl(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function _l(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Eo.SDK_VERSION?Cr(Eo.SDK_VERSION):null;this.a=new $s(this.l,A(S),r),(this.u=t.emulatorConfig||null)&&ia(this.a,this.u),this.h=new dl(this.a),Al(this,e[Js]),gl(this.h,e),Qr(this,"refreshToken",this.h.a),xl(this,n||{}),bn.call(this),this.P=!1,this.s&&Pr()&&(this.b=Wc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new fl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){wl(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){El(i,t.f)},this.ja=null,this.S=new ll(this,n),Qr(this,"multiFactor",this.S)}function wl(t,e){t.u=e,ia(t.a,e),t.b&&(e=t.b,t.b=Wc(t.s,t.l,t.m,t.u),t.P&&(Mc(e,t),Oc(t.b,t)))}function Il(t,e){t.qa&&ln(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&an(e,"languageCodeChanged",t.Pa)}function Tl(t,e){t.$&&ln(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&an(e,"emulatorConfigChanged",t.Ba)}function El(t,e){t.aa=e,sa(t.a,Eo.SDK_VERSION?Cr(Eo.SDK_VERSION,t.aa):null)}function Sl(t,e){t.ja&&ln(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&an(e,"frameworkChanged",t.Oa)}function Cl(t){try{return Eo.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function kl(t){t.J||t.D.b||(t.D.start(),ln(t,"tokenChanged",t.ba),an(t,"tokenChanged",t.ba))}function Nl(t){ln(t,"tokenChanged",t.ba),t.D.stop()}function Al(t,e){t.Aa=e,Qr(t,"_lat",e)}function Pl(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ae(e).then((function(){return t}))}function Rl(t){t.b&&!t.P&&(t.P=!0,Oc(t.b,t))}function xl(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ml(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Dl(){}function Ol(t){return Ce().then((function(){if(t.J)throw new T("app-deleted")}))}function Ml(t){return K(t.providerData,(function(t){return t.providerId}))}function Ll(t,e){e&&(Fl(t,e.providerId),t.providerData.push(e))}function Fl(t,e){G(t.providerData,(function(t){return t.providerId==e}))}function Ul(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function jl(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new ml(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new ml),V(e.providerData,(function(e){Ll(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Qr(t,"refreshToken",t.h.a),hl(t.S,e.S.b))}function ql(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Oa,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Ul(t,"isAnonymous",!1),e}))}))}function Vl(t,e){e[Js]&&t.Aa!=e[Js]&&(gl(t.h,e),t.dispatchEvent(new cl("tokenChanged")),Al(t,e[Js]),Ul(t,"refreshToken",t.h.a))}function Bl(t,e){return ql(t).then((function(){if(H(Ml(t),e))return Pl(t).then((function(){throw new T("provider-already-linked")}))}))}function Kl(t,e,n){return $r({user:t,credential:Uo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Wl(t,e){return Vl(t,e),t.reload().then((function(){return t}))}function Hl(t,e,n,r,i){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=Gi(n.providerId),s=Fr(t.uid+":::"),a=null;(!Dr()||mr())&&t.s&&n.isOAuthProvider&&(a=mu(t.s,t.l,t.m,e,n,null,s,Eo.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=pr(a,o&&o.va,o&&o.ua);return r=r().then((function(){if(Gl(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.b,u,e,n,s,!!a,t.tenantId)})).then((function(){return new be((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Vc(t.b,t,e,u,s)}))})).then((function(t){return u&&fr(u),t?$r(t):null})).o((function(t){throw u&&fr(u),t})),Ql(t,r,i)}function zl(t,e,n,r,i){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=null,s=Fr(t.uid+":::");return r=r().then((function(){if(Gl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Pl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xl,t.w(),e.a)),e})).then((function(){return qc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Jl(t.ha);throw o})).then((function(){if(o)throw o})),Ql(t,r,i)}function Gl(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Ql(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),ke(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new cl("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),Cl(t),b(t.jc,t))),n||e}))}function Yl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new _l(e,n,t);return t.providerData&&V(t.providerData,(function(t){t&&Ll(i,$r(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function $l(t){this.a=t,this.b=ec()}el.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[nl],delete n[rl],dt(n,t),e.g(n)}))},w(il,T),sl.prototype.tb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:Mo(t.a)}),ru(e,xa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:Mo(t.a)}),ru(e,Da,n)}))}(this,t,e)},w(al,sl),w(ul,al),w(cl,Qe),(t=ll.prototype).yc=function(t){hl(this,function(t){var e=[];return V(t.mfaInfo||[],(function(t){(t=Zr(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new io(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Vl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return hl(e,r),Vl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},fl.prototype.start=function(){this.a=this.c,pl(this,!0)},fl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?yl(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},ml.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(_l,bn),_l.prototype.xa=function(t){this.za=t,ra(this.a,t)},_l.prototype.la=function(){return this.za},_l.prototype.Ga=function(){return Y(this.aa)},_l.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(_l.prototype,"providerId","firebase"),(t=_l.prototype).reload=function(){var t=this;return Ql(this,Ol(this).then((function(){return ql(t).then((function(){return Pl(t)})).then(Dl)})))},t.oc=function(t){return this.I(t).then((function(t){return new tl(t)}))},t.I=function(t){var e=this;return Ql(this,Ol(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.Aa&&(Al(e,t.accessToken),e.dispatchEvent(new cl("tokenChanged"))),Ul(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");xl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new bl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ll(this,e[n]);Ul(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new cl("userReloaded",{hd:t}))},t.Lc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Ql(this,t.c(this.a,this.uid).then((function(t){return Vl(e,t),n=Kl(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Ql(this,Bl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Kl(e,t,"link"),Wl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Ql(this,Bl(this,"phone").then((function(){return Zc(Cl(n),t,e,b(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Ql(this,Ce().then((function(){return Zc(Cl(n),t,e,b(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Ql(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Vl(e,t),e.reload()})))},t.ed=function(t){var e=this;return Ql(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Vl(e,t),e.reload()})))},t.Db=function(t){var e=this;return Ql(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Vl(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ol(this);var e=this;return Ql(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Vl(e,t),Ul(e,"displayName",t.displayName||null),Ul(e,"photoURL",t.photoUrl||null),V(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Pl(e)})).then(Dl))},t.cd=function(t){var e=this;return Ql(this,ql(this).then((function(n){return H(Ml(e),t)?function(t,e,n){return ru(t,Aa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return V(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),V(Ml(e),(function(t){n[t]||Fl(e,t)})),n[Lo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Pl(e)})):Pl(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Ql(this,this.I().then((function(e){return ru(t.a,Na,{idToken:e})})).then((function(){t.dispatchEvent(new cl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Il(t,null),Tl(t,null),Sl(t,null),t.N=[],t.J=!0,Nl(t),Qr(t,"refreshToken",null),t.b&&Mc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return Hl(this,"linkViaPopup",t,(function(){return Bl(e,t.providerId).then((function(){return Pl(e)}))}),!1)},t.Nc=function(t){return Hl(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Fc=function(t){var e=this;return zl(this,"linkViaRedirect",t,(function(){return Bl(e,t.providerId)}),!1)},t.Oc=function(t){return zl(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ql(this,this.I().then((function(n){return wa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Kl(i,t,"link"),Wl(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ql(this,Ce().then((function(){return uo(Ia(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Kl(i,t,"reauthenticate"),Vl(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Ql(this,this.I().then((function(e){return n=e,void 0===t||ht(t)?{}:Ui(new Ni(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Ql(this,this.I().then((function(t){return r=t,void 0===e||ht(e)?{}:Ui(new Ni(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Ql(this,t=uo(Ce(t),n.uid).then((function(t){return e=Kl(n,t,"reauthenticate"),Vl(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),V(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.S.w()),t};var Xl={name:"redirectUser",F:"session"};function Jl(t){return ic(t.b,Xl,t.a)}function Zl(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=nh("local"),n=nh("session"),r=nh("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Lr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(eh,t.a).then((function(t){return t?nh(t):e}))}))}))})).then((function(e){return t.c=e,th(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nh("local"),this.a,b(this.g,this))}function th(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,nh(Zu[n]),t.a));return r.push(ic(t.b,eh,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ne(t[a],_(o,a),s);else e(i)}))}(r)}Zl.prototype.g=function(){var t=this,e=nh("local");sh(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return th(t,"local").then((function(){t.c=e}))}))}))};var eh={name:"persistence",F:"session"};function nh(t){return{name:"authUser",F:t}}function rh(t,e){return sh(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function ih(t){return sh(t,(function(){return ic(t.b,t.c,t.a)}))}function oh(t,e,n){return sh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Yl(t||{})}))}))}function sh(t,e){return t.f=t.f.then(e,e),t.f}function ah(t){if(this.l=!1,Qr(this,"settings",new Xc),Qr(this,"app",t),!gh(this).options||!gh(this).options.apiKey)throw new T("invalid-api-key");t=Eo.SDK_VERSION?Cr(Eo.SDK_VERSION):null,this.a=new $s(gh(this).options&&gh(this).options.apiKey,A(S),t),this.P=[],this.s=[],this.N=[],this.Pa=Eo.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=Eo.INTERNAL.createSubscribe(b(this.Ac,this)),dh(this,null),this.i=new Zl(gh(this).options.apiKey+":"+gh(this).name),this.D=new $l(gh(this).options.apiKey+":"+gh(this).name),this.$=_h(this,function(t){var e=gh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Yl(t||{})}))}(t.D,gh(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Jl(t.D)}));return _h(t,e)}(t).then((function(){return oh(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return rh(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:ih(t.i)}))):null})).then((function(e){dh(t,e||null)}));return _h(t,n)}(this)),this.h=_h(this,function(t){return t.$.then((function(){return fh(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(nh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=gh(t).options.authDomain,n=gh(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Wc(e,n,gh(t).name,t.R),Oc(t.b,t),yh(t)&&Rl(yh(t)),t.m){Rl(t.m);var r=t.m;r.xa(t.la()),Il(r,t),El(r=t.m,t.J),Sl(r,t),wl(r=t.m,t.R),Tl(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Fn(this.R.url);t=$r({protocol:t.c,host:t.a,port:t.g,options:$r({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function uh(t){Qe.call(this,"languageCodeChanged"),this.h=t}function ch(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function lh(t){Qe.call(this,"frameworkChanged"),this.f=t}function hh(t){return t.Oa||ke(new T("auth-domain-config-required"))}function fh(t){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));var e=hh(t).then((function(){return t.b.ra()})).then((function(t){return t?$r(t):null}));return _h(t,e)}function ph(t,e){var n={};return n.apiKey=gh(t).options.apiKey,n.authDomain=gh(t).options.authDomain,n.appName=gh(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new _l(t,e);return n&&(i.ha=n),r&&El(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return yh(t)&&e.uid==yh(t).uid?(jl(yh(t),e),t.da(e)):(dh(t,e),Rl(e),t.da(e))})).then((function(){bh(t)}))}function dh(t,e){yh(t)&&(function(t,e){G(t.W,(function(t){return t==e}))}(yh(t),t.Ba),ln(yh(t),"tokenChanged",t.qa),ln(yh(t),"userDeleted",t.za),ln(yh(t),"userInvalidated",t.Aa),Nl(yh(t))),e&&(e.W.push(t.Ba),an(e,"tokenChanged",t.qa),an(e,"userDeleted",t.za),an(e,"userInvalidated",t.Aa),0<t.u&&kl(e)),Qr(t,"currentUser",e),e&&(e.xa(t.la()),Il(e,t),El(e,t.J),Sl(e,t),wl(e,t.R),Tl(e,t))}function vh(t,e){var n=null,r=null;return _h(t,e.then((function(e){return n=Uo(e),r=Qi(e),ph(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),t,b(t.kc,t))),n||e})).then((function(){return $r({user:yh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function gh(t){return t.app}function yh(t){return t.currentUser}function mh(t){return yh(t)&&yh(t)._lat||null}function bh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](mh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](mh(t))}}function _h(t,e){return t.P.push(e),e.oa((function(){z(t.P,e)})),e}function wh(){}function Ih(){this.a={},this.b=1e12}Zl.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!xu()&&"none"!==t)throw n;break;default:if(!Ar()&&"none"!==t)throw n}}(t),sh(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,th(n,t)})).then((function(){if(n.c=nh(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},w(ah,bn),w(uh,Qe),w(ch,Qe),w(lh,Qe),(t=ah.prototype).yb=function(t){return _h(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new uh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&gr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ia(this.a,this.R),this.dispatchEvent(new ch(this.R))}},t.Gc=function(t){this.J.push(t),sa(this.a,Eo.SDK_VERSION?Cr(Eo.SDK_VERSION,this.J):null),this.dispatchEvent(new lh(this.J))},t.Ga=function(){return Y(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:gh(this).options.apiKey,authDomain:gh(this).options.authDomain,appName:gh(this).name,currentUser:yh(this)&&yh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vh(i,_a(i.a,o))}))},t.Xc=function(t){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));var e=this,n=Gi(t.providerId),r=Fr(),i=null;(!Dr()||mr())&&gh(this).options.authDomain&&t.isOAuthProvider&&(i=mu(gh(this).options.authDomain,gh(this).options.apiKey,gh(this).name,"signInViaPopup",t,null,r,Eo.SDK_VERSION||null,null,null,this.T(),this.R));var o=pr(i,n&&n.va,n&&n.ua);return _h(this,n=hh(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new be((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Vc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&fr(o),t?$r(t):null})).o((function(t){throw o&&fr(o),t})))},t.Yc=function(t){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));var e=this;return _h(this,hh(this).then((function(){return function(t){return sh(t,(function(){return t.b.set(eh,t.c.F,t.a)}))}(e.i)})).then((function(){return qc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return fh(this).then((function(e){return t.b&&Gc(t.b.b),e})).o((function(e){throw t.b&&Gc(t.b.b),e}))},t.dd=function(t){if(!t)return ke(new T("null-user"));if(this.S!=t.tenantId)return ke(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=gh(this).options.apiKey,n.authDomain=gh(this).options.authDomain,n.appName=gh(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new _l(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&El(e,r),jl(e,t),e}(t,n,e.D,e.Ga());return _h(this,this.h.then((function(){if(gh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return yh(e)&&t.uid==yh(e).uid?(jl(yh(e),t),e.da(t)):(dh(e,r),Rl(r),e.da(r))})).then((function(){bh(e)})))},t.Bb=function(){var t=this;return _h(this,this.h.then((function(){return t.b&&Gc(t.b.b),yh(t)?(dh(t,null),ih(t.i).then((function(){bh(t)}))):Ce()})))},t.Zc=function(){var t=this;return oh(this.i,gh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=yh(t)&&e){n=yh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return jl(yh(t),e),yh(t).I();(yh(t)||e)&&(dh(t,e),e&&(Rl(e),e.ha=t.D),t.b&&Oc(t.b,t),bh(t))}}))},t.da=function(t){return rh(this.i,t)},t.mc=function(){bh(this),this.da(yh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return vh(e,Ce(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(yh(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),_h(t,t.h.then((function(){!t.l&&H(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(mh(t)))})))}(this,(function(){t.next(yh(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(yh(r)):"function"==typeof t.next&&t.next(yh(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(yh(r)):"function"==typeof t.next&&t.next(yh(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return _h(this,this.h.then((function(){return yh(e)?yh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return vh(e,ru(e.a,Xa,{token:t}))})).then((function(t){var n=t.user;return Ul(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Ca,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return vh(e,t.ka(e.a))}))},t.Sc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=yh(t);if(e&&e.isAnonymous){var n=$r({providerId:null,isNewUser:!1});return $r({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vh(t,t.a.Ab()).then((function(e){var n=e.user;return Ul(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return yh(this)&&yh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&yh(this)&&kl(yh(this))},t.Pc=function(t){var e=this;V(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&yh(this)&&Nl(yh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),_h(this,this.h.then((function(){e.l||H(e.s,t)&&t(mh(e))})))},t.removeAuthTokenListener=function(t){G(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(nh("local"),t.a,this.ja),this.b&&(Mc(this.b,this),Gc(this.b.b)),Promise.resolve()},t.hc=function(t){return _h(this,function(t,e){return ru(t,ka,{identifier:e,continueUri:Rr()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.xb=function(t,e){var n=this;return _h(this,Ce().then((function(){var t=new Ni(e);if(!t.c)throw new T("argument-error",Ri+" must be true when sending sign in link to email");return Ui(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return _h(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return _h(this,this.a.Sa(t).then((function(t){return new oi(t)})))},t.kb=function(t){return _h(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return _h(this,Ce().then((function(){return void 0===e||ht(e)?{}:Ui(new Ni(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return _h(this,Zc(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return _h(this,Ce().then((function(){var r=e||ur(),i=Ro(t,r);if(!(r=xo(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.ab(i)})))},wh.prototype.render=function(){},wh.prototype.reset=function(){},wh.prototype.getResponse=function(){},wh.prototype.execute=function(){};var Th=null;function Eh(t,e){return(e=Sh(e))&&t.a[e]||null}function Sh(t){return(t=void 0===t?1e12:t)?t.toString():null}function Ch(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():an(this.f,"click",this.i)}function kh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nh(){}function Ah(){}Ih.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ch(t,e),this.b++},Ih.prototype.reset=function(t){var e=Eh(this,t);t=Sh(t),e&&t&&(e.delete(),delete this.a[t])},Ih.prototype.getResponse=function(t){return(t=Eh(this,t))?t.getResponse():null},Ih.prototype.execute=function(t){(t=Eh(this,t))&&t.execute()},Ch.prototype.getResponse=function(){return kh(this),this.b},Ch.prototype.execute=function(){kh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Ch.prototype.delete=function(){kh(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Qr(Nh,"FACTOR_ID","phone"),Ah.prototype.g=function(){return Th||(Th=new Ih),Ce(Th)},Ah.prototype.c=function(){};var Ph=null;function Rh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var xh=new gt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Dh=new qr(3e4,6e4);Rh.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Dh.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[e.a]},Ce(Ks(Et(xh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Rh.prototype.c=function(){this.b--};var Oh=null;function Mh(t,e,n,r,i,o,a){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Ph||(Ph=new Ah),a=Ph):(Oh||(Oh=new Rh),a=Oh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Uh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[jh],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ae(e)||!this.i&&ae(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $s(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Lh];this.a[Lh]=function(t){if(qh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Nr(c,s);"function"==typeof e&&e(t)}};var l=this.a[Fh];this.a[Fh]=function(){if(qh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Nr(l,s);"function"==typeof t&&t()}}}var Lh="callback",Fh="expired-callback",Uh="sitekey",jh="size";function qh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Vh(t,e){return t.h.push(e),e.oa((function(){z(t.h,e)})),e}function Bh(t){if(t.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kh(t,e,n){var r=!1;try{this.b=n||Eo.app()}catch(s){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=Eo.SDK_VERSION?Cr(Eo.SDK_VERSION,o):null,Mh.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,A(S),r)}function Wh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Hh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Hh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Mh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Vh(this,Ce().then((function(){if(Rr()&&!br())return gr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,qa,{})})).then((function(e){t.a[Uh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Bh(this);var t=this;return Vh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ae(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!se&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Vt(s.name),'"'),s.type){o.push(' type="',Vt(s.type),'"');var a={};dt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ue(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Bh(this);var t=this;return Vh(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){G(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Bh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Bh(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ae(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},w(Kh,Mh);var Hh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function zh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Gh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Qh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Yh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function $h(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jh(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zh(t){return d(t)&&"string"==typeof t.uid}function tf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ef(t,e){for(var n in e){var r=e[n].name;t[r]=of(r,t[n],e[n].j)}}function nf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_((function(t){return this[t]}),n),set:_((function(t,e,n,r){Wh(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function rf(t,e,n,r){t[e]=of(e,n,r)}function of(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Wh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ef(ah.prototype,{kb:{name:"applyActionCode",j:[zh("code")]},Sa:{name:"checkActionCode",j:[zh("code")]},ob:{name:"confirmPasswordReset",j:[zh("code"),zh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[zh("email"),zh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[zh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[zh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[tf(Qh(),Yh(),"nextOrObserver"),Yh("opt_error",!0),Yh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[tf(Qh(),Yh(),"nextOrObserver"),Yh("opt_error",!0),Yh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[zh("email"),tf(Qh("opt_actionCodeSettings",!0),$h(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[zh("email"),Qh("actionCodeSettings")]},yb:{name:"setPersistence",j:[zh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Xh()]},Tc:{name:"signInWithCustomToken",j:[zh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[zh("email"),zh("password")]},Vc:{name:"signInWithEmailLink",j:[zh("email"),zh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[tf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof _l)}},$h(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[zh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[zh("url"),Qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[zh("code")]}}),nf(ah.prototype,{lc:{name:"languageCode",lb:tf(zh(),$h(),"languageCode")},ti:{name:"tenantId",lb:tf(zh(),$h(),"tenantId")}}),ah.Persistence=Zu,ah.Persistence.LOCAL="local",ah.Persistence.SESSION="session",ah.Persistence.NONE="none",ef(_l.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Gh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xh()]},rb:{name:"linkWithCredential",j:[Xh()]},Dc:{name:"linkWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xh()]},ub:{name:"reauthenticateWithCredential",j:[Xh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[tf(Qh("opt_actionCodeSettings",!0),$h(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[zh(null,!0)]},cd:{name:"unlink",j:[zh("provider")]},Cb:{name:"updateEmail",j:[zh("email")]},Db:{name:"updatePassword",j:[zh("password")]},ed:{name:"updatePhoneNumber",j:[Xh("phone")]},Eb:{name:"updateProfile",j:[Qh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[zh("email"),tf(Qh("opt_actionCodeSettings",!0),$h(null,!0),"opt_actionCodeSettings",!0)]}}),ef(Ih.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(wh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),nf(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Gh("appVerificationDisabledForTesting")}}),ef(Jc.prototype,{confirm:{name:"confirm",j:[zh("verificationCode")]}}),rf(ao,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,Ao,Oo,ho],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tf(zh(),Qh(),"json")]),rf(Po,"credential",(function(t,e){return new No(t,e)}),[zh("email"),zh("password")]),ef(No.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(bo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(bo,"credential",_o,[tf(zh(),Qh(),"token")]),rf(Po,"credentialWithLink",Ro,[zh("email"),zh("emailLink")]),ef(wo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(wo,"credential",Io,[tf(zh(),Qh(),"token")]),ef(To.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(To,"credential",So,[tf(zh(),tf(Qh(),$h()),"idToken"),tf(zh(),$h(),"accessToken",!0)]),ef(Co.prototype,{Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(Co,"credential",ko,[tf(zh(),Qh(),"token"),zh("secret",!0)]),ef(mo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},credential:{name:"credential",j:[tf(zh(),tf(Qh(),$h()),"optionsOrIdToken"),tf(zh(),$h(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),ef(fo.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(co.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),rf(Lo,"credential",Fo,[zh("verificationId"),zh("verificationCode")]),ef(Lo.prototype,{gb:{name:"verifyPhoneNumber",j:[tf(zh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jh(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jh(t.session,so)&&Zh(t.multiFactorHint):t.session&&t.multiFactorUid?Jh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),ef(Do.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(T.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(zo.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(Ho.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(il.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(el.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),ef(ll.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},zh("displayName",!0)]},bd:{name:"unenroll",j:[tf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zh},zh(),"multiFactorInfoIdentifier")]}}),ef(Kh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rf(bi,"parseLink",ki,[zh("link")]),rf(Nh,"assertion",(function(t){return new ul(t)}),[Xh("phone")]),function(){if(void 0===Eo||!Eo.INTERNAL||!Eo.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ai,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ah,AuthCredential:ao,Error:T};rf(t,"EmailAuthProvider",Po,[]),rf(t,"FacebookAuthProvider",bo,[]),rf(t,"GithubAuthProvider",wo,[]),rf(t,"GoogleAuthProvider",To,[]),rf(t,"TwitterAuthProvider",Co,[]),rf(t,"OAuthProvider",mo,[zh("providerId")]),rf(t,"SAMLAuthProvider",yo,[zh("providerId")]),rf(t,"PhoneAuthProvider",Lo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ah)}}]),rf(t,"RecaptchaVerifier",Kh,[tf(zh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Eo.app.App)}}]),rf(t,"ActionCodeURL",bi,[]),rf(t,"PhoneMultiFactorGenerator",Nh,[]),Eo.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ah(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Eo.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Eo.registerVersion("@firebase/auth","0.16.8"),Eo.INTERNAL.extendNamespace({User:_l})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var So="";function Co(t){So=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ko,No=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),xi(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Ri(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),Ao=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Oi(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),Po=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new No(e)}}catch(jC){}return new Ao},Ro=Po("localStorage"),xo=Po("sessionStorage"),Do=new uo("@firebase/database"),Oo=(ko=1,function(){return ko++}),Mo=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,ci(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Ui;n.update(e);var r=n.digest();return fi.encodeByteArray(r)},Lo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Lo.apply(null,i):n+="object"==typeof i?xi(i):i,n+=" "}return n},Fo=null,Uo=!0,jo=function(t,e){ci(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Do.logLevel=to.VERBOSE,Fo=Do.log.bind(Do),e&&xo.set("logging_enabled",!0)):"function"==typeof t?Fo=t:(Fo=null,xo.remove("logging_enabled"))},qo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Uo&&(Uo=!1,null===Fo&&!0===xo.get("logging_enabled")&&jo(!0)),Fo){var n=Lo.apply(null,t);Fo(n)}},Vo=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];qo.apply(void 0,si([t],oi(e)))}},Bo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Lo.apply(void 0,si([],oi(t)));Do.error(n)},Ko=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Lo.apply(void 0,si([],oi(t)));throw Do.error(n),new Error(n)},Wo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Lo.apply(void 0,si([],oi(t)));Do.warn(n)},Ho=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},zo="[MIN_NAME]",Go="[MAX_NAME]",Qo=function(t,e){if(t===e)return 0;if(t===zo||e===Go)return-1;if(e===zo||t===Go)return 1;var n=ns(t),r=ns(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Yo=function(t,e){return t===e?0:t<e?-1:1},$o=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+xi(e))},Xo=function(t){if("object"!=typeof t||null===t)return xi(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=xi(e[i]),r+=":",r+=Xo(t[e[i]]);return r+="}"},Jo=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var ts=function(t){ci(!Ho(t),"Invalid JSON number");var e,n,r,i,o,s=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),s))+s,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var es=new RegExp("^-?(0*)\\d{1,10}$"),ns=function(t){if(es.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},rs=function(t){try{t()}catch(jC){setTimeout((function(){var e=jC.stack||"";throw Wo("Exception was thrown by user callback.",e),jC}),Math.floor(0))}},is=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},os=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){Wo('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),ss=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(qo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wo(t)},t}(),as=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),us=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cs=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ro.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ro.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function ls(t,e,n){var r;if(ci("string"==typeof e,"typeof type must == string"),ci("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return Zo(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hs=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Oi(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return di(this.counters_)},t}(),fs={},ps={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t){var e=t.toString();return fs[e]||(fs[e]=new hs),fs[e]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vs=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&rs((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),gs=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vo(t),this.stats_=ds(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),ls(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new vs(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new ys((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=oi(t,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=oi(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&us.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=xi(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=hi(e),fi.encodeByteArray(n,!0)),i=Jo(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=xi(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),ys=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Oo(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(jC){qo("frame writing exception"),jC.stack&&qo(jC.stack),qo(jC)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||qo("No IE domain setting required")}catch(jC){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){qo("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(jC){}}),Math.floor(1))},t}(),ms=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!=typeof MozWebSocket?ms=MozWebSocket:"undefined"!=typeof WebSocket&&(ms=WebSocket);var bs=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vo(this.connId),this.stats_=ds(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&us.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),ls(t,"websocket",i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ro.set("previous_websocket_failure",!0);try{if(Ti());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new ms(this.connURL,[],r)}}catch(jC){this.log_("Error instantiating WebSocket.");var i=jC.message||jC.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ms&&!t.forceDisallow_},t.previouslyFailed=function(){return Ro.isInMemoryStorage||!0===Ro.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){Ro.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Ri(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(ci(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=xi(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Jo(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(jC){this.log_("Exception thrown from WebSocket.send():",jC.message||jC.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),_s=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[gs,bs]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=bs&&bs.isAvailable(),o=i&&!bs.previouslyFailed();if(e.webSocketOnly&&(i||Wo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[bs];else{var s=this.transports_=[];try{for(var a=ii(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c.isAvailable()&&s.push(c)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ws=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vo("c:"+this.id+":"),this.transportManager_=new _s(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=is((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=$o("t",t),n=$o("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=$o("t",t),n=$o("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=$o("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Bo("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Bo("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Wo("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),is((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):is((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ro.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Is=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Ts=function(){function t(t){this.allowedEvents_=t,this.listeners_={},ci(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=si([],oi(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){ci(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Es=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||bi()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return ti(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return ci("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Ts),Ss=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(){return new Ss("")}function ks(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ns(t){return t.pieces_.length-t.pieceNum_}function As(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ss(t.pieces_,e)}function Ps(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Rs(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function xs(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ss(e,0)}function Ds(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ss)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Ss(n,0)}function Os(t){return t.pieceNum_>=t.pieces_.length}function Ms(t,e){var n=ks(t),r=ks(e);if(null===n)return e;if(n===r)return Ms(As(t),As(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ls(t,e){for(var n=Rs(t,0),r=Rs(e,0),i=0;i<n.length&&i<r.length;i++){var o=Qo(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Fs(t,e){if(Ns(t)!==Ns(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Us(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(Ns(t)>Ns(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var js=function(t,e){this.errorPrefix_=e,this.parts_=Rs(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=zi(this.parts_[n]);qs(this)};function qs(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vs(t))}function Vs(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs,Ks,Ws=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return ti(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return ci("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Ts),Hs=function(t){function e(n,r,i,o,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=s,l.authTokenProvider_=a,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=Vo("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Ti())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ws.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Es.getInstance().on("online",l.onOnline_,l),l}return ti(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(xi(i)),ci(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new gi,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ci(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ci(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Oi(t,"w")){var n=Mi(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();Wo("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=Di(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=Di(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ci(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+xi(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Bo("Unrecognized action received from server: "+xi(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;ci(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return ni(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,h,f,p,d,v=this;return ri(this,(function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,s=!1,a=null,u=function(){a?a.close():(s=!0,r())},c=function(t){ci(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)},this.realtime_={close:u,sendRequest:c},l=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)])];case 2:return h=oi.apply(void 0,[g.sent(),2]),f=h[0],p=h[1],s?qo("getToken() completed but was canceled"):(qo("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,a=new ws(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){Wo(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")}),o)),[3,4];case 3:return d=g.sent(),this.log_("Failed to get token: "+d),s||(this.repoInfo_.nodeAdmin&&Wo(d),u()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){qo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){qo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Li(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return Xo(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Ss(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){qo("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){qo("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=ii(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ii(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+So.replace(/\./g,"-")]=1,bi()?t["framework.cordova"]=1:Ii()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Es.getInstance().currentlyOnline();return Li(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Is),zs=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Gs=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new zs(zo,t),r=new zs(zo,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return zs.MIN},t}(),Qs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Bs},set:function(t){Bs=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return Qo(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw li("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return zs.MIN},e.prototype.maxPost=function(){return new zs(Go,Bs)},e.prototype.makePost=function(t,e){return ci("string"==typeof t,"KeyIndex indexValue must always be a string."),new zs(t,Bs)},e.prototype.toString=function(){return".key"},e}(Gs),Ys=new Qs,$s=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Xs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Zs.EMPTY_NODE,this.right=null!=o?o:Zs.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Zs.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Zs.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Js=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Xs(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Zs=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Xs.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xs.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new $s(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new $s(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new $s(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new $s(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Js,t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ta(t,e){return Qo(t.name,e.name)}function ea(t,e){return Qo(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var na,ra,ia,oa=function(t){return"number"==typeof t?"number:"+ts(t):"string:"+t},sa=function(t){if(t.isLeafNode()){var e=t.val();ci("string"==typeof e||"number"==typeof e||"object"==typeof e&&Oi(e,".sv"),"Priority must be a string or number.")}else ci(t===Ks||t.isEmpty(),"priority of unexpected type.");ci(t===Ks||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},aa=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ci(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),sa(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return na},set:function(t){na=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return Os(e)?this:".priority"===ks(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ks(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(ci(".priority"!==r||1===Ns(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(As(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+oa(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?ts(this.value_):this.value_,this.lazyHash_=Mo(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(ci(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return ci(i>=0,"Unknown leaf type: "+n),ci(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var ua,ca,la=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Qo(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return zs.MIN},e.prototype.maxPost=function(){return new zs(Go,new aa("[PRIORITY-POST]",ia))},e.prototype.makePost=function(t,e){var n=ra(t);return new zs(e,new aa("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Gs)),ha=Math.log(2),fa=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ha,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),pa=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Xs(s,o.node,Xs.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Xs(s,o.node,Xs.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Xs(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Xs.BLACK):(a(h,Xs.BLACK),a(h,Xs.RED))}return o}(new fa(t.length));return new Zs(r||e,o)},da={},va=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return ci(da&&la,"ChildrenNode.ts has not been loaded"),ua=ua||new t({".priority":da},{".priority":la})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Mi(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Zs?e:null},t.prototype.hasIndex=function(t){return Oi(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){ci(e!==Ys,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(zs.Wrap),a=s.getNext();a;)o=o||e.isDefinedOn(a.node),i.push(a),a=s.getNext();r=o?pa(i,e.getCompare()):da;var u=e.toString(),c=ei({},this.indexSet_);c[u]=e;var l=ei({},this.indexes_);return l[u]=r,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Fi(this.indexes_,(function(t,i){var o=Mi(r.indexSet_,i);if(ci(o,"Missing index implementation for "+i),t===da){if(o.isDefinedOn(e.node)){for(var s=[],a=n.getIterator(zs.Wrap),u=a.getNext();u;)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),pa(s,o.getCompare())}return da}var c=n.get(e.name),l=t;return c&&(l=l.remove(new zs(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Fi(this.indexes_,(function(t){if(t===da)return t;var r=n.get(e.name);return r?t.remove(new zs(e.name,r)):t})),this.indexSet_)},t}(),ga=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&sa(this.priorityNode_),this.children_.isEmpty()&&ci(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ca||(ca=new t(new Zs(ea),null,va.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ca},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ca:e},t.prototype.getChild=function(t){var e=ks(t);return null===e?this:this.getImmediateChild(e).getChild(As(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(ci(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new zs(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?ca:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=ks(t);if(null===n)return e;ci(".priority"!==ks(t)||1===Ns(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(As(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(la,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+oa(this.getPriority().val())+":"),this.forEachChild(la,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":Mo(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new zs(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new zs(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new zs(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,zs.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,zs.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ya?-1:0},t.prototype.withIndex=function(e){if(e===Ys||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ys||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(la),r=e.getIterator(la),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ys?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ya=new(function(t){function e(){return t.call(this,new Zs(ea),ga.EMPTY_NODE,va.Default)||this}return ti(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ga.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ga));Object.defineProperties(zs,{MIN:{value:new zs(zo,ga.EMPTY_NODE)},MAX:{value:new zs(Go,ya)}}),Qs.__EMPTY_NODE=ga.EMPTY_NODE,aa.__childrenNodeConstructor=ga,Ks=ya,function(t){ia=t}(ya);function ma(t,e){if(void 0===e&&(e=null),null===t)return ga.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),ci(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new aa(t,ma(e));if(t instanceof Array){var n=ga.EMPTY_NODE;return Zo(t,(function(e,r){if(Oi(t,e)&&"."!==e.substring(0,1)){var i=ma(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(ma(e))}var r=[],i=!1;if(Zo(t,(function(t,e){if("."!==t.substring(0,1)){var n=ma(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new zs(t,n)))}})),0===r.length)return ga.EMPTY_NODE;var o=pa(r,ta,(function(t){return t.name}),ea);if(i){var s=pa(r,la.getCompare());return new ga(o,ma(e),new va({".priority":s},{".priority":la}))}return new ga(o,ma(e),va.Default)}!function(t){ra=t}(ma);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ba,_a,wa=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,ci(!Os(e)&&".priority"!==ks(e),"Can't create PathIndex with empty path or .priority key"),n}return ti(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Qo(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ma(t),r=ga.EMPTY_NODE.updateChild(this.indexPath_,n);return new zs(e,r)},e.prototype.maxPost=function(){var t=ga.EMPTY_NODE.updateChild(this.indexPath_,ya);return new zs(Go,t)},e.prototype.toString=function(){return Rs(this.indexPath_,0).join("/")},e}(Gs),Ia=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Qo(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return zs.MIN},e.prototype.maxPost=function(){return zs.MAX},e.prototype.makePost=function(t,e){var n=ma(t);return new zs(e,n)},e.prototype.toString=function(){return".value"},e}(Gs)),Ta="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ea=(ba=0,_a=[],function(t){var e,n=t===ba;ba=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Ta.charAt(t%64),t=Math.floor(t/64);ci(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===_a[e];e--)_a[e]=0;_a[e]++}else for(e=0;e<12;e++)_a[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Ta.charAt(_a[e]);return ci(20===i.length,"nextPushId: Length should be 20."),i}),Sa=function(t){if("2147483647"===t)return"-";var e=ns(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return Go;var o=n[i],s=Ta.charAt(Ta.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},Ca=function(t){if("-2147483648"===t)return zo;var e=ns(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Ta.charAt(Ta.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ka(t){return{type:"value",snapshotNode:t}}function Na(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Aa(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Pa(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ra=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){ci(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Aa(e,s)):ci(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Na(e,n)):o.trackChildChange(Pa(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(la,(function(t,r){e.hasChild(t)||n.trackChildChange(Aa(t,r))})),e.isLeafNode()||e.forEachChild(la,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Pa(e,r,i))}else n.trackChildChange(Na(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ga.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),xa=function(){function t(e){this.indexedFilter_=new Ra(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new zs(e,n))||(n=ga.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ga.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ga.EMPTY_NODE);var i=this;return e.forEachChild(la,(function(t,e){i.matches(new zs(t,e))||(r=r.updateImmediateChild(t,ga.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Da=function(){function t(t){this.rangedFilter_=new xa(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new zs(e,n))||(n=ga.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ga.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ga.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ga.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){s=i.getNext();!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ga.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;ci(a.numChildren()===this.limit_,"");var u=new zs(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var h=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Pa(e,n,h)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Aa(e,h));var d=a.updateImmediateChild(e,ga.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Na(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Aa(c.name,c.node)),i.trackChildChange(Na(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,ga.EMPTY_NODE)):t},t}(),Oa=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=la}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return ci(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return ci(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zo},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return ci(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return ci(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Go},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return ci(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===la},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function La(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Fa(t,e){var n=t.copy();return n.index_=e,n}function Ua(t){var e,n={};return t.isDefault()||(t.index_===la?e="$priority":t.index_===Ia?e="$value":t.index_===Ys?e="$key":(ci(t.index_ instanceof wa,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=xi(e),t.startSet_&&(n.startAt=xi(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+xi(t.indexStartName_))),t.endSet_&&(n.endAt=xi(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+xi(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function ja(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==la&&(e.i=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qa=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=Vo("p:rest:"),o.listens_={},o}return ti(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(ci(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=Ua(t._queryParams);this.restRequest_(s+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),Mi(o.listens_,a)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ua(t._queryParams),r=t._path.toString(),i=new gi;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=oi(i,2),s=o[0],a=o[1];s&&s.accessToken&&(e.auth=s.accessToken),a&&a.token&&(e.ac=a.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var t=null;if(c.status>=200&&c.status<300){try{t=Ri(c.responseText)}catch(jC){Wo("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,t)}else 401!==c.status&&404!==c.status&&Wo("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()}))},e}(Is),Va=function(){function t(){this.rootNode_=ga.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ba(){return{value:null,children:new Map}}function Ka(t,e,n){if(Os(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ks(e);t.children.has(r)||t.children.set(r,Ba()),Ka(t.children.get(r),e=As(e),n)}}function Wa(t,e){if(Os(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(la,(function(e,n){Ka(t,new Ss(e),n)})),Wa(t,e)}if(t.children.size>0){var r=ks(e);if(e=As(e),t.children.has(r))Wa(t.children.get(r),e)&&t.children.delete(r);return 0===t.children.size}return!0}function Ha(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,(function(t,r){Ha(r,new Ss(e.toString()+"/"+t),n)}))}var za,Ga,Qa=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=ei({},t);return this.last_&&Zo(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Ya=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Qa(t);var n=1e4+2e4*Math.random();is(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Zo(e,(function(e,i){i>0&&Oi(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),is(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Ga=za||(za={}))[Ga.OVERWRITE=0]="OVERWRITE",Ga[Ga.MERGE=1]="MERGE",Ga[Ga.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ga[Ga.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Xa,Ja=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=za.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(Os(this.path)){if(null!=this.affectedTree.value)return ci(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Ss(e));return new t(Cs(),n,this.revert)}return ci(ks(this.path)===e,"operationForChild called for unrelated child."),new t(As(this.path),this.affectedTree,this.revert)},t}(),Za=function(){function t(t,e){this.source=t,this.path=e,this.type=za.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return Os(this.path)?new t(this.source,Cs()):new t(this.source,As(this.path))},t}(),tu=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=za.OVERWRITE}return t.prototype.operationForChild=function(e){return Os(this.path)?new t(this.source,Cs(),this.snap.getImmediateChild(e)):new t(this.source,As(this.path),this.snap)},t}(),eu=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=za.MERGE}return t.prototype.operationForChild=function(e){if(Os(this.path)){var n=this.children.subtree(new Ss(e));return n.isEmpty()?null:n.value?new tu(this.source,Cs(),n.value):new t(this.source,Cs(),n)}return ci(ks(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,As(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),nu=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(Os(t))return this.isFullyInitialized()&&!this.filtered_;var e=ks(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ru=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t,e,n,r,i,o){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw li("Should only compare child_ events.");var r=new zs(e.childName,e.snapshotNode),i=new zs(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,n)})),s.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function ou(t,e){return{eventCache:t,serverCache:e}}function su(t,e,n,r){return ou(new nu(e,n,r),t.serverCache)}function au(t,e,n,r){return ou(t.eventCache,new nu(e,n,r))}function uu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function cu(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lu=function(){function t(t,e){void 0===e&&(Xa||(Xa=new Zs(Yo)),e=Xa),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return Zo(e,(function(t,e){n=n.set(new Ss(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Cs(),value:this.value};if(Os(t))return null;var n=ks(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(As(t),e);return null!=i?{path:Ds(new Ss(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(Os(e))return this;var n=ks(e),r=this.children.get(n);return null!==r?r.subtree(As(e)):new t(null)},t.prototype.set=function(e,n){if(Os(e))return new t(n,this.children);var r=ks(e),i=(this.children.get(r)||new t(null)).set(As(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(Os(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ks(e),r=this.children.get(n);if(r){var i=r.remove(As(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(Os(t))return this.value;var e=ks(t),n=this.children.get(e);return n?n.get(As(t)):null},t.prototype.setTree=function(e,n){if(Os(e))return n;var r=ks(e),i=(this.children.get(r)||new t(null)).setTree(As(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(Cs(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Ds(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Cs(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Os(t))return null;var i=ks(t),o=this.children.get(i);return o?o.findOnPath_(As(t),Ds(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Cs(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(Os(e))return this;this.value&&r(n,this.value);var i=ks(e),o=this.children.get(i);return o?o.foreachOnPath_(As(e),Ds(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(Cs(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(Ds(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),hu=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new lu(null))},t}();function fu(t,e,n){if(Os(e))return new hu(new lu(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Ms(i,e);return o=o.updateChild(s,n),new hu(t.writeTree_.set(i,o))}var a=new lu(n),u=t.writeTree_.setTree(e,a);return new hu(u)}function pu(t,e,n){var r=t;return Zo(n,(function(t,n){r=fu(r,Ds(e,t),n)})),r}function du(t,e){if(Os(e))return hu.empty();var n=t.writeTree_.setTree(e,new lu(null));return new hu(n)}function vu(t,e){return null!=gu(t,e)}function gu(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ms(n.path,e)):null}function yu(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(la,(function(t,n){e.push(new zs(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new zs(t,n.value))})),e}function mu(t,e){if(Os(e))return t;var n=gu(t,e);return new hu(null!=n?new lu(n):t.writeTree_.subtree(e))}function bu(t){return t.writeTree_.isEmpty()}function _u(t,e){return wu(Cs(),t.writeTree_,e)}function wu(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(ci(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=wu(Ds(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(Ds(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t,e){return Mu(e,t)}function Tu(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));ci(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,o=!1,s=t.allWrites.length-1;i&&s>=0;){var a=t.allWrites[s];a.visible&&(s>=n&&Eu(a,r.path)?i=!1:Us(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return function(t){t.visibleWrites=Cu(t.allWrites,Su,Cs()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=du(t.visibleWrites,r.path):Zo(r.children,(function(e){t.visibleWrites=du(t.visibleWrites,Ds(r.path,e))}));return!0}return!1}function Eu(t,e){if(t.snap)return Us(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Us(Ds(t.path,n),e))return!0;return!1}function Su(t){return t.visible}function Cu(t,e,n){for(var r=hu.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)Us(n,s)?r=fu(r,a=Ms(n,s),o.snap):Us(s,n)&&(a=Ms(s,n),r=fu(r,Cs(),o.snap.getChild(a)));else{if(!o.children)throw li("WriteRecord should have .snap or .children");if(Us(n,s))r=pu(r,a=Ms(n,s),o.children);else if(Us(s,n))if(Os(a=Ms(s,n)))r=pu(r,Cs(),o.children);else{var u=Mi(o.children,ks(a));if(u){var c=u.getChild(As(a));r=fu(r,Cs(),c)}}}}}return r}function ku(t,e,n,r,i){if(r||i){var o=mu(t.visibleWrites,e);if(!i&&bu(o))return n;if(i||null!=n||vu(o,Cs())){return _u(Cu(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Us(t.path,e)||Us(e,t.path))}),e),n||ga.EMPTY_NODE)}return null}var s=gu(t.visibleWrites,e);if(null!=s)return s;var a=mu(t.visibleWrites,e);return bu(a)?n:null!=n||vu(a,Cs())?_u(a,n||ga.EMPTY_NODE):null}function Nu(t,e,n,r){return ku(t.writeTree,t.treePath,e,n,r)}function Au(t,e){return function(t,e,n){var r=ga.EMPTY_NODE,i=gu(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(la,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=mu(t.visibleWrites,e);return n.forEachChild(la,(function(t,e){var n=_u(mu(o,new Ss(t)),e);r=r.updateImmediateChild(t,n)})),yu(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return yu(mu(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Pu(t,e,n,r){return function(t,e,n,r,i){ci(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=Ds(e,n);if(vu(t.visibleWrites,o))return null;var s=mu(t.visibleWrites,o);return bu(s)?i.getChild(n):_u(s,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function Ru(t,e){return function(t,e){return gu(t.visibleWrites,e)}(t.writeTree,Ds(t.treePath,e))}function xu(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=mu(t.visibleWrites,e),c=gu(u,Cs());if(null!=c)a=c;else{if(null==n)return[];a=_u(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=f.getNext();p&&l.length<i;)0!==h(p,r)&&l.push(p),p=f.getNext();return l}(t.writeTree,t.treePath,e,n,r,i,o)}function Du(t,e,n){return function(t,e,n,r){var i=Ds(e,n),o=gu(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?_u(mu(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Ou(t,e){return Mu(Ds(t.treePath,e),t.writeTree)}function Mu(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lu=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;ci("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),ci(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Pa(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Aa(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Na(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw li("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Pa(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Fu=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Uu=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new nu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Du(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:cu(this.viewCache_),i=xu(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t,e,n,r,i){var o,s,a=new Lu;if(n.type===za.OVERWRITE){var u=n;u.source.fromUser?o=Bu(t,e,u.path,u.snap,r,i,a):(ci(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.serverCache.isFiltered()&&!Os(u.path),o=Vu(t,e,u.path,u.snap,r,i,s,a))}else if(n.type===za.MERGE){var c=n;c.source.fromUser?o=function(t,e,n,r,i,o,s){var a=e;return r.foreach((function(r,u){var c=Ds(n,r);Ku(e,ks(c))&&(a=Bu(t,a,c,u,i,o,s))})),r.foreach((function(r,u){var c=Ds(n,r);Ku(e,ks(c))||(a=Bu(t,a,c,u,i,o,s))})),a}(t,e,c.path,c.children,r,i,a):(ci(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered(),o=Hu(t,e,c.path,c.children,r,i,s,a))}else if(n.type===za.ACK_USER_WRITE){var l=n;o=l.revert?function(t,e,n,r,i,o){var s;if(null!=Ru(r,n))return e;var a=new Uu(r,e,i),u=e.eventCache.getNode(),c=void 0;if(Os(n)||".priority"===ks(n)){var l=void 0;if(e.serverCache.isFullyInitialized())l=Nu(r,cu(e));else{var h=e.serverCache.getNode();ci(h instanceof ga,"serverChildren would be complete if leaf node"),l=Au(r,h)}l=l,c=t.filter.updateFullNode(u,l,o)}else{var f=ks(n),p=Du(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?t.filter.updateChild(u,f,p,As(n),a,o):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(u,f,ga.EMPTY_NODE,As(n),a,o):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Nu(r,cu(e))).isLeafNode()&&(c=t.filter.updateFullNode(c,s,o))}return s=e.serverCache.isFullyInitialized()||null!=Ru(r,Cs()),su(e,c,s,t.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,l.path,r,i,a):function(t,e,n,r,i,o,s){if(null!=Ru(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Os(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Vu(t,e,n,u.getNode().getChild(n),i,o,a,s);if(Os(n)){var c=new lu(null);return u.getNode().forEachChild(Ys,(function(t,e){c=c.set(new Ss(t),e)})),Hu(t,e,n,c,i,o,a,s)}return e}var l=new lu(null);return r.foreach((function(t,e){var r=Ds(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),Hu(t,e,n,l,i,o,a,s)}(t,e,l.path,l.affectedTree,r,i,a)}else{if(n.type!==za.LISTEN_COMPLETE)throw li("Unknown operation type: "+n.type);o=function(t,e,n,r,i){var o=e.serverCache,s=au(e,o.getNode(),o.isFullyInitialized()||Os(n),o.isFiltered());return qu(t,s,n,r,Fu,i)}(t,e,n.path,r,a)}var h=a.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=uu(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ka(uu(e)))}}(e,o,h),{viewCache:o,changes:h}}function qu(t,e,n,r,i,o){var s=e.eventCache;if(null!=Ru(r,n))return e;var a=void 0,u=void 0;if(Os(n))if(ci(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var c=cu(e),l=Au(r,c instanceof ga?c:ga.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{var h=Nu(r,cu(e));a=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{var f=ks(n);if(".priority"===f){ci(1===Ns(n),"Can't have a priority with additional path components");var p=s.getNode(),d=Pu(r,n,p,u=e.serverCache.getNode());a=null!=d?t.filter.updatePriority(p,d):s.getNode()}else{var v=As(n),g=void 0;if(s.isCompleteForChild(f)){u=e.serverCache.getNode();var y=Pu(r,n,s.getNode(),u);g=null!=y?s.getNode().getImmediateChild(f).updateChild(v,y):s.getNode().getImmediateChild(f)}else g=Du(r,f,e.serverCache);a=null!=g?t.filter.updateChild(s.getNode(),f,g,v,i,o):s.getNode()}}return su(e,a,s.isFullyInitialized()||Os(n),t.filter.filtersNodes())}function Vu(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(Os(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ks(n);if(!c.isCompleteForPath(n)&&Ns(n)>1)return e;var p=As(n),d=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?l.updatePriority(c.getNode(),d):l.updateChild(c.getNode(),f,d,p,Fu,null)}var v=au(e,u,c.isFullyInitialized()||Os(n),l.filtersNodes());return qu(t,v,n,i,new Uu(i,v,o),a)}function Bu(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Uu(i,e,o);if(Os(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=su(e,u,!0,t.filter.filtersNodes());else{var h=ks(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=su(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=As(n),p=c.getNode().getImmediateChild(h),d=void 0;if(Os(f))d=r;else{var v=l.getCompleteChild(h);d=null!=v?".priority"===Ps(f)&&v.getChild(xs(f)).isEmpty()?v:v.updateChild(f,r):ga.EMPTY_NODE}if(p.equals(d))a=e;else a=su(e,t.filter.updateChild(c.getNode(),h,d,f,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Ku(t,e){return t.eventCache.isCompleteForChild(e)}function Wu(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Hu(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=Os(n)?r:new lu(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Wu(0,e.serverCache.getNode().getImmediateChild(n),r);c=Vu(t,c,new Ss(n),u,i,o,s,a)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Wu(0,e.serverCache.getNode().getImmediateChild(n),r);c=Vu(t,c,new Ss(n),h,i,o,s,a)}})),c}var zu,Gu=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new Ra(r.getIndex()),o=(n=r).loadsAllData()?new Ra(n.getIndex()):n.hasLimit()?new Da(n):new xa(n);this.processor_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ga.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ga.EMPTY_NODE,a.getNode(),null),l=new nu(u,s.isFullyInitialized(),i.filtersNodes()),h=new nu(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=ou(h,l),this.eventGenerator_=new ru(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Qu(t,e){var n=cu(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Os(e)&&!n.getImmediateChild(ks(e)).isEmpty())?n.getChild(e):null}function Yu(t){return 0===t.eventRegistrations_.length}function $u(t,e,n){var r=[];if(n){ci(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var o=[],s=0;s<t.eventRegistrations_.length;++s){var a=t.eventRegistrations_[s];if(a.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(s+1));break}}else o.push(a)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function Xu(t,e,n,r){e.type===za.MERGE&&null!==e.source.queryId&&(ci(cu(t.viewCache_),"We should always have a full cache before handling merges"),ci(uu(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,s=t.viewCache_,a=ju(t.processor_,s,e,n,r);return i=t.processor_,o=a.viewCache,ci(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),ci(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),ci(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,Ju(t,a.changes,a.viewCache.eventCache.getNode(),null)}function Ju(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),iu(t,i,"child_removed",e,r,n),iu(t,i,"child_added",e,r,n),iu(t,i,"child_moved",o,r,n),iu(t,i,"child_changed",e,r,n),iu(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zu,tc=function(){this.views=new Map};function ec(t,e,n,r){var i,o,s=e.source.queryId;if(null!==s){var a=t.views.get(s);return ci(null!=a,"SyncTree gave us an op for an invalid query."),Xu(a,e,n,r)}var u=[];try{for(var c=ii(t.views.values()),l=c.next();!l.done;l=c.next()){a=l.value;u=u.concat(Xu(a,e,n,r))}}catch(h){i={error:h}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function nc(t,e,n,r,i){var o=e._queryIdentifier,s=t.views.get(o);if(!s){var a=Nu(n,i?r:null),u=!1;a?u=!0:r instanceof ga?(a=Au(n,r),u=!1):(a=ga.EMPTY_NODE,u=!1);var c=ou(new nu(a,u,!1),new nu(r,i,!1));return new Gu(e,c)}return s}function rc(t,e,n,r,i,o){var s=nc(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(la,(function(t,e){r.push(Na(t,e))})),n.isFullyInitialized()&&r.push(ka(n.getNode())),Ju(t,r,n.getNode(),e)}(s,n)}function ic(t,e,n,r){var i,o,s=e._queryIdentifier,a=[],u=[],c=cc(t);if("default"===s)try{for(var l=ii(t.views.entries()),h=l.next();!h.done;h=l.next()){var f=oi(h.value,2),p=f[0],d=f[1];u=u.concat($u(d,n,r)),Yu(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){i={error:v}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(d=t.views.get(s))&&(u=u.concat($u(d,n,r)),Yu(d)&&(t.views.delete(s),d.query._queryParams.loadsAllData()||a.push(d.query)));return c&&!cc(t)&&a.push(new(ci(zu,"Reference.ts has not been loaded"),zu)(e._repo,e._path)),{removed:a,events:u}}function oc(t){var e,n,r=[];try{for(var i=ii(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function sc(t,e){var n,r,i=null;try{for(var o=ii(t.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;i=i||Qu(a,e)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function ac(t,e){if(e._queryParams.loadsAllData())return lc(t);var n=e._queryIdentifier;return t.views.get(n)}function uc(t,e){return null!=ac(t,e)}function cc(t){return null!=lc(t)}function lc(t){var e,n;try{for(var r=ii(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hc=1,fc=function(t){this.listenProvider_=t,this.syncPointTree_=new lu(null),this.pendingWriteTree_={visibleWrites:hu.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function pc(t,e,n,r,i){return function(t,e,n,r,i){ci(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=fu(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?wc(t,new tu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function dc(t,e,n,r){!function(t,e,n,r){ci(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=pu(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=lu.fromObject(n);return wc(t,new eu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function vc(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(Tu(t.pendingWriteTree_,e)){var i=new lu(null);return null!=r.snap?i=i.set(Cs(),!0):Zo(r.children,(function(t){i=i.set(new Ss(t),!0)})),wc(t,new Ja(r.path,i,n))}return[]}function gc(t,e,n){return wc(t,new tu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function yc(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),s=[];if(o&&("default"===e._queryIdentifier||uc(o,e))){var a=ic(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),l=t.syncPointTree_.findOnPath(i,(function(t,e){return cc(e)}));if(c&&!l){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(t){return t.fold((function(t,e,n){if(e&&cc(e))return[lc(e)];var r=[];return e&&(r=oc(e)),Zo(n,(function(t,e){r=r.concat(e)})),r}))}(h),p=0;p<f.length;++p){var d=f[p],v=d.query,g=Ec(t,d);t.listenProvider_.startListening(Pc(v),Sc(t,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){t.listenProvider_.stopListening(Pc(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(Cc(e));t.listenProvider_.stopListening(Pc(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Cc(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return s}function mc(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Ms(t,r);i=i||sc(e,n),o=o||cc(e)}));var s,a=t.syncPointTree_.get(r);(a?(o=o||cc(a),i=i||sc(a,Cs())):(a=new tc,t.syncPointTree_=t.syncPointTree_.set(r,a)),null!=i)?s=!0:(s=!1,i=ga.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=sc(e,Cs());n&&(i=i.updateImmediateChild(t,n))})));var u=uc(a,e);if(!u&&!e._queryParams.loadsAllData()){var c=Cc(e);ci(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=hc++;t.queryToTagMap.set(c,l),t.tagToQueryMap.set(l,c)}var h=rc(a,e,n,Iu(t.pendingWriteTree_,r),i,s);if(!u&&!o){var f=ac(a,e);h=h.concat(function(t,e,n){var r=e._path,i=Sc(t,e),o=Ec(t,n),s=t.listenProvider_.startListening(Pc(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)ci(!cc(a.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!Os(t)&&e&&cc(e))return[lc(e).query];var r=[];return e&&(r=r.concat(oc(e).map((function(t){return t.query})))),Zo(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];t.listenProvider_.stopListening(Pc(l),Sc(t,l))}return s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,f))}return h}function bc(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=sc(n,Ms(t,e));if(r)return r}));return ku(r,e,i,n,!0)}function _c(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=Ms(t,n);r=r||sc(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||sc(i,Cs()):(i=new tc,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new nu(r,!0,!1):null;return function(t){return uu(t.viewCache_)}(nc(i,e,Iu(t.pendingWriteTree_,e._path),o?s.getNode():ga.EMPTY_NODE,o))}function wc(t,e){return Ic(e,t.syncPointTree_,null,Iu(t.pendingWriteTree_,Cs()))}function Ic(t,e,n,r){if(Os(t.path))return Tc(t,e,n,r);var i=e.get(Cs());null==n&&null!=i&&(n=sc(i,Cs()));var o=[],s=ks(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=Ou(r,s);o=o.concat(Ic(a,u,c,l))}return i&&(o=o.concat(ec(i,t,r,n))),o}function Tc(t,e,n,r){var i=e.get(Cs());null==n&&null!=i&&(n=sc(i,Cs()));var o=[];return e.children.inorderTraversal((function(e,i){var s=n?n.getImmediateChild(e):null,a=Ou(r,e),u=t.operationForChild(e);u&&(o=o.concat(Tc(u,i,s,a)))})),i&&(o=o.concat(ec(i,t,r,n))),o}function Ec(t,e){var n=e.query,r=Sc(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ga.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=kc(t,n);if(r){var i=Nc(r),o=i.path,s=i.queryId,a=Ms(o,e);return Ac(t,o,new Za($a(s),a))}return[]}(t,n._path,r):function(t,e){return wc(t,new Za({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return yc(t,n,null,i)}}}function Sc(t,e){var n=Cc(e);return t.queryToTagMap.get(n)}function Cc(t){return t._path.toString()+"$"+t._queryIdentifier}function kc(t,e){return t.tagToQueryMap.get(e)}function Nc(t){var e=t.indexOf("$");return ci(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ss(t.substr(0,e))}}function Ac(t,e,n){var r=t.syncPointTree_.get(e);return ci(r,"Missing sync point for query tag that we're tracking"),ec(r,n,Iu(t.pendingWriteTree_,e),null)}function Pc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ci(Zu,"Reference.ts has not been loaded"),Zu)(t._repo,t._path):t}var Rc=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),xc=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=Ds(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return bc(this.syncTree_,this.path_)},t}(),Dc=function(t,e,n){return t&&"object"==typeof t?(ci(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Oc(t[".sv"],e,n):"object"==typeof t[".sv"]?Mc(t[".sv"],e):void ci(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Oc=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ci(!1,"Unexpected server value: "+t)}},Mc=function(t,e,n){t.hasOwnProperty("increment")||ci(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&ci(!1,"Unexpected increment value: "+r);var i=e.node();if(ci(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},Lc=function(t,e,n,r){return Uc(e,new xc(n,t),r)},Fc=function(t,e,n){return Uc(t,new Rc(e),n)};function Uc(t,e,n){var r,i=t.getPriority().val(),o=Dc(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Dc(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new aa(a,ma(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new aa(o))),u.forEachChild(la,(function(t,i){var o=Uc(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jc=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function qc(t,e){for(var n=e instanceof Ss?e:new Ss(e),r=t,i=ks(n);null!==i;){var o=Mi(r.node.children,i)||{children:{},childCount:0};r=new jc(i,r,o),i=ks(n=As(n))}return r}function Vc(t){return t.node.value}function Bc(t,e){t.node.value=e,Gc(t)}function Kc(t){return t.node.childCount>0}function Wc(t,e){Zo(t.node.children,(function(n,r){e(new jc(n,t,r))}))}function Hc(t,e,n,r){n&&!r&&e(t),Wc(t,(function(t){Hc(t,e,!0,r)})),n&&r&&e(t)}function zc(t){return new Ss(null===t.parent?t.name:zc(t.parent)+"/"+t.name)}function Gc(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Vc(t)&&!Kc(t)}(n),i=Oi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Gc(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Gc(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.parent,t.name,t)}var Qc=/[\[\].#$\/\u0000-\u001F\u007F]/,Yc=/[\[\].#$\u0000-\u001F\u007F]/,$c=function(t){return"string"==typeof t&&0!==t.length&&!Qc.test(t)},Xc=function(t){return"string"==typeof t&&0!==t.length&&!Yc.test(t)},Jc=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Ho(t)||t&&"object"==typeof t&&Oi(t,".sv")},Zc=function(t,e,n,r){r&&void 0===e||tl(Ki(t,"value"),e,n)},tl=function(t,e,n){var r=n instanceof Ss?new js(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Vs(r));if("function"==typeof e)throw new Error(t+"contains a function "+Vs(r)+" with contents = "+e.toString());if(Ho(e))throw new Error(t+"contains "+e.toString()+" "+Vs(r));if("string"==typeof e&&e.length>10485760/3&&zi(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Vs(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Zo(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!$c(e)))throw new Error(t+" contains an invalid key ("+e+") "+Vs(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,a;a=e,(s=r).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(a),s.byteLength_+=zi(a),qs(s),tl(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=zi(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),i&&o)throw new Error(t+' contains ".value" child '+Vs(r)+" in addition to actual children.")}},el=function(t,e,n,r){if(!r||void 0!==e){var i=Ki(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];Zo(e,(function(t,e){var r=new Ss(t);if(tl(i,e,Ds(n,r)),".priority"===Ps(r)&&!Jc(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Rs(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!$c(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ls);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Us(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,o)}},nl=function(t,e,n){if(!n||void 0!==e){if(Ho(e))throw new Error(Ki(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Jc(e))throw new Error(Ki(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rl=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ki(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},il=function(t,e,n,r){if(!(r&&void 0===n||$c(n)))throw new Error(Ki(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ol=function(t,e,n,r){if(!(r&&void 0===n||Xc(n)))throw new Error(Ki(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},sl=function(t,e){if(".info"===ks(e))throw new Error(t+" failed = Can't modify data under /.info/")},al=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!$c(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Xc(t)}(n))throw new Error(Ki(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ul=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Ki(t,e)+"must be a boolean.")},cl=function(){this.eventLists_=[],this.recursionDepth_=0};function ll(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Fs(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function hl(t,e,n){ll(t,n),pl(t,(function(t){return Fs(t,e)}))}function fl(t,e,n){ll(t,n),pl(t,(function(t){return Us(t,e)||Us(e,t)}))}function pl(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(dl(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function dl(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();Fo&&qo("event: "+n.toString()),rs(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vl=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ba(),this.transactionQueueTree_=new jc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function gl(t,e,n){if(t.stats_=ds(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new qa(t.repoInfo_,(function(e,n,r,i){bl(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return _l(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xi(n)}catch(jC){throw new Error("Invalid authOverride provided: "+jC)}}t.persistentConnection_=new Hs(t.repoInfo_,e,(function(e,n,r,i){bl(t,e,n,r,i)}),(function(e){_l(t,e)}),(function(e){!function(t,e){Zo(e,(function(e,n){wl(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=t.repoInfo_,i=function(){return new Ya(t.stats_,t.server_)},o=r.toString(),ps[o]||(ps[o]=i()),ps[o]),t.infoData_=new Va,t.infoSyncTree_=new fc({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=gc(t.infoSyncTree_,e._path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),wl(t,"connected",!1),t.serverSyncTree_=new fc({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);fl(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function yl(t){var e=t.infoData_.getNode(new Ss(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ml(t){return(e=(e={timestamp:yl(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function bl(t,e,n,r,i){t.dataUpdateCount++;var o=new Ss(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(i)if(r){var a=Fi(n,(function(t){return ma(t)}));s=function(t,e,n,r){var i=kc(t,r);if(i){var o=Nc(i),s=o.path,a=o.queryId,u=Ms(s,e),c=lu.fromObject(n);return Ac(t,s,new eu($a(a),u,c))}return[]}(t.serverSyncTree_,o,a,i)}else{var u=ma(n);s=function(t,e,n,r){var i=kc(t,r);if(null!=i){var o=Nc(i),s=o.path,a=o.queryId,u=Ms(s,e);return Ac(t,s,new tu($a(a),u,n))}return[]}(t.serverSyncTree_,o,u,i)}else if(r){var c=Fi(n,(function(t){return ma(t)}));s=function(t,e,n){var r=lu.fromObject(n);return wc(t,new eu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,c)}else{var l=ma(n);s=gc(t.serverSyncTree_,o,l)}var h=o;s.length>0&&(h=xl(t,o)),fl(t.eventQueue_,h,s)}function _l(t,e){wl(t,"connected",e),!1===e&&function(t){Nl(t,"onDisconnectEvents");var e=ml(t),n=Ba();Ha(t.onDisconnect_,Cs(),(function(r,i){var o=Lc(r,i,t.serverSyncTree_,e);Ka(n,r,o)}));var r=[];Ha(n,Cs(),(function(e,n){r=r.concat(gc(t.serverSyncTree_,e,n));var i=Fl(t,e);xl(t,i)})),t.onDisconnect_=Ba(),fl(t.eventQueue_,Cs(),r)}(t)}function wl(t,e,n){var r=new Ss("/.info/"+e),i=ma(n);t.infoData_.updateSnapshot(r,i);var o=gc(t.infoSyncTree_,r,i);fl(t.eventQueue_,r,o)}function Il(t){return t.nextWriteId_++}function Tl(t,e,n,r,i){Nl(t,"set",{path:e.toString(),value:n,priority:r});var o=ml(t),s=ma(n,r),a=bc(t.serverSyncTree_,e),u=Fc(s,a,o),c=Il(t),l=pc(t.serverSyncTree_,e,u,c,!0);ll(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),(function(n,r){var o="ok"===n;o||Wo("set at "+e+" failed: "+n);var s=vc(t.serverSyncTree_,c,!o);fl(t.eventQueue_,e,s),Al(t,i,n,r)}));var h=Fl(t,e);xl(t,h),fl(t.eventQueue_,h,[])}function El(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&Wa(t.onDisconnect_,e),Al(t,n,r,i)}))}function Sl(t,e,n,r){var i=ma(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Ka(t.onDisconnect_,e,i),Al(t,r,n,o)}))}function Cl(t,e,n){var r;r=".info"===ks(e._path)?yc(t.infoSyncTree_,e,n):yc(t.serverSyncTree_,e,n),hl(t.eventQueue_,e._path,r)}function kl(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function Nl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),qo.apply(void 0,si([r],oi(e)))}function Al(t,e,n,r){e&&rs((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function Pl(t,e,n){return bc(t.serverSyncTree_,e,n)||ga.EMPTY_NODE}function Rl(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||Ll(t,e),Vc(e)){var n=Ol(t,e);ci(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=Pl(t,e,r),o=i,s=i.hash(),a=0;a<n.length;a++){var u=n[a];ci(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Ms(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=e;t.server_.put(h.toString(),l,(function(r){Nl(t,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(vc(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},a=0;a<n.length;a++)s(a);Ll(t,qc(t.transactionQueueTree_,e)),Rl(t,t.transactionQueueTree_),fl(t.eventQueue_,e,i);for(a=0;a<o.length;a++)rs(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else{Wo("transaction at "+h.toString()+" failed: "+r);for(a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r}xl(t,e)}}),s)}(t,zc(e),n)}else Kc(e)&&Wc(e,(function(e){Rl(t,e)}))}function xl(t,e){var n=Dl(t,e),r=zc(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),s=function(s){var a,u,c=e[s],l=Ms(n,c.path),h=!1;if(ci(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,a=c.abortReason,i=i.concat(vc(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,a="maxretry",i=i.concat(vc(t.serverSyncTree_,c.currentWriteId,!0));else{var f=Pl(t,c.path,o);c.currentInputSnapshot=f;var p=e[s].update(f.val());if(void 0!==p){tl("transaction failed: Data returned ",p,c.path);var d=ma(p);"object"==typeof p&&null!=p&&Oi(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=c.currentWriteId,g=ml(t),y=Fc(d,f,g);c.currentOutputSnapshotRaw=d,c.currentOutputSnapshotResolved=y,c.currentWriteId=Il(t),o.splice(o.indexOf(v),1),i=(i=i.concat(pc(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(vc(t.serverSyncTree_,v,!0))}else h=!0,a="nodata",i=i.concat(vc(t.serverSyncTree_,c.currentWriteId,!0))}fl(t.eventQueue_,n,i),i=[],h&&(e[s].status=2,u=e[s].unwatcher,setTimeout(u,Math.floor(0)),e[s].onComplete&&("nodata"===a?r.push((function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)})):r.push((function(){return e[s].onComplete(new Error(a),!1,null)}))))},a=0;a<e.length;a++)s(a);Ll(t,t.transactionQueueTree_);for(a=0;a<r.length;a++)rs(r[a]);Rl(t,t.transactionQueueTree_)}(t,Ol(t,n),r),r}function Dl(t,e){var n,r=t.transactionQueueTree_;for(n=ks(e);null!==n&&void 0===Vc(r);)r=qc(r,n),n=ks(e=As(e));return r}function Ol(t,e){var n=[];return Ml(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function Ml(t,e,n){var r=Vc(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Wc(e,(function(e){Ml(t,e,n)}))}function Ll(t,e){var n=Vc(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Bc(e,n.length>0?n:void 0)}Wc(e,(function(e){Ll(t,e)}))}function Fl(t,e){var n=zc(Dl(t,e)),r=qc(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){Ul(t,e)})),Ul(t,r),Hc(r,(function(e){Ul(t,e)})),n}function Ul(t,e){var n=Vc(e);if(n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(ci(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(ci(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(vc(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Bc(e,void 0):n.length=o+1,fl(t.eventQueue_,zc(e),i);for(s=0;s<r.length;s++)rs(r[s])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jl=function(t,e){var n=ql(t),r=n.namespace;"firebase.com"===n.domain&&Ko(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ko("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Wo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new cs(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new Ss(n.pathString)}},ql=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(jC){}e+="/"+i}return e}(t.substring(l,h)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=ii(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Wo("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));(c=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Vl=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+xi(this.snapshot.exportVal())},t}(),Bl=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Kl=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return ci(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Wl=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new gi;return El(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){sl("OnDisconnect.remove",this._path);var t=new gi;return Sl(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){sl("OnDisconnect.set",this._path),Zc("OnDisconnect.set",t,this._path,!1);var e=new gi;return Sl(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){sl("OnDisconnect.setWithPriority",this._path),Zc("OnDisconnect.setWithPriority",t,this._path,!1),nl("OnDisconnect.setWithPriority",e,!1);var n=new gi;return function(t,e,n,r,i){var o=ma(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Ka(t.onDisconnect_,e,o),Al(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){sl("OnDisconnect.update",this._path),el("OnDisconnect.update",t,this._path,!1);var e=new gi;return function(t,e,n,r){if(Li(n))return qo("onDisconnect().update() called with empty data.  Don't do anything."),void Al(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&Zo(n,(function(n,r){var i=ma(r);Ka(t.onDisconnect_,Ds(e,n),i)})),Al(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),Hl=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return Os(this._path)?null:Ps(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Yl(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=ja(this._queryParams),e=Xo(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return ja(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Qi(e))instanceof t))return!1;var n=this._repo===e._repo,r=Fs(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function zl(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Gl(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ys){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==zo)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Go)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===la){if(null!=e&&!Jc(e)||null!=n&&!Jc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ci(t.getIndex()instanceof wa||t.getIndex()===Ia,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ql(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Yl=function(t){function e(e,n){return t.call(this,e,n,new Oa,!1)||this}return ti(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=xs(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Hl),$l=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new Ss(e),r=Zl(this.ref,e);return new t(this._node.getChild(n),r,la)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,Zl(n.ref,r),la))}))},t.prototype.hasChild=function(t){var e=new Ss(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Xl(t,e){return(t=Qi(t))._checkNotDeleted("ref"),void 0!==e?Zl(t._root,e):t._root}function Jl(t,e){(t=Qi(t))._checkNotDeleted("refFromURL");var n=jl(e,t._repo.repoInfo_.nodeAdmin);al("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||Ko("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Xl(t,n.path.toString())}function Zl(t,e){var n,r,i,o;return null===ks((t=Qi(t))._path)?(n="child",r="path",o=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ol(n,r,i,o)):ol("child","path",e,!1),new Yl(t._repo,Ds(t._path,e))}function th(t,e){t=Qi(t),sl("push",t._path),Zc("push",e,t._path,!0);var n,r=yl(t._repo),i=Ea(r),o=Zl(t,i),s=Zl(t,i);return n=null!=e?nh(s,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function eh(t){return sl("remove",t._path),nh(t,null)}function nh(t,e){t=Qi(t),sl("set",t._path),Zc("set",e,t._path,!1);var n=new gi;return Tl(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function rh(t,e){t=Qi(t),sl("setPriority",t._path),nl("setPriority",e,!1);var n=new gi;return Tl(t._repo,Ds(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function ih(t,e,n){if(sl("setWithPriority",t._path),Zc("setWithPriority",e,t._path,!1),nl("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new gi;return Tl(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function oh(t,e){el("update",e,t._path,!1);var n=new gi;return function(t,e,n,r){Nl(t,"update",{path:e.toString(),value:n});var i=!0,o=ml(t),s={};if(Zo(n,(function(n,r){i=!1,s[n]=Lc(Ds(e,n),ma(r),t.serverSyncTree_,o)})),i)qo("update() called with empty data.  Don't do anything."),Al(0,r,"ok",void 0);else{var a=Il(t),u=dc(t.serverSyncTree_,e,s,a);ll(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||Wo("update at "+e+" failed: "+n);var s=vc(t.serverSyncTree_,a,!o),u=s.length>0?xl(t,e):e;fl(t.eventQueue_,u,s),Al(0,r,n,i)})),Zo(n,(function(n){var r=Fl(t,Ds(e,n));xl(t,r)})),fl(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function sh(t){return function(t,e){var n=_c(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=ma(n).withIndex(e._queryParams.getIndex()),i=gc(t.serverSyncTree_,e._path,r);return hl(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return Nl(t,"get for query "+xi(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=Qi(t))._repo,t).then((function(e){return new $l(e,new Yl(t._repo,t._path),t._queryParams.getIndex())}))}var ah=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Vl("value",this,new $l(t.snapshotNode,new Yl(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Bl(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),uh=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Bl(this,t,e):null},t.prototype.createEvent=function(t,e){ci(null!=t.childName,"Child events should have a childName.");var n=Zl(new Yl(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Vl(t.type,this,new $l(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function ch(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){Cl(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Kl(n,o||void 0),c="value"===e?new ah(u):new uh(e,u);return function(t,e,n){var r;r=".info"===ks(e._path)?mc(t.infoSyncTree_,e,n):mc(t.serverSyncTree_,e,n),hl(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return Cl(t._repo,t,c)}}function lh(t,e,n,r){return ch(t,"value",e,n,r)}function hh(t,e,n,r){return ch(t,"child_added",e,n,r)}function fh(t,e,n,r){return ch(t,"child_changed",e,n,r)}function ph(t,e,n,r){return ch(t,"child_moved",e,n,r)}function dh(t,e,n,r){return ch(t,"child_removed",e,n,r)}function vh(t,e,n){var r=null,i=n?new Kl(n):null;"value"===e?r=new ah(i):e&&(r=new uh(e,i)),Cl(t._repo,t,r)}var gh=function(){},yh=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ti(e,t),e.prototype._apply=function(t){Zc("endAt",this._value,t._path,!0);var e=La(t._queryParams,this._value,this._key);if(Ql(e),Gl(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Hl(t._repo,t._path,e,t._orderByCalled)},e}(gh);function mh(t,e){return il("endAt","key",e,!0),new yh(t,e)}var bh=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ti(e,t),e.prototype._apply=function(t){Zc("endBefore",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===Ys?("string"==typeof n&&(n=Ca(n)),i=La(e,n,r)):i=La(e,n,null==r?zo:Ca(r)),i.endBeforeSet_=!0,i);if(Ql(o),Gl(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Hl(t._repo,t._path,o,t._orderByCalled)},e}(gh);function _h(t,e){return il("endBefore","key",e,!0),new bh(t,e)}var wh=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ti(e,t),e.prototype._apply=function(t){Zc("startAt",this._value,t._path,!0);var e=Ma(t._queryParams,this._value,this._key);if(Ql(e),Gl(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Hl(t._repo,t._path,e,t._orderByCalled)},e}(gh);function Ih(t,e){return void 0===t&&(t=null),il("startAt","key",e,!0),new wh(t,e)}var Th=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ti(e,t),e.prototype._apply=function(t){Zc("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===Ys?("string"==typeof e&&(e=Sa(e)),r=Ma(t,e,n)):r=Ma(t,e,null==n?Go:Sa(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Ql(e),Gl(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Hl(t._repo,t._path,e,t._orderByCalled)},e}(gh);function Eh(t,e){return il("startAfter","key",e,!0),new Th(t,e)}var Sh=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return ti(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Hl(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(gh);function Ch(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Sh(t)}var kh=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return ti(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Hl(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(gh);function Nh(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kh(t)}var Ah=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return ti(e,t),e.prototype._apply=function(t){zl(t,"orderByChild");var e=new Ss(this._path);if(Os(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new wa(e),r=Fa(t._queryParams,n);return Gl(r),new Hl(t._repo,t._path,r,!0)},e}(gh);function Ph(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ol("orderByChild","path",t,!1),new Ah(t)}var Rh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype._apply=function(t){zl(t,"orderByKey");var e=Fa(t._queryParams,Ys);return Gl(e),new Hl(t._repo,t._path,e,!0)},e}(gh);function xh(){return new Rh}var Dh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype._apply=function(t){zl(t,"orderByPriority");var e=Fa(t._queryParams,la);return Gl(e),new Hl(t._repo,t._path,e,!0)},e}(gh);function Oh(){return new Dh}var Mh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype._apply=function(t){zl(t,"orderByValue");var e=Fa(t._queryParams,Ia);return Gl(e),new Hl(t._repo,t._path,e,!0)},e}(gh);function Lh(){return new Mh}var Fh=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ti(e,t),e.prototype._apply=function(t){if(Zc("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yh(this._value,this._key)._apply(new wh(this._value,this._key)._apply(t))},e}(gh);function Uh(t,e){return il("equalTo","key",e,!0),new Fh(t,e)}function jh(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=Qi(t);try{for(var s=ii(r),a=s.next();!a.done;a=s.next()){var u=a.value;o=u._apply(o)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o}!function(t){ci(!zu,"__referenceConstructor has already been defined"),zu=t}(Yl),function(t){ci(!Zu,"__referenceConstructor has already been defined"),Zu=t}(Yl);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var qh={},Vh=!1;function Bh(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||Ko("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qo("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=jl(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,o="http://"+c+"?ns="+u.namespace,u=(a=jl(o,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new as(as.OWNER):new ss(t.name,t.options,e);al("Invalid Firebase Database URL",a),Os(a.path)||Ko("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=qh[e.name];i||(i={},qh[e.name]=i);var o=i[t.toURLString()];o&&Ko("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new vl(t,Vh,n,r),i[t.toURLString()]=o,o}(u,t,l,new os(t.name,n));return new Kh(h,t)}var Kh=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(gl(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Yl(this._repo,Cs())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,e=this.app.name,(n=qh[e])&&n[t.key]===t||Ko("Database "+e+"("+t.repoInfo_+") has already been deleted."),kl(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&Ko("Cannot call "+t+" on a deleted database.")},t}();function Wh(t,e,n,r){void 0===r&&(r={}),(t=Qi(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Ko("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ko('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new as(as.OWNER);else if(r.mockUserToken){var s=yi(r.mockUserToken,t.app.options.projectId);o=new as(s)}!function(t,e,n,r){t.repoInfo_=new cs(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,o)}function Hh(t){(t=Qi(t))._checkNotDeleted("goOffline"),kl(t._repo)}function zh(t){var e;(t=Qi(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gh={".sv":"timestamp"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qh=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Yh(t,e,n){var r;if(t=Qi(t),sl("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new gi,s=lh(t,(function(){}));return function(t,e,n,r,i,o){Nl(t,"transaction on "+e);var s={path:e,update:n,onComplete:r,status:null,order:Oo(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Pl(t,e,void 0);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{tl("transaction failed: Data returned ",u,s.path),s.status=0;var c=qc(t.transactionQueueTree_,e),l=Vc(c)||[];l.push(s),Bc(c,l);var h=void 0;"object"==typeof u&&null!==u&&Oi(u,".priority")?(h=Mi(u,".priority"),ci(Jc(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(bc(t.serverSyncTree_,e)||ga.EMPTY_NODE).getPriority().val();var f=ml(t),p=ma(u,h),d=Fc(p,a,f);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=d,s.currentWriteId=Il(t);var v=pc(t.serverSyncTree_,e,d,s.currentWriteId,s.applyLocally);fl(t.eventQueue_,e,v),Rl(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?o.reject(e):(i=new $l(r,new Yl(t._repo,t._path),la),o.resolve(new Qh(n,i)))}),s,i),o.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $h=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Bi("OnDisconnect.cancel",0,1,arguments.length),Wi("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Bi("OnDisconnect.remove",0,1,arguments.length),Wi("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Bi("OnDisconnect.set",1,2,arguments.length),Wi("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Bi("OnDisconnect.setWithPriority",2,3,arguments.length),Wi("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Bi("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Wo("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wi("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Xh=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Bi("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Jh=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Bi("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Bi("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Bi("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Bi("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Bi("DataSnapshot.child",0,1,arguments.length),e=String(e),ol("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Bi("DataSnapshot.hasChild",1,1,arguments.length),ol("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Bi("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Bi("DataSnapshot.forEach",1,1,arguments.length),Wi("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Bi("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Bi("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Bi("DataSnapshot.ref",0,0,arguments.length),new tf(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Zh=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var o,s=this;Bi("Query.on",2,4,arguments.length),Wi("Query.on","callback",n,!1);var a=t.getCancelAndContextArgs_("Query.on",r,i),u=function(t,e){n.call(a.context,new Jh(s.database,t),e)};u.userCallback=n,u.context=a.context;var c=null===(o=a.cancel)||void 0===o?void 0:o.bind(a.context);switch(e){case"value":return lh(this._delegate,u,c),n;case"child_added":return hh(this._delegate,u,c),n;case"child_removed":return dh(this._delegate,u,c),n;case"child_changed":return fh(this._delegate,u,c),n;case"child_moved":return ph(this._delegate,u,c),n;default:throw new Error(Ki("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Bi("Query.off",0,3,arguments.length),rl("Query.off",t,!0),Wi("Query.off","callback",e,!0),Hi("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,vh(this._delegate,t,r)}else vh(this._delegate,t)},t.prototype.get=function(){var t=this;return sh(this._delegate).then((function(e){return new Jh(t.database,e)}))},t.prototype.once=function(e,n,r,i){var o=this;Bi("Query.once",1,4,arguments.length),Wi("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=new gi,u=function(t,e){var r=new Jh(o.database,t);n&&n.call(s.context,r,e),a.resolve(r)};u.userCallback=n,u.context=s.context;var c=function(t){s.cancel&&s.cancel.call(s.context,t),a.reject(t)};switch(e){case"value":lh(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":hh(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":dh(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":fh(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":ph(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(Ki("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return a.promise},t.prototype.limitToFirst=function(e){return Bi("Query.limitToFirst",1,1,arguments.length),new t(this.database,jh(this._delegate,Ch(e)))},t.prototype.limitToLast=function(e){return Bi("Query.limitToLast",1,1,arguments.length),new t(this.database,jh(this._delegate,Nh(e)))},t.prototype.orderByChild=function(e){return Bi("Query.orderByChild",1,1,arguments.length),new t(this.database,jh(this._delegate,Ph(e)))},t.prototype.orderByKey=function(){return Bi("Query.orderByKey",0,0,arguments.length),new t(this.database,jh(this._delegate,xh()))},t.prototype.orderByPriority=function(){return Bi("Query.orderByPriority",0,0,arguments.length),new t(this.database,jh(this._delegate,Oh()))},t.prototype.orderByValue=function(){return Bi("Query.orderByValue",0,0,arguments.length),new t(this.database,jh(this._delegate,Lh()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Bi("Query.startAt",0,2,arguments.length),new t(this.database,jh(this._delegate,Ih(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Bi("Query.startAfter",0,2,arguments.length),new t(this.database,jh(this._delegate,Eh(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Bi("Query.endAt",0,2,arguments.length),new t(this.database,jh(this._delegate,mh(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Bi("Query.endBefore",0,2,arguments.length),new t(this.database,jh(this._delegate,_h(e,n)))},t.prototype.equalTo=function(e,n){return Bi("Query.equalTo",1,2,arguments.length),new t(this.database,jh(this._delegate,Uh(e,n)))},t.prototype.toString=function(){return Bi("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Bi("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Bi("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Wi(t,"cancel",r.cancel,!0),r.context=n,Hi(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Ki(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new tf(this.database,new Yl(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),tf=function(t){function e(e,n){var r=t.call(this,e,new Hl(n._repo,n._path,new Oa,!1))||this;return r.database=e,r._delegate=n,r}return ti(e,t),e.prototype.getKey=function(){return Bi("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Bi("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Zl(this._delegate,t))},e.prototype.getParent=function(){Bi("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Bi("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Bi("Reference.set",1,2,arguments.length),Wi("Reference.set","onComplete",e,!0);var n=nh(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Bi("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Wo("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}sl("Reference.update",this._delegate._path),Wi("Reference.update","onComplete",e,!0);var i=oh(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){Bi("Reference.setWithPriority",2,3,arguments.length),Wi("Reference.setWithPriority","onComplete",n,!0);var r=ih(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Bi("Reference.remove",0,1,arguments.length),Wi("Reference.remove","onComplete",t,!0);var e=eh(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Bi("Reference.transaction",1,3,arguments.length),Wi("Reference.transaction","transactionUpdate",t,!1),Wi("Reference.transaction","onComplete",e,!0),ul("Reference.transaction","applyLocally",n,!0);var i=Yh(this._delegate,t,{applyLocally:n}).then((function(t){return new Xh(t.committed,new Jh(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){Bi("Reference.setPriority",1,2,arguments.length),Wi("Reference.setPriority","onComplete",e,!0);var n=rh(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Bi("Reference.push",0,2,arguments.length),Wi("Reference.push","onComplete",n,!0);var i=th(this._delegate,t),o=i.then((function(t){return new e(r.database,t)}));n&&o.then((function(){return n(null)}),(function(t){return n(t)}));var s=new e(this.database,i);return s.then=o.then.bind(o),s.catch=o.catch.bind(o,void 0),s},e.prototype.onDisconnect=function(){return sl("Reference.onDisconnect",this._delegate._path),new $h(new Wl(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zh),ef=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Wh(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Bi("database.ref",0,1,arguments.length),t instanceof tf){var e=Jl(this._delegate,t.toString());return new tf(this,e)}e=Xl(this._delegate,t);return new tf(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Bi(e,1,1,arguments.length);var n=Jl(this._delegate,t);return new tf(this,n)},t.prototype.goOffline=function(){return Bi("database.goOffline",0,0,arguments.length),Hh(this._delegate)},t.prototype.goOnline=function(){return Bi("database.goOnline",0,0,arguments.length),zh(this._delegate)},t.ServerValue={TIMESTAMP:Gh,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nf=Object.freeze({__proto__:null,forceLongPolling:function(){bs.forceDisallow(),gs.forceAllow()},forceWebSockets:function(){gs.forceDisallow()},isWebSocketsAvailable:function(){return bs.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Qa(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);Zo(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;Co(r);var u=new $i("auth-internal",new Ji("database-standalone"));return u.setComponent(new Yi("auth-internal",(function(){return i}),"PRIVATE")),{instance:new ef(Bh(e,u,void 0,n,a),e),namespace:o}}}),rf=Hs;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Hs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var of,sf=ws,af=cs,uf=Object.freeze({__proto__:null,DataConnection:rf,RealTimeConnection:sf,hijackHash:function(t){var e=Hs.prototype.put;return Hs.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Hs.prototype.put=e}},ConnectionTarget:af,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Vh=t}(t)}}),cf=ef.ServerValue;Co((of=Eo).SDK_VERSION),of.INTERNAL.registerComponent(new Yi("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new ef(Bh(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:tf,Query:Zh,Database:ef,DataSnapshot:Jh,enableLogging:jo,INTERNAL:nf,ServerValue:cf,TEST_ACCESS:uf}).setMultipleInstances(!0)),of.registerVersion("@firebase/database","0.10.7");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var lf=function(t,e){return(lf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function hf(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ff,pf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},df=df||{},vf=pf||self;function gf(){}function yf(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function mf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var bf="closure_uid_"+(1e9*Math.random()>>>0),_f=0;function wf(t,e,n){return t.call.apply(t.bind,arguments)}function If(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Tf(t,e,n){return(Tf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wf:If).apply(null,arguments)}function Ef(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Sf(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Cf(){this.s=this.s,this.o=this.o}var kf={};Cf.prototype.s=!1,Cf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,bf)&&t[bf]||(t[bf]=++_f)}(this);delete kf[t]}},Cf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Nf=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Af=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Pf(t){return Array.prototype.concat.apply([],arguments)}function Rf(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function xf(t){return/^[\s\xa0]*$/.test(t)}var Df,Of=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Mf(t,e){return-1!=t.indexOf(e)}function Lf(t,e){return t<e?-1:t>e?1:0}t:{var Ff=vf.navigator;if(Ff){var Uf=Ff.userAgent;if(Uf){Df=Uf;break t}}Df=""}function jf(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function qf(t){var e={};for(var n in t)e[n]=t[n];return e}var Vf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bf(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Vf.length;o++)n=Vf[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Kf(t){return Kf[" "](t),t}Kf[" "]=gf;var Wf,Hf,zf=Mf(Df,"Opera"),Gf=Mf(Df,"Trident")||Mf(Df,"MSIE"),Qf=Mf(Df,"Edge"),Yf=Qf||Gf,$f=Mf(Df,"Gecko")&&!(Mf(Df.toLowerCase(),"webkit")&&!Mf(Df,"Edge"))&&!(Mf(Df,"Trident")||Mf(Df,"MSIE"))&&!Mf(Df,"Edge"),Xf=Mf(Df.toLowerCase(),"webkit")&&!Mf(Df,"Edge");function Jf(){var t=vf.document;return t?t.documentMode:void 0}t:{var Zf="",tp=(Hf=Df,$f?/rv:([^\);]+)(\)|;)/.exec(Hf):Qf?/Edge\/([\d\.]+)/.exec(Hf):Gf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Hf):Xf?/WebKit\/(\S+)/.exec(Hf):zf?/(?:Version)[ \/]?(\S+)/.exec(Hf):void 0);if(tp&&(Zf=tp?tp[1]:""),Gf){var ep=Jf();if(null!=ep&&ep>parseFloat(Zf)){Wf=String(ep);break t}}Wf=Zf}var np,rp={};function ip(){return function(t){var e=rp;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Of(String(Wf)).split("."),n=Of("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Lf(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Lf(0==o[2].length,0==s[2].length)||Lf(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(vf.document&&Gf){var op=Jf();np=op||(parseInt(Wf,10)||void 0)}else np=void 0;var sp=np,ap=function(){if(!vf.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{vf.addEventListener("test",gf,e),vf.removeEventListener("test",gf,e)}catch(n){}return t}();function up(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function cp(t,e){if(up.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if($f){t:{try{Kf(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:lp[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&cp.Z.h.call(this)}}up.prototype.h=function(){this.defaultPrevented=!0},Sf(cp,up);var lp={2:"touch",3:"pen",4:"mouse"};cp.prototype.h=function(){cp.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var hp="closure_listenable_"+(1e6*Math.random()|0),fp=0;function pp(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++fp,this.ca=this.fa=!1}function dp(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function vp(t){this.src=t,this.g={},this.h=0}function gp(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Nf(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(dp(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function yp(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}vp.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=yp(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new pp(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var mp="closure_lm_"+(1e6*Math.random()|0),bp={};function _p(t,e,n,r,i){if(r&&r.once)return Ip(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_p(t,e[o],n,r,i);return null}return n=Ap(n),t&&t[hp]?t.N(e,n,mf(r)?!!r.capture:!!r,i):wp(t,e,n,!1,r,i)}function wp(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=mf(i)?!!i.capture:!!i,a=kp(t);if(a||(t[mp]=a=new vp(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Cp;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ap||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Sp(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ip(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ip(t,e[o],n,r,i);return null}return n=Ap(n),t&&t[hp]?t.O(e,n,mf(r)?!!r.capture:!!r,i):wp(t,e,n,!0,r,i)}function Tp(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Tp(t,e[o],n,r,i);else r=mf(r)?!!r.capture:!!r,n=Ap(n),t&&t[hp]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=yp(o=t.g[e],n,r,i))&&(dp(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=kp(t))&&(e=t.g[e.toString()],t=-1,e&&(t=yp(e,n,r,i)),(n=-1<t?e[t]:null)&&Ep(n))}function Ep(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[hp])gp(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Sp(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kp(e))?(gp(n,t),0==n.h&&(n.src=null,e[mp]=null)):dp(t)}}}function Sp(t){return t in bp?bp[t]:bp[t]="on"+t}function Cp(t,e){if(t.ca)t=!0;else{e=new cp(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ep(t),t=n.call(r,e)}return t}function kp(t){return(t=t[mp])instanceof vp?t:null}var Np="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ap(t){return"function"==typeof t?t:(t[Np]||(t[Np]=function(e){return t.handleEvent(e)}),t[Np])}function Pp(){Cf.call(this),this.i=new vp(this),this.P=this,this.I=null}function Rp(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new up(e,t);else if(e instanceof up)e.target=e.target||t;else{var i=e;Bf(e=new up(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=xp(s,r,!0,e)&&i}if(i=xp(s=e.g=t,r,!0,e)&&i,i=xp(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=xp(s=e.g=n[o],r,!1,e)&&i}function xp(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&gp(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Sf(Pp,Cf),Pp.prototype[hp]=!0,Pp.prototype.removeEventListener=function(t,e,n,r){Tp(this,t,e,n,r)},Pp.prototype.M=function(){if(Pp.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)dp(n[r]);delete e.g[t],e.h--}}this.I=null},Pp.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Pp.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Dp=vf.JSON.stringify;function Op(){var t=Bp,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Mp,Lp=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Fp.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Fp=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Up}),(function(t){return t.reset()})),Up=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function jp(t){vf.setTimeout((function(){throw t}),0)}function qp(t,e){Mp||function(){var t=vf.Promise.resolve(void 0);Mp=function(){t.then(Kp)}}(),Vp||(Mp(),Vp=!0),Bp.add(t,e)}var Vp=!1,Bp=new Lp;function Kp(){for(var t;t=Op();){try{t.h.call(t.g)}catch(n){jp(n)}var e=Fp;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Vp=!1}function Wp(t,e){Pp.call(this),this.h=t||1,this.g=e||vf,this.j=Tf(this.kb,this),this.l=Date.now()}function Hp(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function zp(t,e,n){if("function"==typeof t)n&&(t=Tf(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Tf(t.handleEvent,t)}return 2147483647<Number(e)?-1:vf.setTimeout(t,e||0)}function Gp(t){t.g=zp((function(){t.g=null,t.i&&(t.i=!1,Gp(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Sf(Wp,Pp),(ff=Wp.prototype).da=!1,ff.S=null,ff.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Rp(this,"tick"),this.da&&(Hp(this),this.start()))}},ff.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ff.M=function(){Wp.Z.M.call(this),Hp(this),delete this.g};var Qp=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}lf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Gp(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(vf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Cf);function Yp(t){Cf.call(this),this.h=t,this.g={}}Sf(Yp,Cf);var $p=[];function Xp(t,e,n,r){Array.isArray(n)||(n&&($p[0]=n.toString()),n=$p);for(var i=0;i<n.length;i++){var o=_p(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Jp(t){jf(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ep(t)}),t),t.g={}}function Zp(){this.g=!0}function td(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Dp(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Yp.prototype.M=function(){Yp.Z.M.call(this),Jp(this)},Yp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zp.prototype.Aa=function(){this.g=!1},Zp.prototype.info=function(){};var ed={},nd=null;function rd(){return nd=nd||new Pp}function id(t){up.call(this,ed.Ma,t)}function od(t){var e=rd();Rp(e,new id(e,t))}function sd(t,e){up.call(this,ed.STAT_EVENT,t),this.stat=e}function ad(t){var e=rd();Rp(e,new sd(e,t))}function ud(t,e){up.call(this,ed.Na,t),this.size=e}function cd(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return vf.setTimeout((function(){t()}),e)}ed.Ma="serverreachability",Sf(id,up),ed.STAT_EVENT="statevent",Sf(sd,up),ed.Na="timingevent",Sf(ud,up);var ld={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},hd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function fd(){}function pd(t){return t.h||(t.h=t.i())}function dd(){}fd.prototype.h=null;var vd,gd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function yd(){up.call(this,"d")}function md(){up.call(this,"c")}function bd(){}function _d(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Yp(this),this.P=Id,t=Yf?125:void 0,this.W=new Wp(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new wd}function wd(){this.i=null,this.g="",this.h=!1}Sf(yd,up),Sf(md,up),Sf(bd,fd),bd.prototype.g=function(){return new XMLHttpRequest},bd.prototype.i=function(){return{}},vd=new bd;var Id=45e3,Td={},Ed={};function Sd(t,e,n){t.K=1,t.v=Qd(Bd(e)),t.s=n,t.U=!0,Cd(t,null)}function Cd(t,e){t.F=Date.now(),Pd(t),t.A=Bd(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),av(n.h,"t",r),t.C=0,n=t.l.H,t.h=new wd,t.g=ug(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Qp(Tf(t.Ia,t,t.g),t.O)),Xp(t.V,t.g,"readystatechange",t.gb),e=t.H?qf(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),od(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function kd(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Nd(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Ad(t,n))==Ed){4==e&&(t.o=4,ad(14),i=!1),td(t.j,t.m,null,"[Incomplete Response]");break}if(r==Td){t.o=4,ad(15),td(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}td(t.j,t.m,r,null),Md(t,r)}kd(t)&&r!=Ed&&r!=Td&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ad(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),tg(e),e.L=!0,ad(11))):(td(t.j,t.m,n,"[Invalid Chunked Response]"),Od(t),Dd(t))}function Ad(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ed:(n=Number(e.substring(n,r)),isNaN(n)?Td:(r+=1)+n>e.length?Ed:(e=e.substr(r,n),t.C=r+n,e))}function Pd(t){t.Y=Date.now()+t.P,Rd(t,t.P)}function Rd(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=cd(Tf(t.eb,t),e)}function xd(t){t.B&&(vf.clearTimeout(t.B),t.B=null)}function Dd(t){0==t.l.G||t.I||rg(t.l,t)}function Od(t){xd(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Hp(t.W),Jp(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Md(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||dv(n.i,t)))if(n.I=t.N,!t.J&&dv(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;ng(n),Hv(n)}Zv(n),ad(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=cd(Tf(n.ab,n),6e3));if(1>=pv(n.i)&&n.ka){try{n.ka()}catch(g){}n.ka=void 0}}else og(n,11)}else if((t.J||n.g==t)&&ng(n),!xf(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Mf(l,"spdy")||Mf(l,"quic")||Mf(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(vv(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Gd(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=ag(r,r.H?r.la:null,r.W),p.J){gv(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(xd(d),Pd(d)),r.g=p}else Jv(r);0<n.l.length&&Qv(n)}else"stop"!=o[0]&&"close"!=o[0]||og(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?og(n,7):Wv(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}od(4)}catch(g){}}function Ld(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(yf(t)||"string"==typeof t)Af(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(yf(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(yf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Fd(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Fd)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ud(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];jd(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)jd(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function jd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ff=_d.prototype).setTimeout=function(t){this.P=t},ff.gb=function(t){t=t.target;var e=this.L;e&&3==jv(t)?e.l():this.Ia(t)},ff.Ia=function(t){try{if(t==this.g)t:{var e=jv(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Yf||this.g&&(this.h.h||this.g.ga()||qv(this.g)))){this.I||4!=e||7==n||od(8==n||0>=r?3:2),xd(this);var i=this.g.ba();this.N=i;e:if(kd(this)){var o=qv(this.g);t="";var s=o.length,a=4==jv(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Od(this),Dd(this);var u="";break e}this.h.i=new vf.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xf(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,ad(12),Od(this),Dd(this);break t}td(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Md(this,i)}this.U?(Nd(this,e,u),Yf&&this.i&&3==e&&(Xp(this.V,this.W,"tick",this.fb),this.W.start())):(td(this.j,this.m,u,null),Md(this,u)),4==e&&Od(this),this.i&&!this.I&&(4==e?rg(this.l,this):(this.i=!1,Pd(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ad(12)):(this.o=0,ad(13)),Od(this),Dd(this)}}}catch(f){}},ff.fb=function(){if(this.g){var t=jv(this.g),e=this.g.ga();this.C<e.length&&(xd(this),Nd(this,t,e),this.i&&4!=t&&Pd(this))}},ff.cancel=function(){this.I=!0,Od(this)},ff.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(od(3),ad(17)),Od(this),this.o=2,Dd(this)):Rd(this,this.Y-t)},(ff=Fd.prototype).R=function(){Ud(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},ff.T=function(){return Ud(this),this.g.concat()},ff.get=function(t,e){return jd(this.h,t)?this.h[t]:e},ff.set=function(t,e){jd(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},ff.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var qd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vd(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Vd){this.g=void 0!==e?e:t.g,Kd(this,t.j),this.s=t.s,Wd(this,t.i),Hd(this,t.m),this.l=t.l,e=t.h;var n=new rv;n.i=e.i,e.g&&(n.g=new Fd(e.g),n.h=e.h),zd(this,n),this.o=t.o}else t&&(n=String(t).match(qd))?(this.g=!!e,Kd(this,n[1]||"",!0),this.s=Yd(n[2]||""),Wd(this,n[3]||"",!0),Hd(this,n[4]),this.l=Yd(n[5]||"",!0),zd(this,n[6]||"",!0),this.o=Yd(n[7]||"")):(this.g=!!e,this.h=new rv(null,this.g))}function Bd(t){return new Vd(t)}function Kd(t,e,n){t.j=n?Yd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wd(t,e,n){t.i=n?Yd(e,!0):e}function Hd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function zd(t,e,n){e instanceof rv?(t.h=e,function(t,e){e&&!t.j&&(iv(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ov(this,e),av(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=$d(e,ev)),t.h=new rv(e,t.g))}function Gd(t,e,n){t.h.set(e,n)}function Qd(t){return Gd(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Yd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $d(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Xd),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Xd(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Vd.prototype.toString=function(){var t=[],e=this.j;e&&t.push($d(e,Jd,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push($d(e,Jd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push($d(n,"/"==n.charAt(0)?tv:Zd,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$d(n,nv)),t.join("")};var Jd=/[#\/\?@]/g,Zd=/[#\?:]/g,tv=/[#\?]/g,ev=/[#\?@]/g,nv=/#/g;function rv(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function iv(t){t.g||(t.g=new Fd,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ov(t,e){iv(t),e=uv(t,e),jd(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,jd((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ud(t)))}function sv(t,e){return iv(t),e=uv(t,e),jd(t.g.h,e)}function av(t,e,n){ov(t,e),0<n.length&&(t.i=null,t.g.set(uv(t,e),Rf(n)),t.h+=n.length)}function uv(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(ff=rv.prototype).add=function(t,e){iv(this),this.i=null,t=uv(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ff.forEach=function(t,e){iv(this),this.g.forEach((function(n,r){Af(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ff.T=function(){iv(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ff.R=function(t){iv(this);var e=[];if("string"==typeof t)sv(this,t)&&(e=Pf(e,this.g.get(uv(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Pf(e,t[n])}return e},ff.set=function(t,e){return iv(this),this.i=null,sv(this,t=uv(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ff.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},ff.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var cv=function(t,e){this.h=t,this.g=e};function lv(t){this.l=t||hv,vf.PerformanceNavigationTiming?t=0<(t=vf.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(vf.g&&vf.g.Ea&&vf.g.Ea()&&vf.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hv=10;function fv(t){return!!t.h||!!t.g&&t.g.size>=t.j}function pv(t){return t.h?1:t.g?t.g.size:0}function dv(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function vv(t,e){t.g?t.g.add(e):t.h=e}function gv(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function yv(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=hf(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Rf(t.i)}function mv(){}function bv(){this.g=new mv}function _v(t,e,n){var r=n||"";try{Ld(t,(function(t,n){var i=t;mf(t)&&(i=Dp(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(jC){throw e.push(r+"type="+encodeURIComponent("_badmap")),jC}}function wv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Iv(t){this.l=t.$b||null,this.j=t.ib||!1}function Tv(t,e){Pp.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ev,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lv.prototype.cancel=function(){var t,e;if(this.i=yv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=hf(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},mv.prototype.stringify=function(t){return vf.JSON.stringify(t,void 0)},mv.prototype.parse=function(t){return vf.JSON.parse(t,void 0)},Sf(Iv,fd),Iv.prototype.g=function(){return new Tv(this.l,this.j)},Iv.prototype.i=function(t){return function(){return t}}({}),Sf(Tv,Pp);var Ev=0;function Sv(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Cv(t){t.readyState=4,t.l=null,t.j=null,t.A=null,kv(t)}function kv(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ff=Tv.prototype).open=function(t,e){if(this.readyState!=Ev)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,kv(this)},ff.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||vf).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ff.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cv(this)),this.readyState=Ev},ff.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,kv(this)),this.g&&(this.readyState=3,kv(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==vf.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sv(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},ff.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Cv(this):kv(this),3==this.readyState&&Sv(this)}},ff.Ua=function(t){this.g&&(this.response=this.responseText=t,Cv(this))},ff.Ta=function(t){this.g&&(this.response=t,Cv(this))},ff.ha=function(){this.g&&Cv(this)},ff.setRequestHeader=function(t,e){this.v.append(t,e)},ff.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ff.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Tv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Nv=vf.JSON.parse;function Av(t){Pp.call(this),this.headers=new Fd,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Pv,this.K=this.L=!1}Sf(Av,Pp);var Pv="",Rv=/^https?$/i,xv=["POST","PUT"];function Dv(t){return"content-type"==t.toLowerCase()}function Ov(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Mv(t),Fv(t)}function Mv(t){t.D||(t.D=!0,Rp(t,"complete"),Rp(t,"error"))}function Lv(t){if(t.h&&void 0!==df&&(!t.C[1]||4!=jv(t)||2!=t.ba()))if(t.v&&4==jv(t))zp(t.Fa,0,t);else if(Rp(t,"readystatechange"),4==jv(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(qd)[1]||null;if(!o&&vf.self&&vf.self.location){var s=vf.self.location.protocol;o=s.substr(0,s.length-1)}i=!Rv.test(o?o.toLowerCase():"")}e=i}if(e)Rp(t,"complete"),Rp(t,"success");else{t.m=6;try{var a=2<jv(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Mv(t)}}finally{Fv(t)}}}function Fv(t,e){if(t.g){Uv(t);var n=t.g,r=t.C[0]?gf:null;t.g=null,t.C=null,e||Rp(t,"ready");try{n.onreadystatechange=r}catch(jC){}}}function Uv(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(vf.clearTimeout(t.A),t.A=null)}function jv(t){return t.g?t.g.readyState:0}function qv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Pv:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vv(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return jf(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Gd(t,e,n))}function Bv(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Kv(t){this.za=0,this.l=[],this.h=new Zp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bv("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bv("baseRetryDelayMs",5e3,t),this.$a=Bv("retryDelaySeedMs",1e4,t),this.Ya=Bv("forwardChannelMaxRetries",2,t),this.ra=Bv("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new lv(t&&t.concurrentRequestLimit),this.Ca=new bv,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Wv(t){if(zv(t),3==t.G){var e=t.V++,n=Bd(t.F);Gd(n,"SID",t.J),Gd(n,"RID",e),Gd(n,"TYPE","terminate"),$v(t,n),(e=new _d(t,t.h,e,void 0)).K=2,e.v=Qd(Bd(n)),n=!1,vf.navigator&&vf.navigator.sendBeacon&&(n=vf.navigator.sendBeacon(e.v.toString(),"")),!n&&vf.Image&&((new Image).src=e.v,n=!0),n||(e.g=ug(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pd(e)}sg(t)}function Hv(t){t.g&&(tg(t),t.g.cancel(),t.g=null)}function zv(t){Hv(t),t.u&&(vf.clearTimeout(t.u),t.u=null),ng(t),t.i.cancel(),t.m&&("number"==typeof t.m&&vf.clearTimeout(t.m),t.m=null)}function Gv(t,e){t.l.push(new cv(t.Za++,e)),3==t.G&&Qv(t)}function Qv(t){fv(t.i)||t.m||(t.m=!0,qp(t.Ha,t),t.C=0)}function Yv(t,e){var n;n=e?e.m:t.V++;var r=Bd(t.F);Gd(r,"SID",t.J),Gd(r,"RID",n),Gd(r,"AID",t.U),$v(t,r),t.o&&t.s&&Vv(r,t.o,t.s),n=new _d(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Xv(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),vv(t.i,n),Sd(n,r,e)}function $v(t,e){t.j&&Ld({},(function(t,n){Gd(e,n,t)}))}function Xv(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Tf(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{_v(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Jv(t){t.g||t.u||(t.Y=1,qp(t.Ga,t),t.A=0)}function Zv(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=cd(Tf(t.Ga,t),ig(t,t.A)),t.A++,!0)}function tg(t){null!=t.B&&(vf.clearTimeout(t.B),t.B=null)}function eg(t){t.g=new _d(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Bd(t.oa);Gd(e,"RID","rpc"),Gd(e,"SID",t.J),Gd(e,"CI",t.N?"0":"1"),Gd(e,"AID",t.U),$v(t,e),Gd(e,"TYPE","xmlhttp"),t.o&&t.s&&Vv(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Qd(Bd(e)),n.s=null,n.U=!0,Cd(n,t)}function ng(t){null!=t.v&&(vf.clearTimeout(t.v),t.v=null)}function rg(t,e){var n=null;if(t.g==e){ng(t),tg(t),t.g=null;var r=2}else{if(!dv(t.i,e))return;n=e.D,gv(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Rp(r=rd(),new ud(r,n,e,i)),Qv(t)}else Jv(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(pv(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=cd(Tf(t.Ha,t,e),ig(t,t.C)),t.C++,0)))}(t,e)||2==r&&Zv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:og(t,5);break;case 4:og(t,10);break;case 3:og(t,6);break;default:og(t,2)}}function ig(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function og(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Tf(t.jb,t);n||(n=new Vd("//www.google.com/images/cleardot.gif"),vf.location&&"http"==vf.location.protocol||Kd(n,"https"),Qd(n)),function(t,e){var n=new Zp;if(vf.Image){var r=new Image;r.onload=Ef(wv,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ef(wv,n,r,"TestLoadImage: error",!1,e),r.onabort=Ef(wv,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ef(wv,n,r,"TestLoadImage: timeout",!1,e),vf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ad(2);t.G=0,t.j&&t.j.va(e),sg(t),zv(t)}function sg(t){t.G=0,t.I=-1,t.j&&(0==yv(t.i).length&&0==t.l.length||(t.i.i.length=0,Rf(t.l),t.l.length=0),t.j.ua())}function ag(t,e,n){var r=function(t){return t instanceof Vd?Bd(t):new Vd(t,void 0)}(n);if(""!=r.i)e&&Wd(r,e+"."+r.i),Hd(r,r.m);else{var i=vf.location;r=function(t,e,n,r){var i=new Vd(null,void 0);return t&&Kd(i,t),e&&Wd(i,e),n&&Hd(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&jf(t.aa,(function(t,e){Gd(r,e,t)})),e=t.D,n=t.sa,e&&n&&Gd(r,e,n),Gd(r,"VER",t.ma),$v(t,r),r}function ug(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Av(new Iv({ib:!0})):new Av(t.qa)).L=t.H,e}function cg(){}function lg(){if(Gf&&!(10<=Number(sp)))throw Error("Environmental error: no available transport.")}function hg(t,e){Pp.call(this),this.g=new Kv(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!xf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xf(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new dg(this)}function fg(t){yd.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function pg(){md.call(this),this.status=1}function dg(t){this.g=t}(ff=Av.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vd.g(),this.C=this.u?pd(this.u):pd(vd),this.g.onreadystatechange=Tf(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Ov(this,o)}t=n||"";var i=new Fd(this.headers);r&&Ld(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Dv,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=vf.FormData&&t instanceof vf.FormData,!(0<=Nf(xv,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Uv(this),0<this.B&&((this.K=function(t){return Gf&&ip()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tf(this.pa,this)):this.A=zp(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Ov(this,o)}},ff.pa=function(){void 0!==df&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rp(this,"timeout"),this.abort(8))},ff.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Rp(this,"complete"),Rp(this,"abort"),Fv(this))},ff.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fv(this,!0)),Av.Z.M.call(this)},ff.Fa=function(){this.s||(this.F||this.v||this.l?Lv(this):this.cb())},ff.cb=function(){Lv(this)},ff.ba=function(){try{return 2<jv(this)?this.g.status:-1}catch(Hf){return-1}},ff.ga=function(){try{return this.g?this.g.responseText:""}catch(Hf){return""}},ff.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Nv(e)}},ff.Da=function(){return this.m},ff.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ff=Kv.prototype).ma=8,ff.G=1,ff.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},ff.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new _d(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Bf(n=qf(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Xv(this,e,r),Gd(i=Bd(this.F),"RID",t),Gd(i,"CVER",22),this.D&&Gd(i,"X-HTTP-Session-Id",this.D),$v(this,i),this.o&&n&&Vv(i,this.o,n),vv(this.i,e),this.Ra&&Gd(i,"TYPE","init"),this.ja?(Gd(i,"$req",r),Gd(i,"SID","null"),e.$=!0,Sd(e,i,null)):Sd(e,i,r),this.G=2}}else 3==this.G&&(t?Yv(this,t):0==this.l.length||fv(this.i)||Yv(this))},ff.Ga=function(){if(this.u=null,eg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=cd(Tf(this.bb,this),t)}},ff.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ad(10),Hv(this),eg(this))},ff.ab=function(){null!=this.v&&(this.v=null,Hv(this),Zv(this),ad(19))},ff.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ad(2)):(this.h.info("Failed to ping google.com"),ad(1))},(ff=cg.prototype).xa=function(){},ff.wa=function(){},ff.va=function(){},ff.ua=function(){},ff.Oa=function(){},lg.prototype.g=function(t,e){return new hg(t,e)},Sf(hg,Pp),hg.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),qp(Tf(t.hb,t,e))),ad(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ag(t,null,t.W),Qv(t)},hg.prototype.close=function(){Wv(this.g)},hg.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Gv(this.g,e)}else this.v?((e={}).__data__=Dp(t),Gv(this.g,e)):Gv(this.g,t)},hg.prototype.M=function(){this.g.j=null,delete this.j,Wv(this.g),delete this.g,hg.Z.M.call(this)},Sf(fg,yd),Sf(pg,md),Sf(dg,cg),dg.prototype.xa=function(){Rp(this.g,"a")},dg.prototype.wa=function(t){Rp(this.g,new fg(t))},dg.prototype.va=function(t){Rp(this.g,new pg(t))},dg.prototype.ua=function(){Rp(this.g,"b")},lg.prototype.createWebChannel=lg.prototype.g,hg.prototype.send=hg.prototype.u,hg.prototype.open=hg.prototype.m,hg.prototype.close=hg.prototype.close,ld.NO_ERROR=0,ld.TIMEOUT=8,ld.HTTP_ERROR=6,hd.COMPLETE="complete",dd.EventType=gd,gd.OPEN="a",gd.CLOSE="b",gd.ERROR="c",gd.MESSAGE="d",Pp.prototype.listen=Pp.prototype.N,Av.prototype.listenOnce=Av.prototype.O,Av.prototype.getLastError=Av.prototype.La,Av.prototype.getLastErrorCode=Av.prototype.Da,Av.prototype.getStatus=Av.prototype.ba,Av.prototype.getResponseJson=Av.prototype.Qa,Av.prototype.getResponseText=Av.prototype.ga,Av.prototype.send=Av.prototype.ea;var vg=ld,gg=hd,yg=ed,mg=10,bg=11,_g=Iv,wg=dd,Ig=Av,Tg=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Tg.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Eg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Sg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return ti(e,t),e}(Error),Cg=new uo("@firebase/firestore");function kg(){return Cg.logLevel}function Ng(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cg.logLevel<=to.DEBUG){var r=e.map(Rg);Cg.debug.apply(Cg,si(["Firestore (8.7.0): "+t],r))}}function Ag(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cg.logLevel<=to.ERROR){var r=e.map(Rg);Cg.error.apply(Cg,si(["Firestore (8.7.0): "+t],r))}}function Pg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cg.logLevel<=to.WARN){var r=e.map(Rg);Cg.warn.apply(Cg,si(["Firestore (8.7.0): "+t],r))}}function Rg(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw Ag(e),new Error(e)}function Dg(t,e){t||xg()}function Og(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lg=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Mg(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Fg(t,e){return t<e?-1:t>e?1:0}function Ug(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function jg(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qg=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Sg(Eg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Sg(Eg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Sg(Eg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Sg(Eg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Fg(this.nanoseconds,t.nanoseconds):Fg(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Vg=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new qg(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kg(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Wg(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hg=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&xg(),void 0===n?n=t.length-e:n>t.length-e&&xg(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),zg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Hg),Gg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Gg.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Sg(Eg.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Sg(Eg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Sg(Eg.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Hg),Yg=function(){function t(t){this.fields=t,t.sort(Qg.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ug(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),$g=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Fg(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();$g.EMPTY_BYTE_STRING=new $g("");var Xg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jg(t){if(Dg(!!t),"string"==typeof t){var e=0,n=Xg.exec(t);if(Dg(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Zg(t.seconds),nanos:Zg(t.nanos)}}function Zg(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ty(t){return"string"==typeof t?$g.fromBase64String(t):$g.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ny(t){var e=t.mapValue.fields.__previous_value__;return ey(e)?ny(e):e}function ry(t){var e=Jg(t.mapValue.fields.__local_write_time__.timestampValue);return new qg(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t){return null==t}function oy(t){return 0===t&&1/t==-1/0}function sy(t){return"number"==typeof t&&Number.isInteger(t)&&!oy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ay=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(zg.fromString(e))},t.fromName=function(e){return new t(zg.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===zg.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return zg.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new zg(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ey(t)?4:10:xg()}function cy(t,e){var n,r=uy(t);if(r!==uy(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ry(t).isEqual(ry(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Jg(t.timestampValue),r=Jg(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,ty(t.bytesValue).isEqual(ty(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Zg(t.geoPointValue.latitude)===Zg(e.geoPointValue.latitude)&&Zg(t.geoPointValue.longitude)===Zg(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Zg(t.integerValue)===Zg(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Zg(t.doubleValue),r=Zg(e.doubleValue);return n===r?oy(n)===oy(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ug(t.arrayValue.values||[],e.arrayValue.values||[],cy);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Bg(n)!==Bg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cy(n[i],r[i])))return!1;return!0}(t,e);default:return xg()}}function ly(t,e){return void 0!==(t.values||[]).find((function(t){return cy(t,e)}))}function hy(t,e){var n,r,i,o,s=uy(t),a=uy(e);if(s!==a)return Fg(s,a);switch(s){case 0:return 0;case 1:return Fg(t.booleanValue,e.booleanValue);case 2:return r=e,i=Zg((n=t).integerValue||n.doubleValue),o=Zg(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return fy(t.timestampValue,e.timestampValue);case 4:return fy(ry(t),ry(e));case 5:return Fg(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ty(t),r=ty(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Fg(n[i],r[i]);if(0!==o)return o}return Fg(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Fg(Zg(t.latitude),Zg(e.latitude));return 0!==n?n:Fg(Zg(t.longitude),Zg(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=hy(n[i],r[i]);if(o)return o}return Fg(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Fg(r[s],o[s]);if(0!==a)return a;var u=hy(n[r[s]],i[o[s]]);if(0!==u)return u}return Fg(r.length,o.length)}(t.mapValue,e.mapValue);default:throw xg()}}function fy(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Fg(t,e);var n=Jg(t),r=Jg(e),i=Fg(n.seconds,r.seconds);return 0!==i?i:Fg(n.nanos,r.nanos)}function py(t){return dy(t)}function dy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=Jg(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?ty(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,ay.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=dy(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+dy(t.fields[o])}return e+"}"}(t.mapValue):xg();var e,n,r,i}function vy(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function gy(t){return!!t&&"integerValue"in t}function yy(t){return!!t&&"arrayValue"in t}function my(t){return!!t&&"nullValue"in t}function by(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _y(t){return!!t&&"mapValue"in t}function wy(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},Jg(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Kg(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=wy(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=wy(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Iy=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!_y(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=wy(e)},t.prototype.setAll=function(t){var e=this,n=Qg.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=wy(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());_y(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return cy(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];_y(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Kg(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(wy(this.value))},t}();function Ty(t){var e=[];return Kg(t.fields,(function(t,n){var r=new Qg([t]);if(_y(n)){var i=Ty(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Yg(e)}var Ey=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Vg.min(),Iy.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Iy.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Iy.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Iy.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Iy.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Sy=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Sy(t,e,n,r,i,o,s)}function ky(t){var e=Og(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+py(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),iy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=qy(e.startAt)),e.endAt&&(n+="|ub:",n+=qy(e.endAt)),e.h=n}return e.h}function Ny(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!By(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!cy(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wy(t.startAt,e.startAt)&&Wy(t.endAt,e.endAt)}function Ay(t){return ay.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Py=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return ti(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ry(t,n,r):"array-contains"===n?new My(t,r):"in"===n?new Ly(t,r):"not-in"===n?new Fy(t,r):"array-contains-any"===n?new Uy(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new xy(t,n):new Dy(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(hy(e,this.value)):null!==e&&uy(this.value)===uy(e)&&this.m(hy(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return xg()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ry=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ay.fromName(r.referenceValue),i}return ti(e,t),e.prototype.matches=function(t){var e=ay.comparator(t.key,this.key);return this.m(e)},e}(Py),xy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Oy("in",n),r}return ti(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Py),Dy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Oy("not-in",n),r}return ti(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Py);function Oy(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ay.fromName(t.referenceValue)}))}var My=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return ti(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return yy(e)&&ly(e.arrayValue,this.value)},e}(Py),Ly=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return ti(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&ly(this.value.arrayValue,e)},e}(Py),Fy=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return ti(e,t),e.prototype.matches=function(t){if(ly(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!ly(this.value.arrayValue,e)},e}(Py),Uy=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return ti(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!yy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ly(e.value.arrayValue,t)}))},e}(Py),jy=function(t,e){this.position=t,this.before=e};function qy(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return py(t)})).join(",")}var Vy=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function By(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ky(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ay.comparator(ay.fromName(s.referenceValue),n.key):hy(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Wy(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!cy(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hy=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function zy(t,e,n,r,i,o,s,a){return new Hy(t,e,n,r,i,o,s,a)}function Gy(t){return new Hy(t)}function Qy(t){return!iy(t.limit)&&"F"===t.limitType}function Yy(t){return!iy(t.limit)&&"L"===t.limitType}function $y(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Xy(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Jy(t){return null!==t.collectionGroup}function Zy(t){var e=Og(t);if(null===e.p){e.p=[];var n=Xy(e),r=$y(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Vy(n)),e.p.push(new Vy(Qg.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Vy(Qg.keyField(),u))}}}return e.p}function tm(t){var e=Og(t);if(!e.T)if("F"===e.limitType)e.T=Cy(e.path,e.collectionGroup,Zy(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Zy(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Vy(o.field,s))}var a=e.endAt?new jy(e.endAt.position,!e.endAt.before):null,u=e.startAt?new jy(e.startAt.position,!e.startAt.before):null;e.T=Cy(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function em(t,e,n){return new Hy(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nm(t,e){return Ny(tm(t),tm(e))&&t.limitType===e.limitType}function rm(t){return ky(tm(t))+"|lt:"+t.limitType}function im(t){return"Query(target="+(e=tm(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+py(e.value);var e})).join(", ")+"]"),iy(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+qy(e.startAt)),e.endAt&&(n+=", endAt: "+qy(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function om(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ay.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ky(t.startAt,Zy(t),e)||t.endAt&&Ky(t.endAt,Zy(t),e))}(t,e);var n,r,i}function sm(t){return function(e,n){for(var r=!1,i=0,o=Zy(t);i<o.length;i++){var s=o[i],a=am(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function am(t,e,n){var r,i,o,s,a=t.field.isKeyField()?ay.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),s=i.data.field(r),null!==o&&null!==s?hy(o,s):xg());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return xg()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oy(e)?"-0":e}}function cm(t){return{integerValue:""+t}}function lm(t,e){return sy(e)?cm(e):um(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hm=function(){this._=void 0};function fm(t,e,n){return t instanceof vm?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof gm?ym(t,e):t instanceof mm?bm(t,e):function(t,e){var n=dm(t,e),r=wm(n)+wm(t.A);return gy(n)&&gy(t.A)?cm(r):um(t.R,r)}(t,e);var r,i,o}function pm(t,e,n){return t instanceof gm?ym(t,e):t instanceof mm?bm(t,e):n}function dm(t,e){return t instanceof _m?gy(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var vm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e}(hm),gm=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ti(e,t),e}(hm);function ym(t,e){for(var n=Im(e),r=function(t){n.some((function(e){return cy(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var mm=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ti(e,t),e}(hm);function bm(t,e){for(var n=Im(e),r=function(t){n=n.filter((function(e){return!cy(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var _m=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return ti(e,t),e}(hm);function wm(t){return Zg(t.integerValue||t.doubleValue)}function Im(t){return yy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tm=function(t,e){this.field=t,this.transform=e},Em=function(t,e){this.version=t,this.transformResults=e},Sm=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Cm(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var km=function(){};function Nm(t,e,n){var r,i,o,s,a;t instanceof Dm?(i=e,o=n,s=(r=t).value.clone(),a=Lm(r.fieldTransforms,i,o.transformResults),s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()):t instanceof Om?function(t,e,n){if(Cm(t.precondition,e)){var r=Lm(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Mm(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Am(t,e,n){var r;t instanceof Dm?function(t,e,n){if(Cm(t.precondition,e)){var r=t.value.clone(),i=Fm(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(xm(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Om?function(t,e,n){if(Cm(t.precondition,e)){var r=Fm(t.fieldTransforms,n,e),i=e.data;i.setAll(Mm(t)),i.setAll(r),e.convertToFoundDocument(xm(e),i).setHasLocalMutations()}}(t,e,n):(r=e,Cm(t.precondition,r)&&r.convertToNoDocument(Vg.min()))}function Pm(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=dm(o.transform,s||null);null!=a&&(null==n&&(n=Iy.empty()),n.set(o.field,a))}return n||null}function Rm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Ug(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof gm&&o instanceof gm||i instanceof mm&&o instanceof mm?Ug(i.elements,o.elements,cy):i instanceof _m&&o instanceof _m?cy(i.A,o.A):i instanceof vm&&o instanceof vm);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function xm(t){return t.isFoundDocument()?t.version:Vg.min()}var Dm=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return ti(e,t),e}(km),Om=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return ti(e,t),e}(km);function Mm(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Lm(t,e,n){var r=new Map;Dg(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,pm(s,a,n[i]))}return r}function Fm(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,fm(a,u,e))}return r}var Um,jm,qm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return ti(e,t),e}(km),Vm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return ti(e,t),e}(km),Bm=function(t){this.count=t};function Km(t){switch(t){case Eg.OK:return xg();case Eg.CANCELLED:case Eg.UNKNOWN:case Eg.DEADLINE_EXCEEDED:case Eg.RESOURCE_EXHAUSTED:case Eg.INTERNAL:case Eg.UNAVAILABLE:case Eg.UNAUTHENTICATED:return!1;case Eg.INVALID_ARGUMENT:case Eg.NOT_FOUND:case Eg.ALREADY_EXISTS:case Eg.PERMISSION_DENIED:case Eg.FAILED_PRECONDITION:case Eg.ABORTED:case Eg.OUT_OF_RANGE:case Eg.UNIMPLEMENTED:case Eg.DATA_LOSS:return!0;default:return xg()}}function Wm(t){if(void 0===t)return Ag("GRPC error has no .code"),Eg.UNKNOWN;switch(t){case Um.OK:return Eg.OK;case Um.CANCELLED:return Eg.CANCELLED;case Um.UNKNOWN:return Eg.UNKNOWN;case Um.DEADLINE_EXCEEDED:return Eg.DEADLINE_EXCEEDED;case Um.RESOURCE_EXHAUSTED:return Eg.RESOURCE_EXHAUSTED;case Um.INTERNAL:return Eg.INTERNAL;case Um.UNAVAILABLE:return Eg.UNAVAILABLE;case Um.UNAUTHENTICATED:return Eg.UNAUTHENTICATED;case Um.INVALID_ARGUMENT:return Eg.INVALID_ARGUMENT;case Um.NOT_FOUND:return Eg.NOT_FOUND;case Um.ALREADY_EXISTS:return Eg.ALREADY_EXISTS;case Um.PERMISSION_DENIED:return Eg.PERMISSION_DENIED;case Um.FAILED_PRECONDITION:return Eg.FAILED_PRECONDITION;case Um.ABORTED:return Eg.ABORTED;case Um.OUT_OF_RANGE:return Eg.OUT_OF_RANGE;case Um.UNIMPLEMENTED:return Eg.UNIMPLEMENTED;case Um.DATA_LOSS:return Eg.DATA_LOSS;default:return xg()}}(jm=Um||(Um={}))[jm.OK=0]="OK",jm[jm.CANCELLED=1]="CANCELLED",jm[jm.UNKNOWN=2]="UNKNOWN",jm[jm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jm[jm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jm[jm.NOT_FOUND=5]="NOT_FOUND",jm[jm.ALREADY_EXISTS=6]="ALREADY_EXISTS",jm[jm.PERMISSION_DENIED=7]="PERMISSION_DENIED",jm[jm.UNAUTHENTICATED=16]="UNAUTHENTICATED",jm[jm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jm[jm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jm[jm.ABORTED=10]="ABORTED",jm[jm.OUT_OF_RANGE=11]="OUT_OF_RANGE",jm[jm.UNIMPLEMENTED=12]="UNIMPLEMENTED",jm[jm.INTERNAL=13]="INTERNAL",jm[jm.UNAVAILABLE=14]="UNAVAILABLE",jm[jm.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Hm=function(){function t(t,e){this.comparator=t,this.root=e||Gm.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gm.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gm.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new zm(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new zm(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new zm(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new zm(this.root,t,this.comparator,!0)},t}(),zm=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Gm=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw xg();if(this.right.isRed())throw xg();var t=this.left.check();if(t!==this.right.check())throw xg();return t+(this.isRed()?0:1)},t}();Gm.EMPTY=null,Gm.RED=!0,Gm.BLACK=!1,Gm.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw xg()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw xg()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw xg()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw xg()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw xg()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Gm(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qm=function(){function t(t){this.comparator=t,this.data=new Hm(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ym(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ym(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ym=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),$m=new Hm(ay.comparator);function Xm(){return $m}var Jm=new Hm(ay.comparator);function Zm(){return Jm}var tb=new Hm(ay.comparator);function eb(){return tb}var nb=new Qm(ay.comparator);function rb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=nb,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ib=new Qm(Fg);function ob(){return ib}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sb=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ab.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Vg.min(),r,ob(),Xm(),rb())},t}(),ab=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t($g.EMPTY_BYTE_STRING,n,rb(),rb(),rb())},t}(),ub=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},cb=function(t,e){this.targetId=t,this.V=e},lb=function(t,e,n,r){void 0===n&&(n=$g.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},hb=function(){function t(){this.S=0,this.D=db(),this.C=$g.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=rb(),e=rb(),n=rb();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:xg()}})),new ab(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=db()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),fb=function(){function t(t){this.W=t,this.G=new Map,this.H=Xm(),this.J=pb(),this.Y=new Qm(Fg)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:xg()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ay(i))if(0===n){var o=new ay(i.path);this.tt(e,o,Ey.newNoDocument(o,Vg.min()))}else Dg(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Ay(o.target)){var s=new ay(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Ey.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=rb();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new sb(t,n,this.Y,this.H,r);return this.H=Xm(),this.J=pb(),this.Y=new Qm(Fg),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new hb,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Qm(Fg),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ng("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new hb),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function pb(){return new Hm(ay.comparator)}function db(){return new Hm(ay.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vb={asc:"ASCENDING",desc:"DESCENDING"},gb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yb=function(t,e){this.databaseId=t,this.I=e};function mb(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function bb(t,e){return t.I?e.toBase64():e.toUint8Array()}function _b(t,e){return mb(t,e.toTimestamp())}function wb(t){return Dg(!!t),Vg.fromTimestamp((e=Jg(t),new qg(e.seconds,e.nanos)));var e}function Ib(t,e){return(n=t,new zg(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Tb(t){var e=zg.fromString(t);return Dg(Gb(e)),e}function Eb(t,e){return Ib(t.databaseId,e.path)}function Sb(t,e){var n=Tb(e);if(n.get(1)!==t.databaseId.projectId)throw new Sg(Eg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Sg(Eg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ay(Ab(n))}function Cb(t,e){return Ib(t.databaseId,e)}function kb(t){var e=Tb(t);return 4===e.length?zg.emptyPath():Ab(e)}function Nb(t){return new zg(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ab(t){return Dg(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Pb(t,e,n){return{name:Eb(t,e),fields:n.value.mapValue.fields}}function Rb(t,e,n){var r=Sb(t,e.name),i=wb(e.updateTime),o=new Iy({mapValue:{fields:e.fields}}),s=Ey.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function xb(t,e){var n,r,i;if(e instanceof Dm)n={update:Pb(t,e.key,e.value)};else if(e instanceof qm)n={delete:Eb(t,e.key)};else if(e instanceof Om)n={update:Pb(t,e.key,e.data),updateMask:zb(e.fieldMask)};else{if(!(e instanceof Vm))return xg();n={verify:Eb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof vm)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gm)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof mm)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof _m)return{fieldPath:e.field.canonicalString(),increment:n.A};throw xg()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:_b(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:xg())),n}function Db(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?Sm.updateTime(wb(n.updateTime)):void 0!==n.exists?Sm.exists(n.exists):Sm.none():Sm.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Dg("REQUEST_TIME"===e.setToServerValue),n=new vm;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new gm(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new mm(i)}else"increment"in e?n=new _m(t,e.increment):xg();var o=Qg.fromServerFormat(e.fieldPath);return new Tm(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=Sb(t,e.update.name),s=new Iy({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Yg(e.map((function(t){return Qg.fromServerFormat(t)})))}(e.updateMask);return new Om(o,s,a,r,i)}return new Dm(o,s,r,i)}if(e.delete){var u=Sb(t,e.delete);return new qm(u,r)}if(e.verify){var c=Sb(t,e.verify);return new Vm(c,r)}return xg()}function Ob(t,e){return{documents:[Cb(t,e.path)]}}function Mb(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Cb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Cb(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(by(t.value))return{unaryFilter:{field:Bb(t.field),op:"IS_NAN"}};if(my(t.value))return{unaryFilter:{field:Bb(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(by(t.value))return{unaryFilter:{field:Bb(t.field),op:"IS_NOT_NAN"}};if(my(t.value))return{unaryFilter:{field:Bb(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bb(t.field),op:Vb(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Bb((e=t).field),direction:qb(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.I||iy(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=Ub(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ub(e.endAt)),n}function Lb(t){var e=kb(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Dg(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Fb(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Vy(Kb((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=iy(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=jb(n.startAt));var f=null;return n.endAt&&(f=jb(n.endAt)),zy(e,i,a,s,l,"F",h,f)}function Fb(t){return t?void 0!==t.unaryFilter?[Hb(t)]:void 0!==t.fieldFilter?[Wb(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Fb(t)})).reduce((function(t,e){return t.concat(e)})):xg():[]}function Ub(t){return{before:t.before,values:t.position}}function jb(t){var e=!!t.before,n=t.values||[];return new jy(n,e)}function qb(t){return vb[t]}function Vb(t){return gb[t]}function Bb(t){return{fieldPath:t.canonicalString()}}function Kb(t){return Qg.fromServerFormat(t.fieldPath)}function Wb(t){return Py.create(Kb(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return xg()}}(t.fieldFilter.op),t.fieldFilter.value)}function Hb(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Kb(t.unaryFilter.field);return Py.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Kb(t.unaryFilter.field);return Py.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Kb(t.unaryFilter.field);return Py.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Kb(t.unaryFilter.field);return Py.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return xg()}}function zb(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Gb(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=$b(e)),e=Yb(t.get(n),e);return $b(e)}function Yb(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function $b(t){return t+""}function Xb(t){var e=t.length;if(Dg(e>=2),2===e)return Dg(""===t.charAt(0)&&""===t.charAt(1)),zg.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&xg(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:xg()}o=s+2}return new zg(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jb=function(t,e){this.seconds=t,this.nanoseconds=e},Zb=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Zb.store="owner",Zb.key="owner";var t_=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};t_.store="mutationQueues",t_.keyPath="userId";var e_=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};e_.store="mutations",e_.keyPath="batchId",e_.userMutationsIndex="userMutationsIndex",e_.userMutationsKeyPath=["userId","batchId"];var n_=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Qb(e)]},t.key=function(t,e,n){return[t,Qb(e),n]},t}();n_.store="documentMutations",n_.PLACEHOLDER=new n_;var r_=function(t,e){this.path=t,this.readTime=e},i_=function(t,e){this.path=t,this.version=e},o_=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};o_.store="remoteDocuments",o_.readTimeIndex="readTimeIndex",o_.readTimeIndexPath="readTime",o_.collectionReadTimeIndex="collectionReadTimeIndex",o_.collectionReadTimeIndexPath=["parentPath","readTime"];var s_=function(t){this.byteSize=t};s_.store="remoteDocumentGlobal",s_.key="remoteDocumentGlobalKey";var a_=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};a_.store="targets",a_.keyPath="targetId",a_.queryTargetsIndexName="queryTargetsIndex",a_.queryTargetsKeyPath=["canonicalId","targetId"];var u_=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};u_.store="targetDocuments",u_.keyPath=["targetId","path"],u_.documentTargetsIndex="documentTargetsIndex",u_.documentTargetsKeyPath=["path","targetId"];var c_=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};c_.key="targetGlobalKey",c_.store="targetGlobal";var l_=function(t,e){this.collectionId=t,this.parent=e};l_.store="collectionParents",l_.keyPath=["collectionId","parent"];var h_=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};h_.store="clientMetadata",h_.keyPath="clientId";var f_=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};f_.store="bundles",f_.keyPath="bundleId";var p_=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};p_.store="namedQueries",p_.keyPath="name";var d_=si(si([],si(si([],si(si([],si(si([],[t_.store,e_.store,n_.store,o_.store,a_.store,Zb.store,c_.store,u_.store]),[h_.store])),[s_.store])),[l_.store])),[f_.store,p_.store]),v_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",g_=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),y_=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},m_=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&xg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),b_=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new y_,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new I_(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=k_(e.target.error);n.ft.reject(new I_(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new I_(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ng("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new E_(e)},t}(),__=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(mi())&&Ag("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ng("SimpleDb","Removing database:",t),S_(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=mi(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return ni(this,void 0,void 0,(function(){var e,n=this;return ri(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ng("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new I_(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Sg(Eg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new I_(t,n))},i.onupgradeneeded=function(t){Ng("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ng("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return ni(this,void 0,void 0,(function(){var i,o,s,a,u;return ri(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return ri(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=b_.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),m_.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Ng("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),w_=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return S_(this.Pt.delete())},t}(),I_=function(t){function e(e,n){var r=this;return(r=t.call(this,Eg.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return ti(e,t),e}(Sg);function T_(t){return"IndexedDbTransactionError"===t.name}var E_=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ng("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ng("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),S_(n)},t.prototype.add=function(t){return Ng("SimpleDb","ADD",this.store.name,t,t),S_(this.store.add(t))},t.prototype.get=function(t){var e=this;return S_(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ng("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ng("SimpleDb","DELETE",this.store.name,t),S_(this.store.delete(t))},t.prototype.count=function(){return Ng("SimpleDb","COUNT",this.store.name),S_(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Ng("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new m_((function(n,r){e.onerror=function(t){var e=k_(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new m_((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new w_(i),s=e(i.primaryKey,i.value,o);if(s instanceof m_){var a=s.catch((function(t){return o.done(),m_.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return m_.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function S_(t){return new m_((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=k_(t.target.error);n(e)}}))}var C_=!1;function k_(t){var e=__._t(mi());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Sg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return C_||(C_=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return ti(e,t),e}(g_);function A_(t,e){var n=Og(t);return __.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P_=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Nm(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Am(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Am(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Vg.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),rb())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ug(this.mutations,t.mutations,(function(t,e){return Rm(t,e)}))&&Ug(this.baseMutations,t.baseMutations,(function(t,e){return Rm(t,e)}))},t}(),R_=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Dg(e.mutations.length===r.length);for(var i=eb(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),x_=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Vg.min()),void 0===o&&(o=Vg.min()),void 0===s&&(s=$g.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),D_=function(t){this.Lt=t};function O_(t,e){if(e.document)return Rb(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ay.fromSegments(e.noDocument.path),r=j_(e.noDocument.readTime),i=Ey.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ay.fromSegments(e.unknownDocument.path);return r=j_(e.unknownDocument.version),Ey.newUnknownDocument(o,r)}return xg()}function M_(t,e,n){var r,i,o=L_(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:Eb(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:mb(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new o_(null,null,a,u,o,s)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=U_(e.version);return u=e.hasCommittedMutations,new o_(null,new r_(c,l),null,u,o,s)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=U_(e.version);return new o_(new i_(h,f),null,null,!0,o,s)}return xg()}function L_(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function F_(t){var e=new qg(t[0],t[1]);return Vg.fromTimestamp(e)}function U_(t){var e=t.toTimestamp();return new Jb(e.seconds,e.nanoseconds)}function j_(t){var e=new qg(t.seconds,t.nanoseconds);return Vg.fromTimestamp(e)}function q_(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Db(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Db(t.Lt,e)})),a=qg.fromMillis(e.localWriteTimeMs);return new P_(e.batchId,a,n,s)}function V_(t){var e,n,r=j_(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?j_(t.lastLimboFreeSnapshotVersion):Vg.min();return void 0!==t.query.documents?(Dg(1===(n=t.query).documents.length),e=tm(Gy(kb(n.documents[0])))):e=tm(Lb(t.query)),new x_(e,t.targetId,0,t.lastListenSequenceNumber,r,i,$g.fromBase64String(t.resumeToken))}function B_(t,e){var n,r=U_(e.snapshotVersion),i=U_(e.lastLimboFreeSnapshotVersion);n=Ay(e.target)?Ob(t.Lt,e.target):Mb(t.Lt,e.target);var o=e.resumeToken.toBase64();return new a_(e.targetId,ky(e.target),r,o,e.sequenceNumber,i,n)}function K_(t){var e=Lb({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?em(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W_=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return H_(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:j_(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return H_(t).put({bundleId:(n=e).id,createTime:U_(wb(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return z_(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:K_(e.bundledQuery),readTime:j_(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return z_(t).put({name:(n=e).name,readTime:U_(wb(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function H_(t){return A_(t,f_.store)}function z_(t){return A_(t,p_.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G_=function(){function t(){this.Bt=new Q_}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),m_.resolve()},t.prototype.getCollectionParents=function(t,e){return m_.resolve(this.Bt.getEntries(e))},t}(),Q_=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Qm(zg.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Qm(zg.comparator)).toArray()},t}(),Y_=function(){function t(){this.qt=new Q_}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Qb(i)};return $_(t).put(o)}return m_.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[jg(e),""],!1,!0);return $_(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Xb(o.parent))}return n}))},t}();function $_(t){return A_(t,l_.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},J_=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e,n){var r=t.store(e_.store),i=t.store(n_.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Dg(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=n_.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return m_.waitFor(o).next((function(){return c}))}function tw(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw xg();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */J_.DEFAULT_COLLECTION_PERCENTILE=10,J_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,J_.DEFAULT=new J_(41943040,J_.DEFAULT_COLLECTION_PERCENTILE,J_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),J_.DISABLED=new J_(-1,0,0);var ew=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Dg(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rw(t).$t({index:e_.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=iw(t),s=rw(t);return s.add({}).next((function(a){Dg("number"==typeof a);for(var u=new P_(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return xb(t.Lt,e)})),i=n.mutations.map((function(e){return xb(t.Lt,e)}));return new e_(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Qm((function(t,e){return Fg(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=n_.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(v,n_.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),m_.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return rw(t).get(e).next((function(t){return t?(Dg(t.userId===n.userId),q_(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?m_.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return rw(t).$t({index:e_.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Dg(e.batchId>=r),o=q_(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return rw(t).$t({index:e_.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rw(t).Nt(e_.userMutationsIndex,n).next((function(t){return t.map((function(t){return q_(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=n_.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return iw(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=Xb(u);if(a===n.userId&&e.path.isEqual(l))return rw(t).get(c).next((function(t){if(!t)throw xg();Dg(t.userId===n.userId),o.push(q_(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qm(Fg),i=[];return e.forEach((function(e){var o=n_.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=iw(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Xb(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),m_.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=n_.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Qm(Fg);return iw(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=Xb(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(rw(t).get(e).next((function(t){if(null===t)throw xg();Dg(t.userId===n.userId),r.push(q_(n.R,t))})))})),m_.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Z_(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),m_.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return m_.resolve();var r=IDBKeyRange.lowerBound(n_.prefixForUser(e.userId)),i=[];return iw(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Xb(t[1]);i.push(o)}else r.done()})).next((function(){Dg(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return nw(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ow(t).get(this.userId).next((function(t){return t||new t_(e.userId,-1,"")}))},t}();function nw(t,e,n){var r=n_.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return iw(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function rw(t){return A_(t,e_.store)}function iw(t){return A_(t,n_.store)}function ow(t){return A_(t,t_.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sw=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),aw=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new sw(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Vg.fromTimestamp(new qg(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return uw(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Dg(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return uw(t).$t((function(s,a){var u=V_(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return m_.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return uw(t).$t((function(t,n){var r=V_(n);e(r)}))},t.prototype.Xt=function(t){return cw(t).get(c_.key).next((function(t){return Dg(null!==t),t}))},t.prototype.Zt=function(t,e){return cw(t).put(c_.key,e)},t.prototype.te=function(t,e){return uw(t).put(B_(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ky(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return uw(t).$t({range:r,index:a_.queryTargetsIndexName},(function(t,n,r){var o=V_(n);Ny(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=lw(t);return e.forEach((function(e){var s=Qb(e.path);i.push(o.put(new u_(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),m_.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=lw(t);return m_.forEach(e,(function(e){var o=Qb(e.path);return m_.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=lw(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=lw(t),i=rb();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Xb(t[1]),o=new ay(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Qb(e.path),r=IDBKeyRange.bound([n],[jg(n)],!1,!0),i=0;return lw(t).$t({index:u_.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return uw(t).get(e).next((function(t){return t?V_(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t){return A_(t,a_.store)}function cw(t){return A_(t,c_.store)}function lw(t){return A_(t,u_.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){if(t.code!==Eg.FAILED_PRECONDITION||t.message!==v_)throw t;return Ng("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Fg(n,i);return 0===s?Fg(r,o):s}var pw=function(){function t(t){this.ne=t,this.buffer=new Qm(fw),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();fw(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),dw=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ng("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return ni(e,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return T_(e=n.sent())?(Ng("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,hw(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),vw=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return m_.resolve(Tg.o);var r=new pw(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ng("LruGarbageCollector","Garbage collection skipped; disabled"),m_.resolve(X_)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ng("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),X_):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ng("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),kg()<=to.DEBUG&&Ng("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),m_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),gw=function(){function t(t,e){this.db=t,this.garbageCollector=new vw(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return yw(t,n)},t.prototype.removeReference=function(t,e,n){return yw(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return yw(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,ow(n=t).Ot((function(t){return nw(n,t,r).next((function(t){return t&&(i=!0),m_.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),lw(t).delete([0,Qb(s.path)])}))}));i.push(u)}})).next((function(){return m_.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return yw(t,e)},t.prototype.we=function(t,e){var n,r=lw(t),i=Tg.o;return r.$t({index:u_.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Tg.o&&e(new ay(Xb(n)),i),i=a,n=s):i=Tg.o})).next((function(){i!==Tg.o&&e(new ay(Xb(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function yw(t,e){return lw(t).put((n=e,r=t.currentSequenceNumber,new u_(0,Qb(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mw=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Kg(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Wg(this.inner)},t}(),bw=function(){function t(){this.changes=new mw((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Vg.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ey.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?m_.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),_w=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Tw(t).put(Ew(e),n)},t.prototype.removeEntry=function(t,e){var n=Tw(t),r=Ew(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Tw(t).get(Ew(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Tw(t).get(Ew(e)).next((function(t){return{document:n.ye(e,t),size:tw(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Xm();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Xm(),i=new Hm(ay.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,tw(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return m_.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Tw(t).$t({range:r},(function(t,e,r){for(var s=ay.fromSegments(t);o&&ay.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Xm(),o=e.path.length+1,s={};if(n.isEqual(Vg.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=L_(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=o_.collectionReadTimeIndex}return Tw(t).$t(s,(function(t,n,s){if(t.length===o){var a=O_(r.R,n);e.path.isPrefixOf(a.key.path)?om(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new ww(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Iw(t).get(s_.key).next((function(t){return Dg(!!t),t}))},t.prototype.me=function(t,e){return Iw(t).put(s_.key,e)},t.prototype.ye=function(t,e){if(e){var n=O_(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Vg.min()))return n}return Ey.newInvalidDocument(t)},t}(),ww=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new mw((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return ti(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Qm((function(t,e){return Fg(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=M_(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=tw(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=M_(e.Ie.R,Ey.newNoDocument(o,Vg.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),m_.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(bw);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){return A_(t,s_.store)}function Tw(t){return A_(t,o_.store)}function Ew(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sw=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Dg(n<r&&n>=0&&r<=11);var o=new b_("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(Zb.store),function(t){t.createObjectStore(t_.store,{keyPath:t_.keyPath}),t.createObjectStore(e_.store,{keyPath:e_.keyPath,autoIncrement:!0}).createIndex(e_.userMutationsIndex,e_.userMutationsKeyPath,{unique:!0}),t.createObjectStore(n_.store)}(t),Cw(t),function(t){t.createObjectStore(o_.store)}(t));var s=m_.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(u_.store),t.deleteObjectStore(a_.store),t.deleteObjectStore(c_.store)}(t),Cw(t)),s=s.next((function(){return function(t){var e=t.store(c_.store),n=new c_(0,0,Vg.min().toTimestamp(),0);return e.put(c_.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(e_.store).Nt().next((function(n){t.deleteObjectStore(e_.store),t.createObjectStore(e_.store,{keyPath:e_.keyPath,autoIncrement:!0}).createIndex(e_.userMutationsIndex,e_.userMutationsKeyPath,{unique:!0});var r=e.store(e_.store),i=n.map((function(t){return r.put(t)}));return m_.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(h_.store,{keyPath:h_.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(s_.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(o_.store);e.createIndex(o_.readTimeIndex,o_.readTimeIndexPath,{unique:!1}),e.createIndex(o_.collectionReadTimeIndex,o_.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(f_.store,{keyPath:f_.keyPath})}(t),function(t){t.createObjectStore(p_.store,{keyPath:p_.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(o_.store).$t((function(t,n){e+=tw(n)})).next((function(){var n=new s_(e);return t.store(s_.store).put(s_.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(t_.store),r=t.store(e_.store);return n.Nt().next((function(n){return m_.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(e_.userMutationsIndex,i).next((function(r){return m_.forEach(r,(function(r){Dg(r.userId===n.userId);var i=q_(e.R,r);return Z_(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(u_.store),n=t.store(o_.store);return t.store(c_.store).get(c_.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new zg(n),s=[0,Qb(o)];r.push(e.get(s).next((function(n){return n?m_.resolve():(r=o,e.put(new u_(0,Qb(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return m_.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(l_.store,{keyPath:l_.keyPath});var n=e.store(l_.store),r=new Q_,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Qb(i)})}};return e.store(o_.store).$t({kt:!0},(function(t,e){var n=new zg(t);return i(n.popLast())})).next((function(){return e.store(n_.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Xb(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(a_.store);return n.$t((function(t,r){var i=V_(r),o=B_(e.R,i);return n.put(o)}))},t}();function Cw(t){t.createObjectStore(u_.store,{keyPath:u_.keyPath}).createIndex(u_.documentTargetsIndex,u_.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(a_.store,{keyPath:a_.keyPath}).createIndex(a_.queryTargetsIndexName,a_.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(c_.store)}var kw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nw=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Sg(Eg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new gw(this,i),this.Le=n+"main",this.R=new D_(u),this.Be=new __(this.Le,11,new Sw(this.R)),this.qe=new aw(this.referenceDelegate,this.R),this.Ut=new Y_,this.Ue=(h=this.R,f=this.Ut,new _w(h,f)),this.Ke=new W_,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Ag("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Sg(Eg.FAILED_PRECONDITION,kw);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Tg(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return ni(e,void 0,void 0,(function(){return ri(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return ni(e,void 0,void 0,(function(){return ri(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return ni(e,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Pw(e).put(new h_(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(T_(e))return Ng("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ng("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Aw(t).get(Zb.key).next((function(t){return m_.resolve(e.tn(t))}))},t.prototype.en=function(t){return Pw(t).delete(this.clientId)},t.prototype.nn=function(){return ni(this,void 0,void 0,(function(){var t,e,n,r,i=this;return ri(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=A_(t,h_.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return m_.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?m_.resolve(!0):Aw(t).get(Zb.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Sg(Eg.FAILED_PRECONDITION,kw);return!1}}return!(!e.networkEnabled||!e.inForeground)||Pw(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ng("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return ni(this,void 0,void 0,(function(){var t=this;return ri(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Zb.store,h_.store],(function(e){var n=new N_(e,Tg.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Pw(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ew.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ng("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,d_,(function(o){return i=new N_(o,r.Ne?r.Ne.next():Tg.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Ag("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Sg(Eg.FAILED_PRECONDITION,v_);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Aw(t).get(Zb.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Sg(Eg.FAILED_PRECONDITION,kw)}))},t.prototype.Ze=function(t){var e=new Zb(this.clientId,this.allowTabSynchronization,Date.now());return Aw(t).put(Zb.key,e)},t.yt=function(){return __.yt()},t.prototype.Xe=function(t){var e=this,n=Aw(t);return n.get(Zb.key).next((function(t){return e.tn(t)?(Ng("IndexedDbPersistence","Releasing primary lease."),n.delete(Zb.key)):m_.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ag("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Ng("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return Ag("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ag("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Aw(t){return A_(t,Zb.store)}function Pw(t){return A_(t,h_.store)}function Rw(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var xw=function(t,e){this.progress=t,this.wn=e},Dw=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,ay.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):Jy(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new ay(e)).next((function(t){var e=Zm();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Zm();return this.Ut.getCollectionParents(t,i).next((function(s){return m_.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new Hy(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Ey.newInvalidDocument(c),r=r.insert(c,l)),Am(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){om(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=rb(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Om&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Ow=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=rb(),i=rb(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Mw=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Vg.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var s=o.Cn(e,i);return(Qy(e)||Yy(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(kg()<=to.DEBUG&&Ng("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),im(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Qm(sm(t));return e.forEach((function(e,r){om(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return kg()<=to.DEBUG&&Ng("QueryEngine","Using full collection scan to execute query:",im(e)),this.Sn.getDocumentsMatchingQuery(t,e,Vg.min())},t}(),Lw=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Hm(Fg),this.kn=new mw((function(t){return ky(t)}),Ny),this.$n=Vg.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Dw(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e,n,r){return new Lw(t,e,n,r)}function Uw(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o;return ri(this,(function(s){switch(s.label){case 0:return n=Og(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Dw(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=rb(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function jw(t,e){var n=Og(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,s=h,a=o.batch,u=a.keys(),c=m_.resolve(),u.forEach((function(t){c=c.next((function(){return s.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);Dg(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,o),e.isValidDocument()&&s.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,a)}))).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function qw(t){var e=Og(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Vw(t,e){var n=Og(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a,u,c,l=i.get(o);if(l){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),a=l,c=e,Dg((u=f).resumeToken.approximateByteSize()>0),(0===a.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&s.push(n.qe.updateTargetData(t,f))}}}));var a=Xm();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Bw(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Vg.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return m_.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Bw(t,e,n,r,i){var o=rb();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Xm();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Vg.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Ng("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Kw(t,e){var n=Og(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Ww(t,e){var n=Og(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,m_.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new x_(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Hw(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o,s;return ri(this,(function(a){switch(a.label){case 0:r=Og(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!T_(s=a.sent()))throw s;return Ng("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function zw(t,e,n){var r=Og(t),i=Vg.min(),o=rb();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=tm(e),c=Og(s),l=c.kn.get(u),void 0!==l?m_.resolve(c.Fn.get(l)):c.qe.getTargetData(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Vg.min(),n?o:rb())})).next((function(t){return{documents:t,Bn:o}}));var s,a,u,c,l}))}function Gw(t,e){var n=Og(t),r=Og(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Qw(t){var e=Og(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=Og(n),s=Xm(),a=L_(i),u=Tw(r),c=IDBKeyRange.lowerBound(a,!0),u.$t({index:o_.readTimeIndex,range:c},(function(t,e){var n=O_(o.R,e);s=s.insert(n.key,n),a=e.readTime})).next((function(){return{wn:s,readTime:F_(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Yw(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){return[2,(e=Og(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=Tw(t),n=Vg.min(),e.$t({index:o_.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=F_(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}function $w(t,e,n,r){return ni(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f,p;return ri(this,(function(d){switch(d.label){case 0:for(i=Og(t),o=rb(),s=Xm(),a=eb(),u=0,c=n;u<c.length;u++)l=c[u],h=e.qn(l.metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Ww(i,(v=r,tm(Gy(zg.fromString("__bundle__/docs/"+v)))))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Bw(t,f,s,Vg.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}var v}))}))}function Xw(t,e,n){return void 0===n&&(n=rb()),ni(this,void 0,void 0,(function(){var r,i;return ri(this,(function(o){switch(o.label){case 0:return[4,Ww(t,tm(K_(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Og(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=wb(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken($g.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Jw=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return m_.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:wb(n.createTime)}),m_.resolve()},t.prototype.getNamedQuery=function(t,e){return m_.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:K_(n.bundledQuery),readTime:wb(n.readTime)}),m_.resolve();var n},t}(),Zw=function(){function t(){this.Wn=new Qm(tI.Gn),this.zn=new Qm(tI.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new tI(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new tI(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ay(new zg([])),r=new tI(n,t),i=new tI(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ay(new zg([])),n=new tI(e,t),r=new tI(e,t+1),i=rb();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new tI(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),tI=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ay.comparator(t.key,e.key)||Fg(t.ns,e.ns)},t.Hn=function(t,e){return Fg(t.ns,e.ns)||ay.comparator(t.key,e.key)},t}(),eI=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Qm(tI.Gn)}return t.prototype.checkEmpty=function(t){return m_.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new P_(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new tI(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return m_.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return m_.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return m_.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return m_.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return m_.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new tI(e,0),i=new tI(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),m_.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qm(Fg);return e.forEach((function(t){var e=new tI(t,0),i=new tI(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),m_.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ay.isDocumentKey(i)||(i=i.child(""));var o=new tI(new ay(i),0),s=new Qm(Fg);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),m_.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Dg(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return m_.forEach(e.mutations,(function(i){var o=new tI(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new tI(e,0),r=this.rs.firstAfterOrEqual(n);return m_.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,m_.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),nI=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Hm(ay.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return m_.resolve(n?n.document.clone():Ey.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Xm();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ey.newInvalidDocument(t))})),m_.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Xm(),i=new ay(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||om(e,c)&&(r=r.insert(c.key,c.clone()))}return m_.resolve(r)},t.prototype.fs=function(t,e){return m_.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new rI(this)},t.prototype.getSize=function(t){return m_.resolve(this.size)},t}(),rI=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return ti(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),m_.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(bw),iI=function(){function t(t){this.persistence=t,this.ds=new mw((function(t){return ky(t)}),Ny),this.lastRemoteSnapshotVersion=Vg.min(),this.highestTargetId=0,this.ws=0,this._s=new Zw,this.targetCount=0,this.ys=sw.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),m_.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return m_.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return m_.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),m_.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),m_.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new sw(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,m_.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),m_.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,m_.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),m_.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return m_.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return m_.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),m_.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),m_.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),m_.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return m_.resolve(n)},t.prototype.containsKey=function(t,e){return m_.resolve(this._s.containsKey(e))},t}(),oI=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new Tg(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new iI(this),this.Ut=new G_,this.Ue=(n=this.Ut,new nI(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new D_(e),this.Ke=new Jw(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new eI(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ng("MemoryPersistence","Starting transaction:",t);var i=new sI(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return m_.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),sI=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return ti(e,t),e}(g_),aI=function(){function t(t){this.persistence=t,this.As=new Zw,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw xg()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),m_.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),m_.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),m_.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m_.forEach(this.vs,(function(r){var i=ay.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return m_.or([function(){return m_.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),uI=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t,e){return"firestore_clients_"+t+"_"+e}function lI(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function hI(t,e){return"firestore_targets_"+t+"_"+e}uI.UNAUTHENTICATED=new uI(null),uI.GOOGLE_CREDENTIALS=new uI("google-credentials-uid"),uI.FIRST_PARTY=new uI("first-party-uid");var fI=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Sg(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Ag("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),pI=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Sg(i.error.code,i.error.message)),o?new t(e,i.state,r):(Ag("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),dI=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ob(),s=0;i&&s<r.activeTargetIds.length;++s)i=sy(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ag("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),vI=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ag("SharedClientState","Failed to parse online state: "+e),null)},t}(),gI=function(){function t(){this.activeTargetIds=ob()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),yI=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Hm(Fg),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=cI(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new gI),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return ni(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return ri(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(cI(this.persistenceKey,r)))&&(o=dI.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(hI(this.persistenceKey,t));if(n){var r=pI.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(hI(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ng("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ng("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ng("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ng("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Ag("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return ni(e,void 0,void 0,(function(){var t,e,r,i,o,s;return ri(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Tg.o;if(null!=t)try{var n=JSON.parse(t);Dg("number"==typeof n),e=n}catch(r){Ag("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==Tg.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new fI(this.currentUser,t,e,n),i=lI(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=lI(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=hI(this.persistenceKey,t),i=new pI(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return dI.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return fI.Vs(new uI(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return pI.Vs(r,e)},t.prototype.js=function(t){return vI.Vs(t)},t.prototype.ii=function(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ng("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ob();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),mI=function(){function t(){this.li=new gI,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new gI,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),bI=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),_I=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ng("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ng("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),wI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},II=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),TI=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return ti(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new Ig;s.listenOnce(gg.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case vg.NO_ERROR:var e=s.getResponseJson();Ng("Connection","XHR received:",JSON.stringify(e)),i(e);break;case vg.TIMEOUT:Ng("Connection",'RPC "'+t+'" timed out'),o(new Sg(Eg.DEADLINE_EXCEEDED,"Request time out"));break;case vg.HTTP_ERROR:var n=s.getStatus();if(Ng("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(Eg).indexOf(c)>=0?c:Eg.UNKNOWN);o(new Sg(a,r.message))}else o(new Sg(Eg.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Sg(Eg.UNAVAILABLE,"Connection failed."));break;default:xg()}}finally{Ng("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new lg,o=rd(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new _g({})),this.Fi(s.initMessageHeaders,e),bi()||Ii()||mi().indexOf("Electron/")>=0||((n=mi()).indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0)||mi().indexOf("MSAppHost/")>=0||wi()||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");Ng("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,l=!1,h=new II({Ei:function(t){l?Ng("Connection","Not sending because WebChannel is closed:",t):(c||(Ng("Connection","Opening WebChannel transport."),u.open(),c=!0),Ng("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,wg.EventType.OPEN,(function(){l||Ng("Connection","WebChannel transport opened.")})),f(u,wg.EventType.CLOSE,(function(){l||(l=!0,Ng("Connection","WebChannel transport closed"),h.Vi())})),f(u,wg.EventType.ERROR,(function(t){l||(l=!0,Pg("Connection","WebChannel transport errored:",t),h.Vi(new Sg(Eg.UNAVAILABLE,"The operation could not be completed")))})),f(u,wg.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];Dg(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ng("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Um[t];if(void 0!==e)return Wm(e)}(o),a=i.message;void 0===s&&(s=Eg.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new Sg(s,a)),u.close()}else Ng("Connection","WebChannel received:",n),h.Si(n)}})),f(o,yg.STAT_EVENT,(function(t){t.stat===mg?Ng("Connection","Detected buffering proxy"):t.stat===bg&&Ng("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ng("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Ng("RestConnection","Received: ",t),t}),(function(e){throw Pg("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=wI[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return"undefined"!=typeof window?window:null}function SI(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){return new yb(t,!0)}var kI=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Ng("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),NI=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new kI(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return ni(this,void 0,void 0,(function(){return ri(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Eg.RESOURCE_EXHAUSTED?(Ag(e.toString()),Ag("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Eg.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Sg(Eg.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return ni(t,void 0,void 0,(function(){return ri(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ng("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ng("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),AI=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return ti(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:xg(),o=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Dg(void 0===e||"string"==typeof e),$g.fromBase64String(e||"")):(Dg(void 0===e||e instanceof Uint8Array),$g.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Eg.UNKNOWN:Wm(t.code);return new Sg(e,t.message||"")}(u);n=new lb(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=Sb(t,i.document.name),s=wb(i.document.updateTime);var u=new Iy({mapValue:{fields:i.document.fields}}),c=(a=Ey.newFoundDocument(o,s,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new ub(c,l,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=Sb(t,i.document),s=i.readTime?wb(i.readTime):Vg.min(),u=Ey.newNoDocument(o,s),a=i.removedTargetIds||[],n=new ub([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=Sb(t,i.document),s=i.removedTargetIds||[],n=new ub([],s,o,null);else{if(!("filter"in e))return xg();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new Bm(i),s=h.targetId,n=new cb(s,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Vg.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Vg.min():e.readTime?wb(e.readTime):Vg.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=Nb(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=Ay(i)?{documents:Ob(e,i)}:{query:Mb(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=bb(e,n.resumeToken):n.snapshotVersion.compareTo(Vg.min())>0&&(r.readTime=mb(e,n.snapshotVersion.toTimestamp())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xg()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=Nb(this.R),e.removeTarget=t,this.cr(e)},e}(NI),PI=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return ti(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Dg(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(Dg(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?wb(e.updateTime):wb(n)).isEqual(Vg.min())&&(r=wb(n)),new Em(r,e.transformResults||[]);var e,n,r}))):[]),n=wb(t.commitTime);return this.listener.Tr(n,e)}var r,i;return Dg(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Nb(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return xb(e.R,t)}))};this.cr(n)},e}(NI),RI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return ti(e,t),e.prototype.br=function(){if(this.Rr)throw new Sg(Eg.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Eg.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Sg(Eg.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Eg.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Sg(Eg.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),xI=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Ag(e),this.Vr=!1):Ng("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),DI=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return ni(o,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:return BI(this)?(Ng("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return(e=Og(t)).Or.add(4),[4,MI(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,OI(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new xI(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t){return ni(this,void 0,void 0,(function(){var e,n;return ri(this,(function(r){switch(r.label){case 0:if(!BI(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function MI(t){return ni(this,void 0,void 0,(function(){var e,n;return ri(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function LI(t,e){var n=Og(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),VI(n)?qI(n):rT(n).er()&&UI(n,e))}function FI(t,e){var n=Og(t),r=rT(n);n.$r.delete(e),r.er()&&jI(n,e),0===n.$r.size&&(r.er()?r.ir():BI(n)&&n.Br.set("Unknown"))}function UI(t,e){t.qr.U(e.targetId),rT(t).mr(e)}function jI(t,e){t.qr.U(e),rT(t).yr(e)}function qI(t){t.qr=new fb({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),rT(t).start(),t.Br.Sr()}function VI(t){return BI(t)&&!rT(t).tr()&&t.$r.size>0}function BI(t){return 0===Og(t).Or.size}function KI(t){t.qr=void 0}function WI(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){return t.$r.forEach((function(e,n){UI(t,e)})),[2]}))}))}function HI(t,e){return ni(this,void 0,void 0,(function(){return ri(this,(function(n){return KI(t),VI(t)?(t.Br.Nr(e),qI(t)):t.Br.set("Unknown"),[2]}))}))}function zI(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o;return ri(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof lb&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o;return ri(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ng("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,GI(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ub?t.qr.X(e):e instanceof cb?t.qr.rt(e):t.qr.et(e),n.isEqual(Vg.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,qw(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,(a=t,u=n,c=a.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=a.$r.get(e);n&&a.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=a.$r.get(t);if(e){a.$r.set(t,e.withResumeToken($g.EMPTY_BYTE_STRING,e.snapshotVersion)),jI(a,t);var n=new x_(e.target,t,1,e.sequenceNumber);UI(a,n)}})),a.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ng("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,GI(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function GI(t,e,n){return ni(this,void 0,void 0,(function(){var r=this;return ri(this,(function(i){switch(i.label){case 0:if(!T_(e))throw e;return t.Or.add(1),[4,MI(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return qw(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return ni(r,void 0,void 0,(function(){return ri(this,(function(e){switch(e.label){case 0:return Ng("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,OI(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function QI(t,e){return e().catch((function(n){return GI(t,n,e)}))}function YI(t){return ni(this,void 0,void 0,(function(){var e,n,r,i,o;return ri(this,(function(s){switch(s.label){case 0:e=Og(t),n=iT(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!(BI(a=e)&&a.kr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Kw(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=iT(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,GI(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return $I(e)&&XI(e),[2]}var a}))}))}function $I(t){return BI(t)&&!iT(t).tr()&&t.kr.length>0}function XI(t){iT(t).start()}function JI(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){return iT(t).Ar(),[2]}))}))}function ZI(t){return ni(this,void 0,void 0,(function(){var e,n,r,i;return ri(this,(function(o){for(e=iT(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function tT(t,e,n){return ni(this,void 0,void 0,(function(){var r,i;return ri(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=R_.from(r,e,n),[4,QI(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,YI(t)];case 2:return o.sent(),[2]}}))}))}function eT(t,e){return ni(this,void 0,void 0,(function(){return ri(this,(function(n){switch(n.label){case 0:return e&&iT(t).pr?[4,function(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return Km(r=e.code)&&r!==Eg.ABORTED?(n=t.kr.shift(),iT(t).sr(),[4,QI(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,YI(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return $I(t)&&XI(t),[2]}}))}))}function nT(t,e){return ni(this,void 0,void 0,(function(){var n;return ri(this,(function(r){switch(r.label){case 0:return n=Og(t),e?(n.Or.delete(2),[4,OI(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,MI(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function rT(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:WI.bind(null,t),Ri:HI.bind(null,t),_r:zI.bind(null,t)},(i=Og(e)).br(),new AI(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return ni(o,void 0,void 0,(function(){return ri(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),VI(t)?qI(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),KI(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function iT(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:JI.bind(null,t),Ri:eT.bind(null,t),Ir:ZI.bind(null,t),Tr:tT.bind(null,t)},(i=Og(e)).br(),new PI(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return ni(o,void 0,void 0,(function(){return ri(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,YI(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(Ng("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var oT=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new y_,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Sg(Eg.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function sT(t,e){if(Ag("AsyncQueue",e+": "+t),T_(t))return new Sg(Eg.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aT=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ay.comparator(e.key,n.key)}:function(t,e){return ay.comparator(t.key,e.key)},this.keyedMap=Zm(),this.sortedSet=new Hm(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),uT=function(){function t(){this.Qr=new Hm(ay.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):xg():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),cT=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,aT.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&nm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),lT=function(){this.Wr=void 0,this.listeners=[]},hT=function(){this.queries=new mw((function(t){return rm(t)}),nm),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return ri(this,(function(c){switch(c.label){case 0:if(n=Og(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new lT),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=sT(a,"Initialization of query '"+im(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&gT(n),[2]}}))}))}function pT(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s;return ri(this,(function(a){return n=Og(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function dT(t,e){for(var n=Og(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&gT(n)}function vT(t,e,n){var r=Og(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function gT(t){t.Gr.forEach((function(t){t.next()}))}var yT=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new cT(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=cT.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),mT=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),bT=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Sb(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Rb(this.R,t.document,!1):Ey.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return wb(t)},t}(),_T=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=wT(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new bT(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||rb()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return ni(this,void 0,void 0,(function(){var t,e,n,r,i;return ri(this,(function(o){switch(o.label){case 0:return[4,$w(this.localStore,new bT(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Xw(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new xw(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IT=function(t){this.key=t},TT=function(t){this.key=t},ET=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=rb(),this.mutatedKeys=rb(),this.lo=sm(t),this.fo=new aT(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new uT,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Qy(this.query)&&i.size===this.query.limit?i.last():null,c=Yy(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=om(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Qy(this.query)||Yy(this.query))for(;s.size>this.query.limit;){var l=Qy(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xg()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new cT(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new uT,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=rb(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new TT(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new IT(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=rb();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return cT.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ST=function(t,e,n){this.query=t,this.targetId=e,this.view=n},CT=function(t){this.key=t,this.bo=!1},kT=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new mw((function(t){return rm(t)}),nm),this.Vo=new Map,this.So=new Set,this.Do=new Hm(ay.comparator),this.Co=new Map,this.No=new Zw,this.xo={},this.Fo=new Map,this.ko=sw.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function NT(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ri(this,(function(u){switch(u.label){case 0:return n=rE(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Ww(n.localStore,tm(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,AT(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&LI(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function AT(t,e,n,r){return ni(this,void 0,void 0,(function(){var i,o,s,a,u,c;return ri(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return ni(this,void 0,void 0,(function(){var i,o,s;return ri(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,zw(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(BT(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,zw(t.localStore,e,!0)];case 1:return i=l.sent(),o=new ET(e,i.Bn),s=o._o(i.documents),a=ab.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),BT(t,n,u.To),c=new ST(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function PT(t,e){return ni(this,void 0,void 0,(function(){var n,r,i;return ri(this,(function(o){switch(o.label){case 0:return n=Og(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!nm(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Hw(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),FI(n.remoteStore,r.targetId),qT(n,r.targetId)})).catch(hw)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return qT(n,r.targetId),[4,Hw(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function RT(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o,s;return ri(this,(function(a){switch(a.label){case 0:r=iE(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=Og(u),f=qg.now(),p=c.reduce((function(t,e){return t.add(e.key)}),rb()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=Pm(o,l.get(o.key));null!=s&&n.push(new Om(o.key,s,Ty(s.value.mapValue),Sm.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Hm(Fg)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,HT(r,i.changes)];case 3:return a.sent(),[4,YI(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=sT(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function xT(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:n=Og(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Vw(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Dg(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Dg(r.bo):t.removedDocuments.size>0&&(Dg(r.bo),r.bo=!1))})),[4,HT(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,hw(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function DT(t,e,n){var r=Og(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Og(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&gT(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OT(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o,s,a,u;return ri(this,(function(c){switch(c.label){case 0:return(r=Og(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Hm(ay.comparator)).insert(o,Ey.newNoDocument(o,Vg.min())),a=rb().add(o),u=new sb(Vg.min(),new Map,new Qm(Fg),s,a),[4,xT(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),WT(r),[3,4];case 2:return[4,Hw(r.localStore,e,!1).then((function(){return qT(r,e,n)})).catch(hw)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function MT(t,e){return ni(this,void 0,void 0,(function(){var n,r,i;return ri(this,(function(o){switch(o.label){case 0:n=Og(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,jw(n.localStore,e)];case 2:return i=o.sent(),jT(n,r,null),UT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,HT(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,hw(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function LT(t,e,n){return ni(this,void 0,void 0,(function(){var r,i;return ri(this,(function(o){switch(o.label){case 0:r=Og(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore,a=e,u=Og(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,a).next((function(n){return Dg(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),jT(r,e,n),UT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,HT(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,hw(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function FT(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s;return ri(this,(function(a){switch(a.label){case 0:BI((n=Og(t)).remoteStore)||Ng("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.localStore,c=Og(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=sT(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function UT(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function jT(t,e,n){var r=Og(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function qT(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||VT(t,e)}))}function VT(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(FI(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),WT(t))}function BT(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof IT?(t.No.addReference(o.key,e),KT(t,o)):o instanceof TT?(Ng("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||VT(t,o.key)):xg()}}function KT(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ng("SyncEngine","New document in limbo: "+n),t.So.add(r),WT(t))}function WT(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ay(zg.fromString(e)),r=t.ko.next();t.Co.set(r,new CT(n)),t.Do=t.Do.insert(n,r),LI(t.remoteStore,new x_(tm(Gy(n.path)),r,2,Tg.o))}}function HT(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o,s;return ri(this,(function(a){switch(a.label){case 0:return r=Og(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ow.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return ri(this,(function(h){switch(h.label){case 0:n=Og(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return m_.forEach(e,(function(e){return m_.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return m_.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!T_(r=h.sent()))throw r;return Ng("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function zT(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return(n=Og(t)).currentUser.isEqual(e)?[3,3]:(Ng("SyncEngine","User change. New user:",e.toKey()),[4,Uw(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new Sg(Eg.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,HT(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function GT(t,e){var n=Og(t),r=n.Co.get(e);if(r&&r.bo)return rb().add(r.key);var i=rb(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function QT(t,e){return ni(this,void 0,void 0,(function(){var n,r,i;return ri(this,(function(o){switch(o.label){case 0:return[4,zw((n=Og(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&BT(n,e.targetId,i.To),i)]}}))}))}function YT(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){return[2,Qw((e=Og(t)).localStore).then((function(t){return HT(e,t)}))]}))}))}function $T(t,e,n,r){return ni(this,void 0,void 0,(function(){var i,o;return ri(this,(function(s){switch(s.label){case 0:return[4,(a=(i=Og(t)).localStore,u=e,c=Og(a),l=Og(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):m_.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,YI(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(jT(i,e,r||null),UT(i,e),function(t,e){Og(Og(t)._n).Gt(e)}(i.localStore,e)):xg(),s.label=4;case 4:return[4,HT(i,o)];case 5:return s.sent(),[3,7];case 6:Ng("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function XT(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return ri(this,(function(l){switch(l.label){case 0:return rE(n=Og(t)),iE(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,JT(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,nT(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],LI(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return qT(n,e),Hw(n.localStore,e,!0)})),FI(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,JT(n,u)];case 5:return l.sent(),(h=Og(n)).Co.forEach((function(t,e){FI(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new Hm(ay.comparator),n.$o=!1,[4,nT(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function JT(t,e,n){return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,v;return ri(this,(function(g){switch(g.label){case 0:n=Og(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Ww(n.localStore,tm(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,QT(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Gw(n.localStore,a)];case 8:return v=g.sent(),[4,Ww(n.localStore,v)];case 9:return u=g.sent(),[4,AT(n,ZT(v),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function ZT(t){return zy(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tE(t){var e=Og(t);return Og(Og(e.localStore).persistence).fn()}function eE(t,e,n,r){return ni(this,void 0,void 0,(function(){var i,o,s;return ri(this,(function(a){switch(a.label){case 0:return(i=Og(t)).$o?(Ng("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qw(i.localStore)];case 3:return o=a.sent(),s=sb.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,HT(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Hw(i.localStore,e,!0)];case 6:return a.sent(),qT(i,e,r),[3,8];case 7:xg(),a.label=8;case 8:return[2]}}))}))}function nE(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return ri(this,(function(p){switch(p.label){case 0:if(!(r=rE(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Ng("SyncEngine","Adding an already active target "+s),[3,5]):[4,Gw(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Ww(r.localStore,a)];case 3:return u=p.sent(),[4,AT(r,ZT(a),u.targetId,!1)];case 4:p.sent(),LI(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return ri(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Hw(r.localStore,t,!1).then((function(){FI(r.remoteStore,t),qT(r,t)})).catch(hw)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function rE(t){var e=Og(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OT.bind(null,e),e.vo._r=dT.bind(null,e.eventManager),e.vo.Mo=vT.bind(null,e.eventManager),e}function iE(t){var e=Og(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LT.bind(null,e),e}function oE(t,e,n){var r=Og(t);(function(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o,s,a,u;return ri(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,(l=t.localStore,h=r,f=Og(l),p=wb(h.createTime),f.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return f.Ke.getBundleMetadata(t,h.id)})).then((function(t){return!!t&&t.createTime.compareTo(p)>=0})))];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(wT(r)),i=new _T(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=c.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,HT(t,a.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Og(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return c.sent(),n._completeWith(a.progress),[3,15];case 14:return Pg("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}var l,h,f,p}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var sE=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){switch(e.label){case 0:return this.R=CI(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Fw(this.persistence,new Mw,t.initialUser,this.R)},t.prototype.qo=function(t){return new oI(aI.bs,this.R)},t.prototype.Bo=function(t){return new mI},t.prototype.terminate=function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),aE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return ti(e,t),e.prototype.initialize=function(e){return ni(this,void 0,void 0,(function(){return ri(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Yw(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,iE(this.Qo.syncEngine)];case 4:return n.sent(),[4,YI(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Fw(this.persistence,new Mw,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new dw(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Rw(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?J_.withCacheSize(this.cacheSizeBytes):J_.DEFAULT;return new Nw(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,EI(),SI(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new mI},e}(sE),uE=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return ti(e,t),e.prototype.initialize=function(e){return ni(this,void 0,void 0,(function(){var n,r=this;return ri(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof yI?(this.sharedClientState.syncEngine={ui:$T.bind(null,n),ai:eE.bind(null,n),hi:nE.bind(null,n),fn:tE.bind(null,n),ci:YT.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return ni(r,void 0,void 0,(function(){return ri(this,(function(e){switch(e.label){case 0:return[4,XT(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=EI();if(!yI.yt(e))throw new Sg(Eg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Rw(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new yI(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(aE),cE=function(){function t(){}return t.prototype.initialize=function(t,e){return ni(this,void 0,void 0,(function(){var n=this;return ri(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return DT(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=zT.bind(null,this.syncEngine),[4,nT(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new hT},t.prototype.createDatastore=function(t){var e,n,r=CI(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new TI(e));return n=t.credentials,new RI(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return DT(s.syncEngine,t,0)},o=_I.yt()?new _I:new bI,new DI(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,c=new kT(n,r,i,o,s,a),u&&(c.$o=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return e=Og(t),Ng("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,MI(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return ni(this,void 0,void 0,(function(){var r;return ri(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hE=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),fE=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new y_,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return ni(this,void 0,void 0,(function(){var t,e,n,r;return ri(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new mT(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return ni(this,void 0,void 0,(function(){var t,e;return ri(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return ni(this,void 0,void 0,(function(){var t,e;return ri(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),pE=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return ni(this,void 0,void 0,(function(){var e,n=this;return ri(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Sg(Eg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ri(this,(function(u){switch(u.label){case 0:return n=Og(t),r=Nb(n.R)+"/documents",i={documents:e.map((function(t){return Eb(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){Dg(!!e.found),e.found.name,e.found.updateTime;var n=Sb(t,e.found.name),r=wb(e.found.updateTime),i=new Iy({mapValue:{fields:e.found.fields}});return Ey.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){Dg(!!e.missing),Dg(!!e.readTime);var n=Sb(t,e.missing),r=wb(e.readTime);return Ey.newNoDocument(n,r)}(e,r):xg());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Dg(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new qm(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return ni(this,void 0,void 0,(function(){var t,e=this;return ri(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ay.fromPath(n);e.mutations.push(new Vm(r,e.precondition(r)))})),[4,function(t,e){return ni(this,void 0,void 0,(function(){var n,r,i;return ri(this,(function(o){switch(o.label){case 0:return n=Og(t),r=Nb(n.R)+"/documents",i={writes:e.map((function(t){return xb(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw xg();e=Vg.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Sg(Eg.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Sm.updateTime(e):Sm.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Vg.min()))throw new Sg(Eg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sm.updateTime(e)}return Sm.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),dE=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new kI(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return ni(t,void 0,void 0,(function(){var t,e,n=this;return ri(this,(function(r){return t=new pE(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!iy(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Km(e)}return!1},t}(),vE=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=uI.UNAUTHENTICATED,this.clientId=Lg.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return ni(r,void 0,void 0,(function(){return ri(this,(function(e){switch(e.label){case 0:return Ng("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Sg(Eg.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new y_;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return ni(t,void 0,void 0,(function(){var t,n;return ri(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=sT(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t,e){return ni(this,void 0,void 0,(function(){var n,r,i=this;return ri(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ng("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return ni(i,void 0,void 0,(function(){return ri(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Uw(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function yE(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,mE(t)];case 1:return n=i.sent(),Ng("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return(n=Og(t)).asyncQueue.verifyOperationInProgress(),Ng("RemoteStore","RemoteStore received new credentials"),r=BI(n),n.Or.add(3),[4,MI(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,OI(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function mE(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ng("FirestoreClient","Using default OfflineComponentProvider"),[4,gE(t,new sE)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function bE(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ng("FirestoreClient","Using default OnlineComponentProvider"),[4,yE(t,new cE)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function _E(t){return mE(t).then((function(t){return t.persistence}))}function wE(t){return mE(t).then((function(t){return t.localStore}))}function IE(t){return bE(t).then((function(t){return t.remoteStore}))}function TE(t){return bE(t).then((function(t){return t.syncEngine}))}function EE(t){return ni(this,void 0,void 0,(function(){var e,n;return ri(this,(function(r){switch(r.label){case 0:return[4,bE(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=NT.bind(null,e.syncEngine),n.onUnlisten=PT.bind(null,e.syncEngine),n)]}}))}))}function SE(t,e,n){var r=this;void 0===n&&(n={});var i=new y_;return t.asyncQueue.enqueueAndForget((function(){return ni(r,void 0,void 0,(function(){var r;return ri(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hE({next:function(o){e.enqueueAndForget((function(){return pT(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Sg(Eg.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Sg(Eg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new yT(Gy(n.path),o,{includeMetadataChanges:!0,so:!0});return fT(t,s)},[4,EE(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function CE(t,e,n){var r=this;void 0===n&&(n={});var i=new y_;return t.asyncQueue.enqueueAndForget((function(){return ni(r,void 0,void 0,(function(){var r;return ri(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hE({next:function(n){e.enqueueAndForget((function(){return pT(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Sg(Eg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new yT(n,o,{includeMetadataChanges:!0,so:!0});return fT(t,s)},[4,EE(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var kE=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},NE=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),AE=new Map,PE=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},RE=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(uI.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),xE=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),DE=function(){function t(t){var e=this;this.currentUser=uI.UNAUTHENTICATED,this.oc=new y_,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ng("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Ng("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ng("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Dg("string"==typeof n.accessToken),new PE(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return ni(n,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Dg(null===t||"string"==typeof t),new uI(t)},t}(),OE=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=uI.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),ME=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new OE(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(uI.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t,e,n){if(!n)throw new Sg(Eg.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function FE(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function UE(t,e,n,r){if(!0===e&&!0===r)throw new Sg(Eg.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function jE(t){if(!ay.isDocumentKey(t))throw new Sg(Eg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function qE(t){if(ay.isDocumentKey(t))throw new Sg(Eg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function VE(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":xg()}function BE(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Sg(Eg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=VE(t);throw new Sg(Eg.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function KE(t,e){if(e<=0)throw new Sg(Eg.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WE=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Sg(Eg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Sg(Eg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,UE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),HE=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WE({}),this._settingsFrozen=!1,t instanceof NE?(this._databaseId=t,this._credentials=new RE):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Sg(Eg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new NE(t.options.projectId)}(t),this._credentials=new DE(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Sg(Eg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Sg(Eg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WE(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new RE;switch(t.type){case"gapi":var e=t.client;return Dg(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ME(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Sg(Eg.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=AE.get(this))&&(Ng("ComponentProvider","Removing Datastore"),AE.delete(this),t.terminate()),Promise.resolve();var t},t}(),zE=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new QE(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),GE=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),QE=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Gy(r))||this)._path=r,i.type="collection",i}return ti(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new zE(this.firestore,null,new ay(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(GE);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Qi(t),LE("collection","path",e),t instanceof HE)return qE(n=zg.fromString.apply(zg,si([e],r))),new QE(t,null,n);if(!(t instanceof zE||t instanceof QE))throw new Sg(Eg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return qE(n=zg.fromString.apply(zg,si([t.path],r)).child(zg.fromString(e))),new QE(t.firestore,null,n)}function $E(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Qi(t),1===arguments.length&&(e=Lg.u()),LE("doc","path",e),t instanceof HE)return jE(n=zg.fromString.apply(zg,si([e],r))),new zE(t,null,new ay(n));if(!(t instanceof zE||t instanceof QE))throw new Sg(Eg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return jE(n=t._path.child(zg.fromString.apply(zg,si([e],r)))),new zE(t.firestore,t instanceof QE?t.converter:null,new ay(n))}function XE(t,e){return t=Qi(t),e=Qi(e),(t instanceof zE||t instanceof QE)&&(e instanceof zE||e instanceof QE)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function JE(t,e){return t=Qi(t),e=Qi(e),t instanceof GE&&e instanceof GE&&t.firestore===e.firestore&&nm(t._query,e._query)&&t.converter===e.converter}var ZE=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new kI(this,"async_queue_retry"),this.Tc=function(){var e=SI();e&&Ng("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=SI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=SI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise((function(t){})):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.Rc()}))},t.prototype.Rc=function(){return ni(this,void 0,void 0,(function(){var t,e=this;return ri(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!T_(t=n.sent()))throw t;return Ng("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.Rc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ac=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Ag("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=oT.createAndSchedule(this,t,e,n,(function(t){return r.bc(t)}));return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&xg()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return ni(this,void 0,void 0,(function(){var t;return ri(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()}))},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function tS(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var eS=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new y_,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),nS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ZE,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return ti(e,t),e.prototype._terminate=function(){return this._firestoreClient||iS(this),this._firestoreClient.terminate()},e}(HE);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){return t._firestoreClient||iS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function iS(t){var e,n,r,i,o,s=t._freezeSettings(),a=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new kE(n,r,i,(o=s).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new vE(t._credentials,t._queue,a)}function oS(t,e,n){var r=this,i=new y_;return t.asyncQueue.enqueue((function(){return ni(r,void 0,void 0,(function(){var r;return ri(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,gE(t,n)];case 1:return o.sent(),[4,yE(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===Eg.FAILED_PRECONDITION||s.code===Eg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function sS(t){if(t._initialized||t._terminated)throw new Sg(Eg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aS=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qg(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),uS=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t($g.fromBase64String(e))}catch(n){throw new Sg(Eg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t($g.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),cS=function(t){this._methodName=t},lS=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Sg(Eg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Sg(Eg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Fg(this._lat,t._lat)||Fg(this._long,t._long)},t}(),hS=/^__.*__$/,fS=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Om(t,this.data,this.fieldMask,e,this.fieldTransforms):new Dm(t,this.data,e,this.fieldTransforms)},t}(),pS=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Om(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xg()}}var vS=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return MS(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(dS(this.Cc)&&hS.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),gS=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||CI(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new vS({Cc:t,methodName:e,Bc:n,path:Qg.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function yS(t){var e=t._freezeSettings(),n=CI(t._databaseId);return new gS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mS(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);RS("Data must be an object, but it was:",s,r);var a,u,c=AS(r,s);if(o.merge)a=new Yg(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=xS(e,f[h],n);if(!s.contains(p))throw new Sg(Eg.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");LS(l,p)||l.push(p)}a=new Yg(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new fS(new Iy(c),a,u)}var bS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw 1===t.Cc?t.Mc(this._methodName+"() can only appear at the top level of your update data"):t.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(cS);function _S(t,e,n){return new vS({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var wS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype._toFieldTransform=function(t){return new Tm(t.path,new vm)},e.prototype.isEqual=function(t){return t instanceof e},e}(cS),IS=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return ti(e,t),e.prototype._toFieldTransform=function(t){var e=_S(this,t,!0),n=this.Uc.map((function(t){return NS(t,e)})),r=new gm(n);return new Tm(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cS),TS=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return ti(e,t),e.prototype._toFieldTransform=function(t){var e=_S(this,t,!0),n=this.Uc.map((function(t){return NS(t,e)})),r=new mm(n);return new Tm(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cS),ES=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return ti(e,t),e.prototype._toFieldTransform=function(t){var e=new _m(t.R,lm(t.R,this.Kc));return new Tm(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(cS);function SS(t,e,n,r){var i=t.qc(1,e,n);RS("Data must be an object, but it was:",i,r);var o=[],s=Iy.empty();Kg(r,(function(t,r){var a=OS(e,t,n);r=Qi(r);var u=i.$c(a);if(r instanceof bS)o.push(a);else{var c=NS(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Yg(o);return new pS(s,a,i.fieldTransforms)}function CS(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[xS(e,r,n)],u=[i];if(o.length%2!=0)throw new Sg(Eg.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(xS(e,o[c])),u.push(o[c+1]);for(var l=[],h=Iy.empty(),f=a.length-1;f>=0;--f)if(!LS(l,a[f])){var p=a[f],d=u[f];d=Qi(d);var v=s.$c(p);if(d instanceof bS)l.push(p);else{var g=NS(d,v);null!=g&&(l.push(p),h.set(p,g))}}var y=new Yg(l);return new pS(h,y,s.fieldTransforms)}function kS(t,e,n,r){return void 0===r&&(r=!1),NS(n,t.qc(r?4:3,e))}function NS(t,e){if(PS(t=Qi(t)))return RS("Unsupported field value:",e,t),AS(t,e);if(t instanceof cS)return function(t,e){if(!dS(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=NS(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Qi(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return lm(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=qg.fromDate(t);return{timestampValue:mb(e.R,n)}}if(t instanceof qg)return n=new qg(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:mb(e.R,n)};if(t instanceof lS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uS)return{bytesValue:bb(e.R,t._byteString)};if(t instanceof zE){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ib(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+VE(t))}(t,e)}function AS(t,e){var n={};return Wg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kg(t,(function(t,r){var i=NS(r,e.xc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function PS(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof qg||t instanceof lS||t instanceof uS||t instanceof zE||t instanceof cS)}function RS(t,e,n){if(!PS(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=VE(n);throw"an object"===r?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}var i}function xS(t,e,n){if((e=Qi(e))instanceof aS)return e._internalPath;if("string"==typeof e)return OS(t,e);throw MS("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var DS=new RegExp("[~\\*/\\[\\]]");function OS(t,e,n){if(e.search(DS)>=0)throw MS("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(aS.bind.apply(aS,si([void 0],e.split(".")))))._internalPath}catch(jC){throw MS("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function MS(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Sg(Eg.INVALID_ARGUMENT,(a+=". ")+t+u)}function LS(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FS=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new zE(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new US(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(jS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),US=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(FS);function jS(t,e){return"string"==typeof e?OS(t,e):e instanceof aS?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qS=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),VS=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return ti(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new BS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(jS("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(FS),BS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(VS),KS=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new qS(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new BS(n._firestore,n._userDataWriter,r.key,r,new qS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Sg(Eg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new BS(t._firestore,t._userDataWriter,e.doc.key,e.doc,new qS(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new BS(t._firestore,t._userDataWriter,e.doc.key,e.doc,new qS(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:WS(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function WS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xg()}}function HS(t,e){return t instanceof VS&&e instanceof VS?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof KS&&e instanceof KS&&t._firestore===e._firestore&&JE(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){if(Yy(t)&&0===t.explicitOrderBy.length)throw new Sg(Eg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var GS=function(){};function QS(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var YS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return ti(e,t),e.prototype._apply=function(t){var e,n,r,i=yS(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){nC(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(eC(r,t,h))}a={arrayValue:{values:u}}}else a=eC(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||nC(s,o),a=kS(n,"where",s,"in"===o||"not-in"===o);var f=Py.create(i,o,a);return function(t,e){if(e.g()){var n=Xy(t);if(null!==n&&!n.isEqual(e.field))throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=$y(t);null!==r&&rC(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Sg(Eg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Sg(Eg.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new GE(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new Hy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(GS),$S=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return ti(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Vy(e,n);return function(t,e){if(null===$y(t)){var n=Xy(t);null!==n&&rC(t,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new GE(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new Hy(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(GS),XS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return ti(e,t),e.prototype._apply=function(t){return new GE(t.firestore,t.converter,em(t._query,this.zc,this.Hc))},e}(GS),JS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return ti(e,t),e.prototype._apply=function(t){var e,n,r=tC(t,this.type,this.Jc,this.Yc);return new GE(t.firestore,t.converter,(e=t._query,n=r,new Hy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(GS),ZS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return ti(e,t),e.prototype._apply=function(t){var e,n,r=tC(t,this.type,this.Jc,this.Yc);return new GE(t.firestore,t.converter,(e=t._query,n=r,new Hy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(GS);function tC(t,e,n,r){if(n[0]=Qi(n[0]),n[0]instanceof FS)return function(t,e,n,r,i){if(!r)throw new Sg(Eg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Zy(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(vy(e,r.key));else{var c=r.data.field(u.field);if(ey(c))throw new Sg(Eg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new jy(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=yS(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Sg(Eg.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Jy(t)&&-1!==c.indexOf("/"))throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(zg.fromString(c));if(!ay.isDocumentKey(l))throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ay(l);a.push(vy(e,h))}else{var f=kS(n,r,c);a.push(f)}}return new jy(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function eC(t,e,n){if("string"==typeof(n=Qi(n))){if(""===n)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jy(e)&&-1!==n.indexOf("/"))throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(zg.fromString(n));if(!ay.isDocumentKey(r))throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return vy(t,new ay(r))}if(n instanceof zE)return vy(t,n._key);throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+VE(n)+".")}function nC(t,e){if(!Array.isArray(t)||0===t.length)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function rC(t,e,n){if(!n.isEqual(e))throw new Sg(Eg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iC=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),uy(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Zg(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ty(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw xg()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Kg(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new lS(Zg(t.latitude),Zg(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ny(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ry(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Jg(t);return new qg(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=zg.fromString(t);Dg(Gb(n));var r=new NE(n.get(1),n.get(3)),i=new ay(n.popFirst(5));return r.isEqual(e)||Ag("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var sC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ti(e,t),e.prototype.convertBytes=function(t){return new uS(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new zE(this.firestore,null,e)},e}(iC),aC=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=yS(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=uC(t,this._firestore),i=oC(r.converter,e,n),o=mS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Sm.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=uC(t,this._firestore);return o="string"==typeof(e=Qi(e))||e instanceof aS?CS(this._dataReader,"WriteBatch.update",s._key,e,n,r):SS(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Sm.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=uC(t,this._firestore);return this._mutations=this._mutations.concat(new qm(e._key,Sm.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Sg(Eg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e){if((t=Qi(t)).firestore!==e)throw new Sg(Eg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ti(e,t),e.prototype.convertBytes=function(t){return new uS(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new zE(this.firestore,null,e)},e}(iC);function lC(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=BE(t,zE);var o=BE(t.firestore,nS),s=yS(o);return fC(o,[("string"==typeof(e=Qi(e))||e instanceof aS?CS(s,"updateDoc",t._key,e,n,r):SS(s,"updateDoc",t._key,e)).toMutation(t._key,Sm.exists(!0))])}function hC(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Qi(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||tS(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(tS(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof zE)c=BE(t.firestore,nS),l=Gy(t._key.path),u={next:function(e){i[a]&&i[a](pC(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=BE(t,GE);c=BE(p.firestore,nS),l=p._query;var d=new cC(c);u={next:function(t){i[a]&&i[a](new KS(c,d,p,t))},error:i[a+1],complete:i[a+2]},zS(t._query)}return function(t,e,n,r){var i=this,o=new hE(r),s=new yT(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return ni(i,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return e=fT,[4,EE(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return ni(i,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return e=pT,[4,EE(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(rS(c),l,h,u)}function fC(t,e){return function(t,e){var n=this,r=new y_;return t.asyncQueue.enqueueAndForget((function(){return ni(n,void 0,void 0,(function(){var n;return ri(this,(function(i){switch(i.label){case 0:return n=RT,[4,TE(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(rS(t),e)}function pC(t,e,n){var r=n.docs.get(e._key),i=new cC(t);return new VS(t,i,e._key,r,new qS(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return ti(e,t),e.prototype.get=function(e){var n=this,r=uC(e,this._firestore),i=new cC(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new VS(n._firestore,i,r._key,t._document,new qS(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=yS(t)}return t.prototype.get=function(t){var e=this,n=uC(t,this._firestore),r=new sC(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return xg();var i=t[0];if(i.isFoundDocument())return new FS(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new FS(e._firestore,r,n._key,null,n.converter);throw xg()}))},t.prototype.set=function(t,e,n){var r=uC(t,this._firestore),i=oC(r.converter,e,n),o=mS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=uC(t,this._firestore);return o="string"==typeof(e=Qi(e))||e instanceof aS?CS(this._dataReader,"Transaction.update",s._key,e,n,r):SS(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=uC(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){if("undefined"==typeof Uint8Array)throw new Sg(Eg.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function gC(){if("undefined"==typeof atob)throw new Sg(Eg.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var yC=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return gC(),new t(uS.fromBase64String(e))},t.fromUint8Array=function(e){return vC(),new t(uS.fromUint8Array(e))},t.prototype.toBase64=function(){return gC(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return vC(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),mC=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){sS(t=BE(t,nS));var n=rS(t),r=t._freezeSettings(),i=new cE;return oS(n,i,new aE(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){sS(t=BE(t,nS));var e=rS(t),n=t._freezeSettings(),r=new cE;return oS(e,r,new uE(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Sg(Eg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new y_;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return ni(e,void 0,void 0,(function(){var e;return ri(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return __.yt()?(e=t+"main",[4,__.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Rw(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),bC=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof NE||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Pg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=BE(t,HE))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Pg("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=yi(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Sg(Eg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new xE(new PE(o,new uI(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ni(e,void 0,void 0,(function(){var e,n;return ri(this,(function(r){switch(r.label){case 0:return[4,_E(t)];case 1:return e=r.sent(),[4,IE(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=Og(i),o.Or.delete(0),OI(o))]}var i,o}))}))}))}(rS(BE(this._delegate,nS)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ni(e,void 0,void 0,(function(){var e,n;return ri(this,(function(r){switch(r.label){case 0:return[4,_E(t)];case 1:return e=r.sent(),[4,IE(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return(e=Og(t)).Or.add(0),[4,MI(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(rS(BE(this._delegate,nS)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&UE("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new y_;return t.asyncQueue.enqueueAndForget((function(){return ni(e,void 0,void 0,(function(){var e;return ri(this,(function(r){switch(r.label){case 0:return e=FT,[4,TE(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(rS(BE(this._delegate,nS)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new hE(e);return t.asyncQueue.enqueueAndForget((function(){return ni(n,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return e=function(t,e){Og(t).Gr.add(e),e.next()},[4,EE(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return ni(n,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return e=function(t,e){Og(t).Gr.delete(e)},[4,EE(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(rS(e=BE(e,nS)),tS(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new Sg(Eg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new DC(this,YE(this._delegate,t))}catch(e){throw SC(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new EC(this,$E(this._delegate,t))}catch(e){throw SC(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new PC(this,function(t,e){if(t=BE(t,HE),LE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new GE(t,null,(n=e,new Hy(zg.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw SC(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new y_;return t.asyncQueue.enqueueAndForget((function(){return ni(n,void 0,void 0,(function(){var n;return ri(this,(function(i){switch(i.label){case 0:return[4,(o=t,bE(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new dE(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(rS(e=this._delegate),(function(r){return function(e){return t(new wC(n,e))}(new dC(e,r))}))},t.prototype.batch=function(){var t=this;return rS(this._delegate),new IC(new aC(this._delegate,(function(e){return fC(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Sg(Eg.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Sg(Eg.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),_C=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ti(e,t),e.prototype.convertBytes=function(t){return new yC(new uS(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return EC.tu(e,this.firestore,null)},e}(iC);var wC=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new _C(t)}return t.prototype.get=function(t){var e=this,n=OC(t);return this._delegate.get(n).then((function(t){return new NC(e._firestore,new VS(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=OC(t);return n?(FE("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=OC(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,si([s,e,n],i)),this},t.prototype.delete=function(t){var e=OC(t);return this._delegate.delete(e),this},t}(),IC=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=OC(t);return n?(FE("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=OC(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,si([s,e,n],i)),this},t.prototype.delete=function(t){var e=OC(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),TC=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new BS(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new AC(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new _C(e),n),i.set(n,o)),o},t}();TC.nu=new WeakMap;var EC=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _C(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new Sg(Eg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new zE(n._delegate,r,new ay(e)))},t.tu=function(e,n,r){return new t(n,new zE(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new DC(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new DC(this.firestore,YE(this._delegate,t))}catch(e){throw SC(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Qi(t))instanceof zE&&XE(this._delegate,t)},t.prototype.set=function(t,e){e=FE("DocumentReference.set",e);try{return function(t,e,n){t=BE(t,zE);var r=BE(t.firestore,nS),i=oC(t.converter,e,n);return fC(r,[mS(yS(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Sm.none())])}(this._delegate,t,e)}catch(n){throw SC(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?lC(this._delegate,t):lC.apply(void 0,si([this._delegate,t,e],n))}catch(i){throw SC(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return fC(BE((t=this._delegate).firestore,nS),[new qm(t._key,Sm.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=CC(e),i=kC(e,(function(e){return new NC(t.firestore,new VS(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return hC(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=BE(t,zE);var e=BE(t.firestore,nS),n=rS(e),r=new cC(e);return function(t,e){var n=this,r=new y_;return t.asyncQueue.enqueueAndForget((function(){return ni(n,void 0,void 0,(function(){var n;return ri(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ni(this,void 0,void 0,(function(){var r,i;return ri(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=Og(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Sg(Eg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=sT(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,wE(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new VS(e,r,t._key,n,new qS(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=BE(t,zE);var e=BE(t.firestore,nS);return SE(rS(e),t._key,{source:"server"}).then((function(n){return pC(e,t,n)}))}(this._delegate):function(t){t=BE(t,zE);var e=BE(t.firestore,nS);return SE(rS(e),t._key).then((function(n){return pC(e,t,n)}))}(this._delegate)).then((function(t){return new NC(e.firestore,new VS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(TC.eu(this.firestore,e)):this._delegate.withConverter(null))},t}();function SC(t,e,n){return t.message=t.message.replace(e,n),t}function CC(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!tS(r))return r}return{}}function kC(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=tS(t[0])?t[0]:tS(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var NC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new EC(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return HS(this._delegate,t._delegate)},t}(),AC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ti(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(NC),PC=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _C(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,QS(this._delegate,(o=r,s=i=n,a=jS("where",e),new YS(a,s,o))))}catch(i){throw SC(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,QS(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=jS("orderBy",t);return new $S(r,n)}(e,n)))}catch(r){throw SC(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,QS(this._delegate,(KE("limit",n=e),new XS("limit",n,"F"))))}catch(r){throw SC(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,QS(this._delegate,(KE("limitToLast",n=e),new XS("limitToLast",n,"L"))))}catch(r){throw SC(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,QS(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new JS("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw SC(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,QS(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new JS("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw SC(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,QS(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ZS("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw SC(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,QS(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ZS("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw SC(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return JE(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=BE(t,GE);var e=BE(t.firestore,nS),n=rS(e),r=new cC(e);return function(t,e){var n=this,r=new y_;return t.asyncQueue.enqueueAndForget((function(){return ni(n,void 0,void 0,(function(){var n;return ri(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o,s,a;return ri(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,zw(t,e,!0)];case 1:return a=u.sent(),r=new ET(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=sT(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,wE(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new KS(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=BE(t,GE);var e=BE(t.firestore,nS),n=rS(e),r=new cC(e);return CE(n,t._query,{source:"server"}).then((function(n){return new KS(e,r,t,n)}))}(this._delegate):function(t){t=BE(t,GE);var e=BE(t.firestore,nS),n=rS(e),r=new cC(e);return zS(t._query),CE(n,t._query).then((function(n){return new KS(e,r,t,n)}))}(this._delegate)).then((function(t){return new xC(e.firestore,new KS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=CC(e),i=kC(e,(function(e){return new xC(t.firestore,new KS(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return hC(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(TC.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(),RC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new AC(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),xC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new PC(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new AC(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new RC(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new AC(n._firestore,r))}))},t.prototype.isEqual=function(t){return HS(this._delegate,t._delegate)},t}(),DC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return ti(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new EC(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new EC(this.firestore,void 0===t?$E(this._delegate):$E(this._delegate,t))}catch(e){throw SC(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this._delegate,n=t,r=BE(e.firestore,nS),i=$E(e),o=oC(e.converter,n),fC(r,[mS(yS(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,Sm.exists(!1))]).then((function(){return i}))).then((function(t){return new EC(s.firestore,t)}))},e.prototype.isEqual=function(t){return XE(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(TC.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(PC);function OC(t){return BE(t,zE)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MC=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(aS.bind.apply(aS,si([void 0],t)))}return t.documentId=function(){return new t(Qg.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Qi(t))instanceof aS&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),LC=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new wS("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new bS("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new IS("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new TS("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new ES("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){return e=this._delegate,n=t,r=rS(e=BE(e,nS)),i=new eS,function(t,e,n,r){var i,o,s,a=this,u=(i=n,o=CI(e),s=function(t,e){if(t instanceof Uint8Array)return lE(t,e);if(t instanceof ArrayBuffer)return lE(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new fE(s,o));t.asyncQueue.enqueueAndForget((function(){return ni(a,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return e=oE,[4,TE(t)];case 1:return e.apply(void 0,[n.sent(),u,r]),[2]}}))}))}))}(r,e._databaseId,n,i),i;var e,n,r,i}function UC(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return ni(n,void 0,void 0,(function(){var n;return ri(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=Og(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,wE(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(rS(e=BE(e,nS)),n).then((function(t){return t?new GE(e,null,t.query):null}))).then((function(t){return t?new PC(r,t):null}))}var jC,qC,VC={Firestore:bC,GeoPoint:lS,Timestamp:qg,Blob:yC,Transaction:wC,WriteBatch:IC,DocumentReference:EC,DocumentSnapshot:NC,Query:PC,QueryDocumentSnapshot:AC,QuerySnapshot:xC,CollectionReference:DC,FieldPath:MC,FieldValue:LC,setLogLevel:function(t){var e;e=t,Cg.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(jC=Eo).INTERNAL.registerComponent(new Yi("firestore",(function(t){return function(t,e){return new bC(t,new nS(t,e),new mC)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},VC))),jC.registerVersion("@firebase/firestore","2.3.8"),(qC=bC).prototype.loadBundle=FC,qC.prototype.namedQuery=UC;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var BC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},KC=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return ti(e,t),e}(Error);var WC=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return ni(this,void 0,void 0,(function(){var t;return ri(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return ni(this,void 0,void 0,(function(){var t,e;return ri(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var zC=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return HC(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?HC(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GC=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new zC,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new WC(e,n),this.cancelAllRequests=new Promise((function(t){s.deleteService=function(){return t()}}));try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(jC){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o;return ri(this,(function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return ni(this,void 0,void 0,(function(){var t;return ri(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f,p;return ri(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new KC("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(a),c=u.timer,l=u.promise,[4,Promise.race([QC(c,this.postJSON(r,i,o)),l,QC(c,this.cancelAllRequests)])];case 2:if(!(h=d.sent()))throw new KC("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!BC[a])return new KC("internal","internal");r=BC[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(jC){}return"ok"===r?null:new KC(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new KC("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new KC("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function QC(t,e){return ni(this,void 0,void 0,(function(){var n;return ri(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t){return Array.prototype.slice.call(t)}function $C(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function XC(t,e,n){var r,i=new Promise((function(i,o){$C(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function JC(t,e,n){var r=XC(t,e,n);return r.then((function(t){if(t)return new ik(t,r.request)}))}function ZC(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function tk(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return XC(this[e],r,arguments)})}))}function ek(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function nk(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return JC(this[e],r,arguments)})}))}function rk(t){this._index=t}function ik(t,e){this._cursor=t,this._request=e}function ok(t){this._store=t}function sk(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function ak(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new sk(n)}function uk(t){this._db=t}function ck(t,e,n){var r=XC(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new ak(i.result,t.oldVersion,i.transaction))}),r.then((function(t){return new uk(t)}))}function lk(t){return XC(indexedDB,"deleteDatabase",[t])}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,e){var n={Functions:GC};t.INTERNAL.registerComponent(new Yi("functions",(function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal"),a=t.getProvider("messaging");return new GC(i,o,a,s,r,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(Eo,fetch.bind(self)),Eo.registerVersion("@firebase/functions","0.6.13"),ZC(rk,"_index",["name","keyPath","multiEntry","unique"]),tk(rk,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),nk(rk,"_index",IDBIndex,["openCursor","openKeyCursor"]),ZC(ik,"_cursor",["direction","key","primaryKey","value"]),tk(ik,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(ik.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),$C(e._request).then((function(t){if(t)return new ik(t,e._request)}))}))})})),ok.prototype.createIndex=function(){return new rk(this._store.createIndex.apply(this._store,arguments))},ok.prototype.index=function(){return new rk(this._store.index.apply(this._store,arguments))},ZC(ok,"_store",["name","keyPath","indexNames","autoIncrement"]),tk(ok,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),nk(ok,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ek(ok,"_store",IDBObjectStore,["deleteIndex"]),sk.prototype.objectStore=function(){return new ok(this._tx.objectStore.apply(this._tx,arguments))},ZC(sk,"_tx",["objectStoreNames","mode"]),ek(sk,"_tx",IDBTransaction,["abort"]),ak.prototype.createObjectStore=function(){return new ok(this._db.createObjectStore.apply(this._db,arguments))},ZC(ak,"_db",["name","version","objectStoreNames"]),ek(ak,"_db",IDBDatabase,["deleteObjectStore","close"]),uk.prototype.transaction=function(){return new sk(this._db.transaction.apply(this._db,arguments))},ZC(uk,"_db",["name","version","objectStoreNames"]),ek(uk,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[ok,rk].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=YC(arguments),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[rk,ok].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));var hk,fk=((hk={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',hk["not-registered"]="Firebase Installation is not registered.",hk["installation-not-found"]="Firebase Installation not found.",hk["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',hk["app-offline"]="Could not process request. Application offline.",hk["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",hk),pk=new Ni("installations","Installations",fk);function dk(t){return t instanceof ki&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function gk(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function yk(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,pk.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function mk(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function bk(t,e){var n=e.refreshToken,r=mk(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function _k(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function wk(t,e){var n=e.fid;return ni(this,void 0,void 0,(function(){var e,r,i,o,s,a;return ri(this,(function(u){switch(u.label){case 0:return e=vk(t),r=mk(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.30"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,_k((function(){return fetch(e,o)}))];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return a=u.sent(),[2,{fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:gk(a.authToken)}];case 3:return[4,yk("Create Installation",s)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Tk=/^[cdef][\w-]{21}$/;function Ek(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,si([],oi(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return Tk.test(e)?e:""}catch(n){return""}}function Sk(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ck=new Map;function kk(t,e){var n=Sk(t);Nk(n,e),function(t,e){var n=Pk();n&&n.postMessage({key:t,fid:e});Rk()}(n,e)}function Nk(t,e){var n,r,i=Ck.get(t);if(i)try{for(var o=ii(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Ak=null;function Pk(){return!Ak&&"BroadcastChannel"in self&&((Ak=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Nk(t.data.key,t.data.fid)}),Ak}function Rk(){0===Ck.size&&Ak&&(Ak.close(),Ak=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xk,Dk="firebase-installations-store",Ok=null;function Mk(){return Ok||(Ok=ck("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Dk)}}))),Ok}function Lk(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s;return ri(this,(function(a){switch(a.label){case 0:return n=Sk(t),[4,Mk()];case 1:return r=a.sent(),i=r.transaction(Dk,"readwrite"),[4,(o=i.objectStore(Dk)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||kk(t,e.fid),[2,e]}}))}))}function Fk(t){return ni(this,void 0,void 0,(function(){var e,n,r;return ri(this,(function(i){switch(i.label){case 0:return e=Sk(t),[4,Mk()];case 1:return n=i.sent(),[4,(r=n.transaction(Dk,"readwrite")).objectStore(Dk).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Uk(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ri(this,(function(u){switch(u.label){case 0:return n=Sk(t),[4,Mk()];case 1:return r=u.sent(),i=r.transaction(Dk,"readwrite"),[4,(o=i.objectStore(Dk)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||kk(t,a.fid),[2,a]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){return ni(this,void 0,void 0,(function(){var e,n,r;return ri(this,(function(i){switch(i.label){case 0:return[4,Uk(t,(function(n){var r=function(t){return Bk(t||{fid:Ek(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(pk.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,wk(t,e)];case 1:return n=i.sent(),[2,Lk(t,n)];case 2:return dk(r=i.sent())&&409===r.customData.serverCode?[4,Fk(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Lk(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:qk(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function qk(t){return ni(this,void 0,void 0,(function(){var e,n,r,i;return ri(this,(function(o){switch(o.label){case 0:return[4,Vk(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Ik(100)];case 3:return o.sent(),[4,Vk(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,jk(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Vk(t){return Uk(t,(function(t){if(!t)throw pk.create("installation-not-found");return Bk(t)}))}function Bk(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Kk(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return ni(this,void 0,void 0,(function(){var t,i,o,s,a,u,c;return ri(this,(function(l){switch(l.label){case 0:return t=function(t,e){var n=e.fid;return vk(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,e),i=bk(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:"w:0.4.30"}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,_k((function(){return fetch(t,a)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,gk(c)];case 3:return[4,yk("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function Wk(t,e){return void 0===e&&(e=!1),ni(this,void 0,void 0,(function(){var n,r,i;return ri(this,(function(o){switch(o.label){case 0:return[4,Uk(t.appConfig,(function(r){if(!zk(r))throw pk.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return[4,Hk(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Ik(100)];case 3:return i.sent(),[4,Hk(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Wk(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw pk.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return ei(ei({},t),{authToken:e})}(r);return n=function(t,e){return ni(this,void 0,void 0,(function(){var n,r,i;return ri(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Kk(t,e)];case 1:return n=o.sent(),i=ei(ei({},e),{authToken:n}),[4,Lk(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!dk(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Fk(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=ei(ei({},e),{authToken:{requestStatus:0}}),[4,Lk(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Hk(t){return Uk(t,(function(t){if(!zk(t))throw pk.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?ei(ei({},t),{authToken:{requestStatus:0}}):t}))}function zk(t){return void 0!==t&&2===t.registrationStatus}function Gk(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return[4,jk(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o;return ri(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return vk(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),r=bk(t,e),i={method:"DELETE",headers:r},[4,_k((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,yk("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yk(t,e){var n=t.appConfig;return function(t,e){Pk();var n=Sk(t),r=Ck.get(n);r||(r=new Set,Ck.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Sk(t),r=Ck.get(n);r&&(r.delete(e),0===r.size&&Ck.delete(n),Rk())}(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t){return pk.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new Yi("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw $k("App Configuration");if(!t.name)throw $k("App Name");try{for(var r=ii(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw $k(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(t){return ni(this,void 0,void 0,(function(){var e,n,r;return ri(this,(function(i){switch(i.label){case 0:return[4,jk(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Wk(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),ni(this,void 0,void 0,(function(){return ri(this,(function(n){switch(n.label){case 0:return[4,Gk(t.appConfig)];case 1:return n.sent(),[4,Wk(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return ni(this,void 0,void 0,(function(){var e,n;return ri(this,(function(r){switch(r.label){case 0:return[4,Uk(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw pk.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw pk.create("app-offline");case 3:return[4,Qk(e,n)];case 4:return r.sent(),[4,Fk(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return Yk(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.30")}(Eo);var Xk,Jk,Zk=((xk={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',xk["only-available-in-window"]="This method is available in a Window context.",xk["only-available-in-sw"]="This method is available in a service worker context.",xk["permission-default"]="The notification permission was not granted and dismissed instead.",xk["permission-blocked"]="The notification permission was not granted and blocked instead.",xk["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",xk["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",xk["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",xk["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",xk["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",xk["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",xk["token-update-no-token"]="FCM returned no token when updating the user to push.",xk["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",xk["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",xk["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",xk["invalid-vapid-key"]="The public VAPID key must be a string.",xk["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",xk),tN=new Ni("messaging","Messaging",Zk),eN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function nN(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,si([],oi(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rN(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Jk=Xk||(Xk={})).PUSH_RECEIVED="push-received",Jk.NOTIFICATION_CLICKED="notification-clicked";function iN(t){return ni(this,void 0,void 0,(function(){var e,n,r=this;return ri(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=i.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,ck("fcm_token_details_db",5,(function(e){return ni(r,void 0,void 0,(function(){var r,i,o,s;return ri(this,(function(a){switch(a.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,r.clear()];case 2:if(a.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:nN(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:nN(o.auth),p256dh:nN(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:nN(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,lk("fcm_token_details_db")];case 4:return i.sent(),[4,lk("fcm_vapid_details_db")];case 5:return i.sent(),[4,lk("undefined")];case 6:return i.sent(),[2,oN(n)?n:null]}}))}))}function oN(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sN="firebase-messaging-store",aN=null;function uN(){return aN||(aN=ck("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(sN)}}))),aN}function cN(t){return ni(this,void 0,void 0,(function(){var e,n,r;return ri(this,(function(i){switch(i.label){case 0:return e=fN(t),[4,uN()];case 1:return[4,i.sent().transaction(sN).objectStore(sN).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,iN(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,lN(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function lN(t,e){return ni(this,void 0,void 0,(function(){var n,r,i;return ri(this,(function(o){switch(o.label){case 0:return n=fN(t),[4,uN()];case 1:return r=o.sent(),[4,(i=r.transaction(sN,"readwrite")).objectStore(sN).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function hN(t){return ni(this,void 0,void 0,(function(){var e,n,r;return ri(this,(function(i){switch(i.label){case 0:return e=fN(t),[4,uN()];case 1:return n=i.sent(),[4,(r=n.transaction(sN,"readwrite")).objectStore(sN).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function fN(t){return t.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ri(this,(function(u){switch(u.label){case 0:return[4,yN(t)];case 1:n=u.sent(),r=mN(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(gN(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),tN.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,tN.create("token-subscribe-failed",{errorInfo:a});if(!o.token)throw tN.create("token-subscribe-no-token");return[2,o.token]}}))}))}function dN(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ri(this,(function(u){switch(u.label){case 0:return[4,yN(t)];case 1:n=u.sent(),r=mN(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(gN(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),tN.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,tN.create("token-update-failed",{errorInfo:a});if(!o.token)throw tN.create("token-update-no-token");return[2,o.token]}}))}))}function vN(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o,s;return ri(this,(function(a){switch(a.label){case 0:return[4,yN(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(gN(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw o=i.error.message,tN.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw s=a.sent(),tN.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function gN(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function yN(t){var e=t.appConfig,n=t.installations;return ni(this,void 0,void 0,(function(){var t;return ri(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function mN(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==eN&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o,s;return ri(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw tN.create("permission-blocked");return[4,TN(e,n)];case 1:return r=a.sent(),[4,cN(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:nN(r.getKey("auth")),p256dh:nN(r.getKey("p256dh"))},i?[3,3]:[2,IN(t,o)];case 3:if(u=i.subscriptionOptions,l=(c=o).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,l&&h&&f&&p)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,vN(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,IN(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,wN({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l,h,f,p;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function _N(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return[4,cN(t)];case 1:return(n=i.sent())?[4,vN(t,n.token)]:[3,4];case 2:return i.sent(),[4,hN(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function wN(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o;return ri(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,dN(e,t)];case 1:return r=s.sent(),i=ei(ei({},t),{token:r,createTime:Date.now()}),[4,lN(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,_N(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function IN(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return[4,pN(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,lN(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function TN(t,e){return ni(this,void 0,void 0,(function(){var n;return ri(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rN(e)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function EN(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CN=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw tN.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return ni(this,void 0,void 0,(function(){var n;return ri(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,cN(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:eN,r.label=2;case 2:return[2,bN(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return _N(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw tN.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw tN.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw tN.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw tN.create("only-available-in-window")},t.prototype.onMessage=function(){throw tN.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw tN.create("only-available-in-window")},t.prototype.onPush=function(t){return ni(this,void 0,void 0,(function(){var e,n,r,i;return ri(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,PN()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,AN(n,e)]:(r=!1,e.notification?[4,RN(kN(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,SN(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return ni(this,void 0,void 0,(function(){var r;return ri(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,_N(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,cN(this.firebaseDependencies)];case 3:return r=i.sent(),[4,_N(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,bN(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:eN)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return ni(this,void 0,void 0,(function(){var r,i,o,s,a;return ri(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return EN(t.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,NN(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,SN(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=Xk.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function kN(t){var e,n=ei({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function NN(t){return ni(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return ri(this,(function(u){switch(u.label){case 0:return[4,PN()];case 1:e=u.sent();try{for(n=ii(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function AN(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Xk.PUSH_RECEIVED;try{for(var i=ii(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function PN(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function RN(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var xN=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return ni(this,void 0,void 0,(function(){var e,n;return ri(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Xk.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),EN(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw tN.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,bN(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=eN),[2]}))}))},t.prototype.updateSwReg=function(t){return ni(this,void 0,void 0,(function(){return ri(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw tN.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return ni(this,void 0,void 0,(function(){var t,e;return ri(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),tN.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,_N(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return ni(this,void 0,void 0,(function(){var t;return ri(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?tN.create("permission-blocked"):tN.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw tN.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw tN.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw tN.create("invalid-sw-registration");if(this.swRegistration)throw tN.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw tN.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw tN.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return ni(this,void 0,void 0,(function(){var n;return ri(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case Xk.NOTIFICATION_CLICKED:return"notification_open";case Xk.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function DN(t){return tN.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ON={isSupported:MN};function MN(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Eo.INTERNAL.registerComponent(new Yi("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw DN("App Configuration Object");if(!t.name)throw DN("App Name");var r=t.options;try{for(var i=ii(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw DN(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!MN())throw tN.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new CN(n):new xN(n)}),"PUBLIC").setServiceProps(ON));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var LN=function(t){function e(n,r){var i=t.call(this,FN(n),"Firebase Storage: "+r+" ("+FN(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return ti(e,t),e.prototype._codeEquals=function(t){return FN(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(ki);function FN(t){return"storage/"+t}function UN(){return new LN("unknown","An unknown error occurred, please check the error payload for server response.")}function jN(){return new LN("canceled","User canceled the upload/download.")}function qN(){return new LN("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function VN(t){return new LN("invalid-argument",t)}function BN(){return new LN("app-deleted","The Firebase app was deleted.")}function KN(t){return new LN("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function WN(t,e){return new LN("invalid-format","String does not match format '"+t+"': "+e)}function HN(t){throw new LN("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zN={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},GN=function(t,e){this.data=t,this.contentType=e||null};function QN(t,e){switch(t){case zN.RAW:return new GN(YN(e));case zN.BASE64:case zN.BASE64URL:return new GN($N(t,e));case zN.DATA_URL:return new GN((n=new XN(e)).base64?$N(zN.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(jC){throw WN(zN.DATA_URL,"Malformed data URL.")}return YN(e)}(n.rest),function(t){return new XN(t).contentType}(e))}var n;throw UN()}function YN(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function $N(t,e){switch(t){case zN.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw WN(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case zN.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw WN(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(jC){throw WN(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var XN=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw WN(zN.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var JN,ZN,tA={STATE_CHANGED:"state_changed"},eA={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function nA(t){switch(t){case"running":case"pausing":case"canceling":return eA.RUNNING;case"paused":return eA.PAUSED;case"success":return eA.SUCCESS;case"canceled":return eA.CANCELED;case"error":default:return eA.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(ZN=JN||(JN={}))[ZN.NO_ERROR=0]="NO_ERROR",ZN[ZN.NETWORK_ERROR=1]="NETWORK_ERROR",ZN[ZN.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rA=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=JN.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=JN.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=JN.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw HN("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw HN("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw HN("cannot .getStatus() before sending");try{return this.xhr_.status}catch(jC){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw HN("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var iA=function(){function t(){}return t.prototype.createConnection=function(){return new rA},t}(),oA=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(jC){return new t(e,"")}if(""===r.path)return r;throw new LN("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.bucket],p=h[l.indices.path];p||(p=""),r=new t(f,p),l.postModify(r);break}}if(null==r)throw function(t){return new LN("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),sA=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){return"string"==typeof t||t instanceof String}function uA(t){return cA()&&t instanceof Blob}function cA(){return"undefined"!=typeof Blob}function lA(t,e,n,r){if(r<e)throw VN("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw VN("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function fA(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pA=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(jC){o(jC)}else null!==s?((r=UN()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?BN():jN()):o(r=new LN("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new dA(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,a())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,si([null,t],e));else{var i;a()||o?c.call.apply(c,si([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new dA(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===JN.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new dA(s,r))}else{var a=r.getErrorCode()===JN.ABORT;e(!1,new dA(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),dA=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vA(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function gA(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=vA();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(cA())return new Blob(t);throw new LN("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yA=function(){function t(t,e){var n=0,r="";uA(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(uA(this.data_)){var r=this.data_,i=(s=e,a=n,(o=r).webkitSlice?o.webkitSlice(s,a):o.mozSlice?o.mozSlice(s,a):o.slice?o.slice(s,a):null);return null===i?null:new t(i)}var o,s,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(cA()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(gA.apply(null,r))}var i=e.map((function(t){return aA(t)?QN(zN.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){var e,n;try{e=JSON.parse(t)}catch(jC){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t,e){return e}var wA=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||_A},IA=null;function TA(){if(IA)return IA;var t=[];t.push(new wA("bucket")),t.push(new wA("generation")),t.push(new wA("metageneration")),t.push(new wA("name","fullPath",!0));var e=new wA("name");e.xform=function(t,e){return function(t){return!aA(t)||t.length<2?t:bA(t)}(e)},t.push(e);var n=new wA("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new wA("timeCreated")),t.push(new wA("updated")),t.push(new wA("md5Hash",null,!0)),t.push(new wA("cacheControl",null,!0)),t.push(new wA("contentDisposition",null,!0)),t.push(new wA("contentEncoding",null,!0)),t.push(new wA("contentLanguage",null,!0)),t.push(new wA("contentType",null,!0)),t.push(new wA("metadata","customMetadata",!0)),IA=t}function EA(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new oA(n,r);return e._makeStorageReference(i)}})}(r,t),r}function SA(t,e,n){var r=mA(e);return null===r?null:EA(t,r,n)}function CA(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e,n){var r=mA(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new oA(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];a=t._makeStorageReference(new oA(e,l.name)),r.items.push(a)}return r}(t,e,r)}var NA=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){if(!t)throw UN()}function PA(t,e){return function(n,r){var i=SA(t,r,e);return AA(null!==i),i}}function RA(t,e){return function(n,r){var i=SA(t,r,e);return AA(null!==i),function(t,e,n){var r=mA(e);if(null===r)return null;if(!aA(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return hA("/b/"+o(r)+"/o/"+o(i),n)+fA({alt:"media",token:e})}))[0]}(i,r,t.host)}}function xA(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new LN("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new LN("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new LN("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new LN("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function DA(t){var e=xA(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new LN("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function OA(t,e,n){var r=hA(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new NA(r,"GET",PA(t,n),i);return o.errorHandler=DA(e),o}function MA(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=hA(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new NA(s,"GET",function(t,e){return function(n,r){var i=kA(t,e,r);return AA(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=xA(e),u}function LA(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var FA=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function UA(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(jC){AA(!1)}return AA(!!n&&-1!==(e||["active"]).indexOf(n)),n}function jA(t,e,n,r,i,o,s,a){var u=new FA(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new LN("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,f);if(null===d)throw qN();var v=e.maxUploadRetryTime,g=new NA(n,"POST",(function(t,n){var i,s=UA(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?PA(e,o)(t,n):null,new FA(a,c,"final"===s,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=a||null,g.errorHandler=xA(t),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qA=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BA=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=TA(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=LA(e,r,i),a={name:s.fullPath},u=hA(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=CA(s,n),h=t.maxUploadRetryTime,f=new NA(u,"POST",(function(t){var e;UA(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(jC){AA(!1)}return AA(aA(e)),e}),h);return f.urlParams=a,f.headers=c,f.body=l,f.errorHandler=xA(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new NA(n,"POST",(function(t){var e=UA(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(jC){AA(!1)}n||AA(!1);var i=Number(n);return AA(!isNaN(i)),new FA(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=xA(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new FA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var s;try{s=jA(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(jC){return t._error=jC,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=OA(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=LA(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+CA(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+a+"--",h=yA.getBlob(c,r,l);if(null===h)throw qN();var f={name:u.fullPath},p=hA(o,t.host),d=t.maxUploadRetryTime,v=new NA(p,"POST",PA(t,n),d);return v.urlParams=f,v.headers=s,v.body=h.uploadData(),v.errorHandler=xA(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=jN(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=nA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new qA(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(nA(this._state)){case eA.SUCCESS:VA(this._resolve.bind(null,this.snapshot))();break;case eA.CANCELED:case eA.ERROR:VA(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(nA(this._state)){case eA.RUNNING:case eA.PAUSED:t.next&&VA(t.next.bind(t,this.snapshot))();break;case eA.SUCCESS:t.complete&&VA(t.complete.bind(t))();break;case eA.CANCELED:case eA.ERROR:t.error&&VA(t.error.bind(t,this._error))();break;default:t.error&&VA(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),KA=function(){function t(t,e){this._service=t,this._location=e instanceof oA?e:oA.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new oA(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return bA(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new oA(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw KN(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){var e={prefixes:[],items:[]};return HA(t,e).then((function(){return e}))}function HA(t,e,n){return ni(this,void 0,void 0,(function(){var r,i,o;return ri(this,(function(s){switch(s.label){case 0:return[4,zA(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,HA(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function zA(t,e){return ni(this,void 0,void 0,(function(){var n,r;return ri(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&lA("options.maxResults",1,1e3,e.maxResults),n=e||{},r=MA(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function GA(t,e){return ni(this,void 0,void 0,(function(){var n;return ri(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=hA(e.fullServerUrl(),t.host),o=CA(n,r),s=t.maxOperationRetryTime,a=new NA(i,"PATCH",PA(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=DA(e),a}(t.storage,t._location,e,TA()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function QA(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=hA(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new NA(r,"GET",RA(t,n),i);return o.errorHandler=DA(e),o}(t.storage,t._location,TA()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new LN("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function YA(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=hA(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new NA(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=DA(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function $A(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new oA(t._location.bucket,n);return new KA(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){return/^[A-Za-z]+:\/\//.test(t)}function JA(t,e){if(t instanceof eP){var n=t;if(null==n._bucket)throw new LN("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new KA(n,n._bucket);return null!=e?JA(r,e):r}if(void 0!==e){if(e.includes(".."))throw VN('`path` param cannot contain ".."');return $A(t,e)}return t}function ZA(t,e){if(e&&XA(e)){if(t instanceof eP)return new KA(t,e);throw VN("To use ref(service, url), the first argument must be a Storage instance.")}return JA(t,e)}function tP(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:oA.makeFromBucketSpec(n,t)}var eP=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?oA.makeFromBucketSpec(i,this._host):tP(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=oA.makeFromBucketSpec(this._url,t):this._bucket=tP(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){lA("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){lA("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return ni(this,void 0,void 0,(function(){var t,e;return ri(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return ni(this,void 0,void 0,(function(){var t;return ri(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new KA(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new sA(BN());var i=function(t,e,n,r,i,o){var s=fA(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new pA(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return ni(this,void 0,void 0,(function(){var e,n,r;return ri(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new BA(t,new yA(e),n)}(t=Qi(t),e,n)}function rP(t){return function(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=OA(t.storage,t._location,TA()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Qi(t))}function iP(t,e){return ZA(t=Qi(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oP=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),sP=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new oP(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new oP(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new oP(t,i,i._ref))}:{next:e.next?function(t){return e.next(new oP(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),aP=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new uP(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new uP(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),uP=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return $A(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new sP(nP(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=zN.RAW),this._throwIfRoot("putString");var r=QN(e,t),i=ei({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new sP(new BA(this._delegate,new yA(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,WA(t=Qi(t))).then((function(t){return new aP(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return zA(t=Qi(t),e)}(this._delegate,t||void 0).then((function(t){return new aP(t,e.storage)}))},t.prototype.getMetadata=function(){return rP(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return GA(t=Qi(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return QA(Qi(this._delegate))},t.prototype.delete=function(){return this._throwIfRoot("delete"),YA(Qi(this._delegate))},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw KN(t)},t}(),cP=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(XA(t))throw VN("ref() expected a child path but got a URL, use refFromURL instead.");return new uP(iP(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!XA(t))throw VN("refFromURL() expected a full URL but got a child path, use ref() instead.");try{oA.makeFromUrl(t,this._delegate.host)}catch(jC){throw VN("refFromUrl() expected a valid full URL but got an invalid one.")}return new uP(iP(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new cP(r,new eP(r,i,o,new iA,n,Eo.SDK_VERSION))}!function(t){var e={TaskState:eA,TaskEvent:tA,StringFormat:zN,Storage:eP,Reference:uP};t.INTERNAL.registerComponent(new Yi("storage",lP,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.6")}(Eo);var hP,fP,pP,dP=((hP={})["trace started"]="Trace {$traceName} was started before.",hP["trace stopped"]="Trace {$traceName} is not running.",hP["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",hP["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",hP["no window"]="Window is not available.",hP["no app id"]="App id is not available.",hP["no project id"]="Project id is not available.",hP["no api key"]="Api key is not available.",hP["invalid cc log"]="Attempted to queue invalid cc event",hP["FB not default"]="Performance can only start when Firebase app instance is the default one.",hP["RC response not ok"]="RC response is not ok",hP["invalid attribute name"]="Attribute name {$attributeName} is invalid.",hP["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",hP["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",hP["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",hP),vP=new Ni("performance","Performance",dP),gP=new uo("Performance");gP.logLevel=to.INFO;var yP,mP=function(){function t(t){if(this.window=t,!t)throw vP.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Ei()||(gP.info("IndexedDB is not supported by current browswer"),!1):(gP.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===fP&&(fP=new t(pP)),fP},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bP(t,e){var n=t.length-e.length;if(n<0||n>1)throw vP.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _P,wP,IP,TP=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=bP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=bP("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw vP.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw vP.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw vP.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===yP&&(yP=new t),yP},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(){return _P}(IP=wP||(wP={}))[IP.UNKNOWN=0]="UNKNOWN",IP[IP.VISIBLE=1]="VISIBLE",IP[IP.HIDDEN=2]="HIDDEN";var SP=["firebase_","google_","ga_"],CP=new RegExp("^[a-zA-Z]\\w*$");function kP(){switch(mP.getInstance().document.visibilityState){case"visible":return wP.VISIBLE;case"hidden":return wP.HIDDEN;default:return wP.UNKNOWN}}function NP(){var t=mP.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var AP=!0;function PP(t){var e=function(){var t=mP.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return e?(RP(e),Promise.resolve()):function(t){return(e=TP.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+TP.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+TP.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:TP.getInstance().getAppId(),app_version:"0.4.16",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw vP.create("RC response not ok")}))})).catch((function(){gP.info("Could not fetch config, will use default configs")}));var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t).then(RP).then((function(t){return function(t){var e=mP.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*TP.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}function RP(t){if(!t)return t;var e=TP.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=AP,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=xP(e.tracesSamplingRate),e.logNetworkAfterSampling=xP(e.networkRequestsSamplingRate),t}function xP(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DP,OP=1;function MP(){var t;return OP=2,DP=DP||(t=mP.getInstance().document,new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))).then((function(){return(t=TP.getInstance().installationsService.getId()).then((function(t){_P=t})),t;var t})).then((function(t){return PP(t)})).then((function(){return LP()}),(function(){return LP()}))}function LP(){OP=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FP,UP=3,jP=[],qP=!1;function VP(t){setTimeout((function(){var t,e;if(0!==UP)return jP.length?(t=jP.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=TP.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||gP.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(jP=si(si([],e),jP),gP.info("Retry transport request later.")),UP=3,VP(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:TP.getInstance().logSource,log_event:e},t).catch((function(){jP=si(si([],t),jP),UP--,gP.info("Tries left: "+UP+"."),VP(1e4)}))):VP(1e4)}),t)}function BP(t){if(!t.eventTime||!t.message)throw vP.create("invalid cc log");jP=si(si([],jP),[t])}function KP(t,e){var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */FP||(n=zP,FP=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];BP({message:n.apply(void 0,t),eventTime:Date.now()})}),FP(t,e)}function WP(t){var e=TP.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&mP.getInstance().requiredApisAvailable()&&(t.isAuto&&kP()!==wP.VISIBLE||(3===OP?HP(t):MP().then((function(){return HP(t)}),(function(){return HP(t)}))))}function HP(t){if(EP()){var e=TP.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return KP(t,1)}),0)}}function zP(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:GP(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:GP(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function GP(){return{google_app_id:TP.getInstance().getAppId(),app_instance_id:EP(),web_app_info:{sdk_version:"0.4.16",page_url:mP.getInstance().getUrl(),service_worker_status:(t=mP.getInstance().navigator,"serviceWorker"in t?t.serviceWorker.controller?2:3:1),visibility_state:kP(),effective_connection_type:NP()},application_process_state:0};var t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QP=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var YP=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=mP.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw vP.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw vP.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),WP(this)},t.prototype.record=function(t,e,n){if(t<=0)throw vP.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw vP.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=ei({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}WP(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith("_wt_")&&QP.indexOf(i)>-1)&&i.startsWith("_"))throw vP.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&gP.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||SP.some((function(t){return n.startsWith(t)}))||!n.match(CP)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw vP.create("invalid attribute name",{attributeName:t});if(!i)throw vP.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return ei({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=mP.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),s=Math.floor(1e3*mP.getInstance().getTimeOrigin());o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}WP(o)}},t.createUserTimingTrace=function(e){WP(new t(e,!1,e))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){var e=t;if(e&&void 0!==e.responseStart){var n=mP.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=TP.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return KP(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){EP()&&(setTimeout((function(){return function(){var t=mP.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){YP.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),YP.createOobTrace(e,n,t))}))}else YP.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=mP.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){$P(r[n])}t.setupObserver("resource",$P)}()}),0),setTimeout((function(){return function(){for(var t=mP.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){JP(r[n])}t.setupObserver("measure",JP)}()}),0))}function JP(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&YP.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZP=function(){function t(t){this.app=t,mP.getInstance().requiredApisAvailable()&&Si().then((function(t){t&&(qP||(VP(5500),qP=!0),MP().then(XP,XP))})).catch((function(t){gP.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new YP(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return TP.getInstance().instrumentationEnabled},set:function(t){TP.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return TP.getInstance().dataCollectionEnabled},set:function(t){TP.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw vP.create("FB not default");if("undefined"==typeof window)throw vP.create("no window");var n;return n=window,pP=n,TP.getInstance().firebaseAppInstance=t,TP.getInstance().installationsService=e,new ZP(t)};t.INTERNAL.registerComponent(new Yi("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.16")}(Eo);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tR,eR,nR,rR,iR="https://www.googletagmanager.com/gtag/js";(eR=tR||(tR={})).EVENT="event",eR.SET="set",eR.CONFIG="config",(rR=nR||(nR={})).ADD_SHIPPING_INFO="add_shipping_info",rR.ADD_PAYMENT_INFO="add_payment_info",rR.ADD_TO_CART="add_to_cart",rR.ADD_TO_WISHLIST="add_to_wishlist",rR.BEGIN_CHECKOUT="begin_checkout",rR.CHECKOUT_PROGRESS="checkout_progress",rR.EXCEPTION="exception",rR.GENERATE_LEAD="generate_lead",rR.LOGIN="login",rR.PAGE_VIEW="page_view",rR.PURCHASE="purchase",rR.REFUND="refund",rR.REMOVE_FROM_CART="remove_from_cart",rR.SCREEN_VIEW="screen_view",rR.SEARCH="search",rR.SELECT_CONTENT="select_content",rR.SELECT_ITEM="select_item",rR.SELECT_PROMOTION="select_promotion",rR.SET_CHECKOUT_OPTION="set_checkout_option",rR.SHARE="share",rR.SIGN_UP="sign_up",rR.TIMING_COMPLETE="timing_complete",rR.VIEW_CART="view_cart",rR.VIEW_ITEM="view_item",rR.VIEW_ITEM_LIST="view_item_list",rR.VIEW_PROMOTION="view_promotion",rR.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oR,sR=new uo("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t,e,n,r,i,o){return ni(this,void 0,void 0,(function(){var s,a,u,c;return ri(this,(function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),sR.error(c),[3,8];case 8:return t(tR.CONFIG,i,o),[2]}}))}))}function uR(t,e,n,r,i){return ni(this,void 0,void 0,(function(){var o,s,a,u,c,l,h,f;return ri(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=p.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&(h=l[c],"break"!==u(h));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(tR.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),sR.error(f),[3,5];case 5:return[2]}}))}))}function cR(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return ni(this,void 0,void 0,(function(){var a;return ri(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==tR.EVENT?[3,2]:[4,uR(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==tR.CONFIG?[3,4]:[4,aR(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(tR.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),sR.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var lR=((oR={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",oR["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",oR["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",oR["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",oR["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",oR["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",oR["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",oR["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',oR["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',oR),hR=new Ni("analytics","Analytics",lR),fR=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function pR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function dR(t){var e;return ni(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return ri(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:pR(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(s=c.sent()).status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw hR.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function vR(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=fR),ni(this,void 0,void 0,(function(){var e,s,a,u,c,l,h;return ri(this,(function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,gR(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return sR.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,dR(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof ki&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return sR.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Gi(o,r.intervalMillis,30):Gi(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),sR.debug("Calling attemptFetch again in "+l+" millis"),[2,vR(t,h,n,r)];case 7:return[2]}}))}))}function gR(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(hR.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var yR=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t,e,n,r,i,o){return ni(this,void 0,void 0,(function(){var s,a,u,c,l,h,f;return ri(this,(function(p){switch(p.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=fR),ni(this,void 0,void 0,(function(){var r,i,o,s,a,u,c=this;return ri(this,(function(l){if(r=t.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw hR.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw hR.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new yR,setTimeout((function(){return ni(c,void 0,void 0,(function(){return ri(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,vR({appId:i,apiKey:o,measurementId:s},a,u,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&sR.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return sR.error(t)})),e.push(s),a=function(){return ni(this,void 0,void 0,(function(){var t;return ri(this,(function(e){switch(e.label){case 0:return Ei()?[3,1]:(sR.warn(hR.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Si()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),sR.warn(hR.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,a])];case 1:return u=p.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(iR))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||function(t,e){var n=document.createElement("script");n.src=iR+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(tR.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bR,_R,wR={},IR=[],TR={},ER="dataLayer",SR="gtag",CR=!1;function kR(t){if(CR)throw hR.create("already-initialized");t.dataLayerName&&(ER=t.dataLayerName),t.gtagName&&(SR=t.gtagName)}function NR(t,e){!function(){var t=[];if(wi()&&t.push("This is a browser extension environment."),Ci()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=hR.create("invalid-analytics-context",{errorInfo:e});sR.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw hR.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw hR.create("no-api-key");sR.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=wR[i])throw hR.create("already-exists",{id:i});if(!CR){n=ER,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=cR(wR,IR,TR,ER,SR),s=o.wrappedGtag,a=o.gtagCore;_R=s,bR=a,CR=!0}return wR[i]=mR(t,IR,TR,e,bR,ER),{app:t,logEvent:function(t,e,n){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n,r,i){return ni(this,void 0,void 0,(function(){var o,s;return ri(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(tR.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=ei(ei({},r),{send_to:o}),t(tR.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(_R,wR[i],t,e,n).catch((function(t){return sR.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return ni(this,void 0,void 0,(function(){var i;return ri(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(tR.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(tR.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(_R,wR[i],t,e).catch((function(t){return sR.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return ni(this,void 0,void 0,(function(){var i;return ri(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(tR.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(tR.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(_R,wR[i],t,e).catch((function(t){return sR.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return ni(this,void 0,void 0,(function(){var i,o,s,a,u;return ri(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(tR.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(tR.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(_R,wR[i],t,e).catch((function(t){return sR.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return ni(this,void 0,void 0,(function(){var n;return ri(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(wR[i],t).catch((function(t){return sR.error(t)}))},INTERNAL:{delete:function(){return delete wR[i],Promise.resolve()}}}}function AR(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:if(wi())return[2,!1];if(!Ci())return[2,!1];if(!Ei())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Si()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new Yi("analytics",(function(t){return NR(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:kR,EventName:nR,isSupported:AR})),t.INTERNAL.registerComponent(new Yi("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(jC){throw hR.create("interop-component-reg-failed",{reason:jC})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.14")}(Eo);var PR,RR=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return ni(this,void 0,void 0,(function(){var e,n,r,i,o;return ri(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),xR=((PR={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",PR["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",PR["registration-api-key"]="Undefined API key. Check Firebase app initialization.",PR["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",PR["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",PR["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",PR["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",PR["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",PR["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",PR["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',PR["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',PR["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",PR["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",PR),DR=new Ni("remoteconfig","Remote Config",xR);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var OR=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return ni(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,f,p,d,v,g,y,m,b;return ri(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return _.sent(),[4,c];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),DR.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),DR.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=m.entries,y=m.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?d=500:"NO_CHANGE"===y?d=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(g={}),304!==d&&200!==d)throw DR.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},t}(),MR=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),LR=["1","true","t","yes","y","on"],FR=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&LR.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),UR=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=to.DEBUG;break;case"silent":this._logger.logLevel=to.SILENT;break;default:this._logger.logLevel=to.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return ni(this,void 0,void 0,(function(){var t,e,n;return ri(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return ni(this,void 0,void 0,(function(){var t,e,n,r=this;return ri(this,(function(i){switch(i.label){case 0:t=new MR,setTimeout((function(){return ni(r,void 0,void 0,(function(){return ri(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof ki&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return ni(this,void 0,void 0,(function(){return ri(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(ei(ei({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new FR("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new FR("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new FR("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t,e){var n=t.target.error||void 0;return DR.create(e,{originalErrorMessage:n&&n.message})}var qR=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(jR(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return ni(this,void 0,void 0,(function(){var e,n=this;return ri(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(jR(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(jC){i(DR.create("storage-get",{originalErrorMessage:jC&&jC.message}))}}))]}}))}))},t.prototype.set=function(t,e){return ni(this,void 0,void 0,(function(){var n,r=this;return ri(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(jR(t,"storage-set"))},u.onsuccess=function(){i()}}catch(jC){o(DR.create("storage-set",{originalErrorMessage:jC&&jC.message}))}}))]}}))}))},t.prototype.delete=function(t){return ni(this,void 0,void 0,(function(){var e,n=this;return ri(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(jR(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(jC){i(DR.create("storage-delete",{originalErrorMessage:jC&&jC.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),VR=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return ni(this,void 0,void 0,(function(){var t,e,n,r,i,o;return ri(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function BR(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(DR.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var KR,WR,HR=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return ni(this,void 0,void 0,(function(){var e,i,o;return ri(this,(function(s){switch(s.label){case 0:return[4,BR(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof ki&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Gi(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),zR="@firebase/remote-config";(KR=Eo).INTERNAL.registerComponent(new Yi("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw DR.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw DR.create("registration-project-id");if(!a)throw DR.create("registration-api-key");if(!u)throw DR.create("registration-app-id");n=n||"firebase";var c=new qR(u,r.name,n),l=new VR(c),h=new uo(zR);h.logLevel=to.ERROR;var f=new OR(i,KR.SDK_VERSION,n,s,a,u),p=new HR(f,c),d=new RR(p,c,l,h),v=new UR(r,d,l,c,h);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),KR.registerVersion(zR,"0.1.41");var GR=((WR={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",WR["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",WR["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",WR["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",WR["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",WR["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",WR["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",WR["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",WR["recaptcha-error"]="ReCAPTCHA error.",WR),QR=new Ni("appCheck","AppCheck",GR),YR=new Map,$R={activated:!1,tokenObservers:[]},XR={enabled:!1};function JR(t){return YR.get(t)||$R}function ZR(t,e){YR.set(t,e)}function tx(){return XR}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(){return self.grecaptcha}function nx(t){if(!JR(t).activated)throw QR.create("use-before-activation",{appName:t.name})}function rx(t,e){var n=JR(t),r=new gi;ZR(t,ei(ei({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var s,a,u=ex();return u?u.ready((function(){ox(t,e,u,i),r.resolve(u)})):(s=function(){var n=ex();if(!n)throw new Error("no recaptcha");n.ready((function(){ox(t,e,n,i),r.resolve(n)}))},(a=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",a.onload=s,document.head.appendChild(a)),r.promise}function ix(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:return nx(t),[4,JR(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=JR(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function ox(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),o=JR(t);ZR(t,ei(ei({},o),{reCAPTCHAState:ei(ei({},o.reCAPTCHAState),{widgetId:i})}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sx="https://content-firebaseappcheck.googleapis.com/v1beta",ax=3e4,ux=96e4,cx=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return ni(this,void 0,void 0,(function(){var e;return ri(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new gi,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new gi,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function lx(t,e){var n=t.url,r=t.body;return ni(this,void 0,void 0,(function(){var t,i,o,s,a,u,c,l,h,f;return ri(this,(function(p){switch(p.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:t},p.label=1;case 1:return p.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return s=p.sent(),[3,4];case 3:throw a=p.sent(),QR.create("fetch-network-error",{originalErrorMessage:a.message});case 4:if(200!==s.status)throw QR.create("fetch-status-error",{httpStatus:s.status});p.label=5;case 5:return p.trys.push([5,7,,8]),[4,s.json()];case 6:return u=p.sent(),[3,8];case 7:throw c=p.sent(),QR.create("fetch-parse-error",{originalErrorMessage:c.message});case 8:if(!(l=u.ttl.match(/^([\d.]+)(s)$/))||!l[2]||isNaN(Number(l[1])))throw QR.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return h=1e3*Number(l[1]),f=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f}]}}))}))}function hx(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:sx+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:e}}}function fx(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:sx+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var px="firebase-app-check-store",dx=null;function vx(){return dx||(dx=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(QR.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(px,{keyPath:"compositeKey"})}}}catch(jC){e(QR.create("storage-open",{originalErrorMessage:jC.message}))}})))}function gx(t){return mx(bx(t))}function yx(t,e){return ni(this,void 0,void 0,(function(){var n,r,i,o;return ri(this,(function(s){switch(s.label){case 0:return[4,vx()];case 1:return n=s.sent(),r=n.transaction(px,"readwrite"),i=r.objectStore(px),o=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){o.onsuccess=function(e){t()},r.onerror=function(t){var n;e(QR.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function mx(t){return ni(this,void 0,void 0,(function(){var e,n,r,i;return ri(this,(function(o){switch(o.label){case 0:return[4,vx()];case 1:return e=o.sent(),n=e.transaction(px,"readonly"),r=n.objectStore(px),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(QR.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function bx(t){return t.options.appId+"-"+t.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _x=new uo("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){return ni(this,void 0,void 0,(function(){var e,n;return ri(this,(function(r){switch(r.label){case 0:if(!Ei())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,gx(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),_x.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}function Ix(t,e){return Ei()?function(t,e){return yx(bx(t),e)}(t,e).catch((function(t){_x.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function Tx(){return ni(this,void 0,void 0,(function(){var t,e;return ri(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,mx("debug-token")];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,yx("debug-token",r)).catch((function(t){return _x.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){return ni(this,void 0,void 0,(function(){var t;return ri(this,(function(e){if((t=tx()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sx={error:"UNKNOWN_ERROR"};function Cx(t){return fi.encodeString(JSON.stringify(t),!1)}function kx(t,e,n){return void 0===n&&(n=!1),ni(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f,p,d,v,g;return ri(this,(function(y){switch(y.label){case 0:return nx(t),r=JR(t),i=r.token,o=void 0,i?[3,2]:[4,wx(t)];case 1:(s=y.sent())&&Rx(s)&&(i=s,ZR(t,ei(ei({},r),{token:i})),Px(t,{token:i.token})),y.label=2;case 2:return!n&&i&&Rx(i)?[2,{token:i.token}]:tx().enabled?(u=lx,c=fx,l=[t],[4,Ex()]):[3,6];case 3:return[4,u.apply(void 0,[c.apply(void 0,l.concat([y.sent()])),e])];case 4:return a=y.sent(),[4,Ix(t,a)];case 5:return y.sent(),ZR(t,ei(ei({},r),{token:a})),[2,{token:a.token}];case 6:return y.trys.push([6,12,,13]),r.customProvider?[4,r.customProvider.getToken()]:[3,8];case 7:return h=y.sent(),f=function(t){var e=Di(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null}(h.token),p=null!==f&&f<Date.now()&&f>0?1e3*f:Date.now(),i=ei(ei({},h),{issuedAtTimeMillis:p}),[3,11];case 8:return[4,ix(t).catch((function(t){throw QR.create("recaptcha-error")}))];case 9:return d=y.sent(),[4,lx(hx(t,d),e)];case 10:i=y.sent(),y.label=11;case 11:return[3,13];case 12:return v=y.sent(),_x.error(v),o=v,[3,13];case 13:return i?[3,14]:(g=function(t){return{token:Cx(Sx),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(o),[3,16]);case 14:return g={token:i.token},ZR(t,ei(ei({},r),{token:i})),[4,Ix(t,i)];case 15:y.sent(),y.label=16;case 16:return Px(t,g),[2,g]}}))}))}function Nx(t,e,n,r,i){var o=JR(t),s={next:r,error:i,type:n},a=ei(ei({},o),{tokenObservers:si(si([],o.tokenObservers),[s])});if(!a.tokenRefresher){var u=function(t,e){var n=this;return new cx((function(){return ni(n,void 0,void 0,(function(){var n;return ri(this,(function(r){switch(r.label){case 0:return JR(t).token?[3,2]:[4,kx(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,kx(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=JR(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),ax,ux)}(t,e);a.tokenRefresher=u}if(a.tokenRefresher.isRunning()||!0!==o.isTokenAutoRefreshEnabled||a.tokenRefresher.start(),o.token&&Rx(o.token)){var c=o.token;Promise.resolve().then((function(){return r({token:c.token})})).catch((function(){}))}ZR(t,a)}function Ax(t,e){var n=JR(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),ZR(t,ei(ei({},n),{tokenObservers:r}))}function Px(t,e){for(var n=0,r=JR(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(o){}}}function Rx(t){return t.expireTimeMillis-Date.now()>0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xx(t,e){return{app:t,activate:function(e,n){return function(t,e,n){var r=JR(t);if(r.activated)throw QR.create("already-activated",{appName:t.name});var i=ei(ei({},r),{activated:!0});"string"==typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,ZR(t,i),i.siteKey&&rx(t,i.siteKey).catch((function(){}))}(t,e,n)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=JR(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),ZR(t,ei(ei({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return ni(this,void 0,void 0,(function(){var r;return ri(this,(function(i){switch(i.label){case 0:return[4,kx(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return function(t,e,n,r,i){var o=function(){},s=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?s=n.error.bind(n):r&&(s=r),Nx(t,e,"EXTERNAL",o,s),function(){return Ax(t,o)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=JR(t).tokenObservers;e<n.length;e++){var r=n[e];Ax(t,r.next)}return Promise.resolve()}}}}!function(t){t.INTERNAL.registerComponent(new Yi("appCheck",(function(t){return xx(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider("app-check-internal").initialize()}))),t.INTERNAL.registerComponent(new Yi("app-check-internal",(function(t){return function(t,e){return{getToken:function(n){return kx(t,e,n)},addTokenListener:function(n){return Nx(t,e,"INTERNAL",n)},removeTokenListener:function(e){return Ax(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.2.0")}(Eo),function(){var t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=tx();e.enabled=!0;var n=new gi;e.token=n,"string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Tx())}}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Eo.registerVersion("firebase","8.7.1","app"),Eo.SDK_VERSION="8.7.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Eo.registerVersion("firebase","8.7.1");export{Qn as F,Le as a,cr as b,rr as c,hr as d,Jr as e,Eo as f,tr as o,Me as p,zt as r,u as t,ee as u,Yr as w};
